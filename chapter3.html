<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R入門 - 3&nbsp; オブジェクトと変数・定数</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapter4.html" rel="next">
<link href="./chapter2.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapter1.html">Rプログラミングの基礎</a></li><li class="breadcrumb-item"><a href="./chapter3.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">オブジェクトと変数・定数</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R入門</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">はじめに</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Rプログラミングの基礎</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Rのインストール</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Rを使ってみよう</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">オブジェクトと変数・定数</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">条件判断（Control structures）</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">繰り返し文（Looping）</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">ライブラリ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">エラー処理（error handler）</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">数値</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">文字列</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">因子（factor）</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">ベクター</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">リスト・データフレーム・行列</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">データの読み込みと書き出し（I/O）</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">データセット</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Rでのデータの取り扱い</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">apply関数群</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">tidyr・dplyr</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter17.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">日時データの取り扱い</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter18.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">オブジェクト指向とクラス</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter19.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">コーディング規約</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Rでのグラフ作成</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter20.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">グラフ作成：高レベルグラフィック関数</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter21.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">グラフ作成：低レベルグラフィック関数とグラフィックパラメータ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter22.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">ggplot2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter23.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">plotly</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">統計解析の基礎</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter24.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">確率分布と乱数</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter25.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">検定</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter26.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">相関と回帰</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter27.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">分類</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter28.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">教師なし学習</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter29.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">時系列分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter30.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">生存時間解析</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">アドバンスな手法</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter31.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">purrr</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter32.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">地理空間情報</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter33.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">ネットワーク解析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter34.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">R markdown・Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter35.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Shiny</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">おわりに</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">参考文献</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#プログラミング言語としてのr" id="toc-プログラミング言語としてのr" class="nav-link active" data-scroll-target="#プログラミング言語としてのr"><span class="header-section-number">3.1</span> プログラミング言語としてのR</a></li>
  <li><a href="#オブジェクトとは" id="toc-オブジェクトとは" class="nav-link" data-scroll-target="#オブジェクトとは"><span class="header-section-number">3.2</span> オブジェクトとは？</a></li>
  <li><a href="#型typeとは" id="toc-型typeとは" class="nav-link" data-scroll-target="#型typeとは"><span class="header-section-number">3.3</span> 型（type）とは？</a>
  <ul>
  <li><a href="#文字列character" id="toc-文字列character" class="nav-link" data-scroll-target="#文字列character"><span class="header-section-number">3.3.1</span> 文字列（character）</a>
  <ul class="collapse">
  <li><a href="#エスケープ文字エスケープシーケンス" id="toc-エスケープ文字エスケープシーケンス" class="nav-link" data-scroll-target="#エスケープ文字エスケープシーケンス"><span class="header-section-number">3.3.1.1</span> エスケープ文字（エスケープシーケンス）</a></li>
  <li><a href="#文字列を結合する" id="toc-文字列を結合する" class="nav-link" data-scroll-target="#文字列を結合する"><span class="header-section-number">3.3.1.2</span> 文字列を結合する</a></li>
  </ul></li>
  <li><a href="#数値numeric" id="toc-数値numeric" class="nav-link" data-scroll-target="#数値numeric"><span class="header-section-number">3.3.2</span> 数値（numeric）</a>
  <ul class="collapse">
  <li><a href="#数値型のdouble浮動小数点とinteger整数" id="toc-数値型のdouble浮動小数点とinteger整数" class="nav-link" data-scroll-target="#数値型のdouble浮動小数点とinteger整数"><span class="header-section-number">3.3.2.1</span> 数値型のdouble（浮動小数点）とinteger（整数）</a></li>
  <li><a href="#クラスclass" id="toc-クラスclass" class="nav-link" data-scroll-target="#クラスclass"><span class="header-section-number">3.3.2.2</span> クラス（class）</a></li>
  <li><a href="#演算子operator" id="toc-演算子operator" class="nav-link" data-scroll-target="#演算子operator"><span class="header-section-number">3.3.2.3</span> 演算子（operator）</a></li>
  </ul></li>
  <li><a href="#論理型logical" id="toc-論理型logical" class="nav-link" data-scroll-target="#論理型logical"><span class="header-section-number">3.3.3</span> 論理型（logical）</a>
  <ul class="collapse">
  <li><a href="#比較演算子" id="toc-比較演算子" class="nav-link" data-scroll-target="#比較演算子"><span class="header-section-number">3.3.3.1</span> 比較演算子</a></li>
  <li><a href="#演算子の優先順位" id="toc-演算子の優先順位" class="nav-link" data-scroll-target="#演算子の優先順位"><span class="header-section-number">3.3.3.2</span> 演算子の優先順位</a></li>
  </ul></li>
  <li><a href="#その他の型クラス" id="toc-その他の型クラス" class="nav-link" data-scroll-target="#その他の型クラス"><span class="header-section-number">3.3.4</span> その他の型・クラス</a>
  <ul class="collapse">
  <li><a href="#欠損値など" id="toc-欠損値など" class="nav-link" data-scroll-target="#欠損値など"><span class="header-section-number">3.3.4.1</span> 欠損値など</a></li>
  <li><a href="#複素数complex" id="toc-複素数complex" class="nav-link" data-scroll-target="#複素数complex"><span class="header-section-number">3.3.4.2</span> 複素数（complex）</a></li>
  <li><a href="#日時のクラスdateposixctposixltdifftime" id="toc-日時のクラスdateposixctposixltdifftime" class="nav-link" data-scroll-target="#日時のクラスdateposixctposixltdifftime"><span class="header-section-number">3.3.4.3</span> 日時のクラス（Date、POSIXct、POSIXlt、difftime）</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#変数と定数" id="toc-変数と定数" class="nav-link" data-scroll-target="#変数と定数"><span class="header-section-number">3.4</span> 変数と定数</a>
  <ul>
  <li><a href="#変数" id="toc-変数" class="nav-link" data-scroll-target="#変数"><span class="header-section-number">3.4.1</span> 変数</a></li>
  <li><a href="#変数と定数-1" id="toc-変数と定数-1" class="nav-link" data-scroll-target="#変数と定数-1"><span class="header-section-number">3.4.2</span> 変数と定数</a></li>
  <li><a href="#値渡しと参照渡し" id="toc-値渡しと参照渡し" class="nav-link" data-scroll-target="#値渡しと参照渡し"><span class="header-section-number">3.4.3</span> 値渡しと参照渡し</a></li>
  </ul></li>
  <li><a href="#便利なオブジェクトクラス" id="toc-便利なオブジェクトクラス" class="nav-link" data-scroll-target="#便利なオブジェクトクラス"><span class="header-section-number">3.5</span> 便利なオブジェクト・クラス</a>
  <ul>
  <li><a href="#ベクターvector" id="toc-ベクターvector" class="nav-link" data-scroll-target="#ベクターvector"><span class="header-section-number">3.5.1</span> ベクター（vector）</a>
  <ul class="collapse">
  <li><a href="#ベクターに要素を追加する" id="toc-ベクターに要素を追加する" class="nav-link" data-scroll-target="#ベクターに要素を追加する"><span class="header-section-number">3.5.1.1</span> ベクターに要素を追加する</a></li>
  <li><a href="#ベクターの要素を取り出す" id="toc-ベクターの要素を取り出す" class="nav-link" data-scroll-target="#ベクターの要素を取り出す"><span class="header-section-number">3.5.1.2</span> ベクターの要素を取り出す</a></li>
  <li><a href="#ベクターの要素の置き換え" id="toc-ベクターの要素の置き換え" class="nav-link" data-scroll-target="#ベクターの要素の置き換え"><span class="header-section-number">3.5.1.3</span> ベクターの要素の置き換え</a></li>
  <li><a href="#ベクターの要素を取り除く" id="toc-ベクターの要素を取り除く" class="nav-link" data-scroll-target="#ベクターの要素を取り除く"><span class="header-section-number">3.5.1.4</span> ベクターの要素を取り除く</a></li>
  <li><a href="#ベクターの演算" id="toc-ベクターの演算" class="nav-link" data-scroll-target="#ベクターの演算"><span class="header-section-number">3.5.1.5</span> ベクターの演算</a></li>
  </ul></li>
  <li><a href="#因子factor" id="toc-因子factor" class="nav-link" data-scroll-target="#因子factor"><span class="header-section-number">3.5.2</span> 因子（factor）</a>
  <ul class="collapse">
  <li><a href="#因子のレベルlevels" id="toc-因子のレベルlevels" class="nav-link" data-scroll-target="#因子のレベルlevels"><span class="header-section-number">3.5.2.1</span> 因子のレベル（levels）</a></li>
  </ul></li>
  <li><a href="#リストlist" id="toc-リストlist" class="nav-link" data-scroll-target="#リストlist"><span class="header-section-number">3.5.3</span> リスト（list）</a>
  <ul class="collapse">
  <li><a href="#リストの要素を取り出す" id="toc-リストの要素を取り出す" class="nav-link" data-scroll-target="#リストの要素を取り出す"><span class="header-section-number">3.5.3.1</span> リストの要素を取り出す</a></li>
  </ul></li>
  <li><a href="#データフレームdata.frame" id="toc-データフレームdata.frame" class="nav-link" data-scroll-target="#データフレームdata.frame"><span class="header-section-number">3.5.4</span> データフレーム（data.frame）</a>
  <ul class="collapse">
  <li><a href="#データフレームの次元dimensionと行数列数" id="toc-データフレームの次元dimensionと行数列数" class="nav-link" data-scroll-target="#データフレームの次元dimensionと行数列数"><span class="header-section-number">3.5.4.1</span> データフレームの次元（dimension）と行数・列数</a></li>
  <li><a href="#データフレームのインデックス" id="toc-データフレームのインデックス" class="nav-link" data-scroll-target="#データフレームのインデックス"><span class="header-section-number">3.5.4.2</span> データフレームのインデックス</a></li>
  <li><a href="#データフレームの要素の置き換え" id="toc-データフレームの要素の置き換え" class="nav-link" data-scroll-target="#データフレームの要素の置き換え"><span class="header-section-number">3.5.4.3</span> データフレームの要素の置き換え</a></li>
  <li><a href="#データフレームの行列の削除" id="toc-データフレームの行列の削除" class="nav-link" data-scroll-target="#データフレームの行列の削除"><span class="header-section-number">3.5.4.4</span> データフレームの行・列の削除</a></li>
  </ul></li>
  <li><a href="#行列matrix" id="toc-行列matrix" class="nav-link" data-scroll-target="#行列matrix"><span class="header-section-number">3.5.5</span> 行列（matrix）</a>
  <ul class="collapse">
  <li><a href="#行列の次元とインデックス" id="toc-行列の次元とインデックス" class="nav-link" data-scroll-target="#行列の次元とインデックス"><span class="header-section-number">3.5.5.1</span> 行列の次元とインデックス</a></li>
  <li><a href="#行列の演算" id="toc-行列の演算" class="nav-link" data-scroll-target="#行列の演算"><span class="header-section-number">3.5.5.2</span> 行列の演算</a></li>
  <li><a href="#次元以上のオブジェクトarray" id="toc-次元以上のオブジェクトarray" class="nav-link" data-scroll-target="#次元以上のオブジェクトarray"><span class="header-section-number">3.5.5.3</span> 3次元以上のオブジェクト：array</a></li>
  </ul></li>
  <li><a href="#その他のオブジェクト" id="toc-その他のオブジェクト" class="nav-link" data-scroll-target="#その他のオブジェクト"><span class="header-section-number">3.5.6</span> その他のオブジェクト</a></li>
  </ul></li>
  <li><a href="#関数" id="toc-関数" class="nav-link" data-scroll-target="#関数"><span class="header-section-number">3.6</span> 関数</a>
  <ul>
  <li><a href="#関数を自作する" id="toc-関数を自作する" class="nav-link" data-scroll-target="#関数を自作する"><span class="header-section-number">3.6.1</span> 関数を自作する</a></li>
  </ul></li>
  <li><a href="#型クラスの確認と変換" id="toc-型クラスの確認と変換" class="nav-link" data-scroll-target="#型クラスの確認と変換"><span class="header-section-number">3.7</span> 型・クラスの確認と変換</a>
  <ul>
  <li><a href="#型クラスの確認is.関数群" id="toc-型クラスの確認is.関数群" class="nav-link" data-scroll-target="#型クラスの確認is.関数群"><span class="header-section-number">3.7.1</span> 型・クラスの確認：is.関数群</a></li>
  <li><a href="#型クラスの変換as.関数群" id="toc-型クラスの変換as.関数群" class="nav-link" data-scroll-target="#型クラスの変換as.関数群"><span class="header-section-number">3.7.2</span> 型・クラスの変換：as.関数群</a></li>
  </ul></li>
  <li><a href="#naの取り扱い" id="toc-naの取り扱い" class="nav-link" data-scroll-target="#naの取り扱い"><span class="header-section-number">3.8</span> NAの取り扱い</a></li>
  <li><a href="#予約語" id="toc-予約語" class="nav-link" data-scroll-target="#予約語"><span class="header-section-number">3.9</span> 予約語</a></li>
  <li><a href="#ヘルプ" id="toc-ヘルプ" class="nav-link" data-scroll-target="#ヘルプ"><span class="header-section-number">3.10</span> ヘルプ</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapter1.html">Rプログラミングの基礎</a></li><li class="breadcrumb-item"><a href="./chapter3.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">オブジェクトと変数・定数</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">オブジェクトと変数・定数</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="プログラミング言語としてのr" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="プログラミング言語としてのr"><span class="header-section-number">3.1</span> プログラミング言語としてのR</h2>
<p>R言語は統計の計算を行うために開発されたプログラミング言語です。プログラミング言語としての仕様は<a href="https://ja.wikipedia.org/wiki/S%E8%A8%80%E8%AA%9E">S言語</a>という、<a href="https://www.bell-labs.com/">ベル研究所</a>によって開発された言語を参考としています。R言語は、「動的型付け、型推論、インタプリタ型、オブジェクト指向の関数型言語」というタイプのプログラミング言語です。プログラミング未体験の方にはすべての単語が意味不明だと思いますが、単語の意味については順々に紹介していきます。</p>
<p>まずは、<strong>「インタプリタ」</strong>について説明します。インタプリタとは、プログラムをコンパイルすることなく実行することができる環境のことを指します。</p>
<p>この、<strong>「コンパイル」</strong>というのは、プログラムを機械語に置き換える変換のことを指します。</p>
<p><strong>「機械語」</strong>というのも聞き覚えがない言葉だと思います。機械語とは、コンピュータが読み取れる、1と0だけからなる数字の列のことです。コンピュータは我々の言語や画像などをそのまま処理することはできず、1ビット単位（1と0）の情報だけを取り扱うことができます。プログラミング言語のうち、例えばCやJavaでは、プログラムはまず機械語に変換、コンパイルされます。コンパイルされたプログラムだけがコンピュータ上で実行できます（下図1）。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./image/compile.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1" title="図1：コンパイルと機械語への変換"><img src="./image/compile.png" class="img-fluid figure-img" alt="図1：コンパイルと機械語への変換"></a></p>
<figcaption>図1：コンパイルと機械語への変換</figcaption>
</figure>
</div>
<p>一方、インタプリタ型の言語では、プログラミング言語をコンパイルすることなく実行することができます。インタプリタ型の言語には<a href="https://www.python.org/">Python</a>や<a href="https://www.ruby-lang.org/ja/">Ruby</a>、<a href="https://www.php.net/">PHP</a>などがあります。コンパイルには通常時間がかかりますが、インタプリタ型言語ではコンパイルに時間をかけることなく、すぐにプログラムを実行することができるというメリットがあります。一方で、コンパイルを除いたプログラムを実行・完了するまでの時間はコンパイルを行うプログラミング言語よりも長くなるというデメリットもあります。</p>
<p>Rはインタプリタ型の言語ですので、記述したプログラム（スクリプトとも呼びます）はすぐに実行されます。一方で、Rでの計算速度はインタプリタ型言語の中でもかなり遅い部類に入ります。ただし、Rは主にad hocな（その場一回限りの）統計解析に用いられる言語です。1回限りであれば、それほど計算が早くなくても問題とはなりませんし、入力したプログラムがすぐに実行されるという性質も統計解析との相性がよいものです。コンピュータの性能も昔より遥かに高くなっており、R言語での計算が遅いと感じることは減ってきています。</p>
</section>
<section id="オブジェクトとは" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="オブジェクトとは"><span class="header-section-number">3.2</span> オブジェクトとは？</h2>
<p>Rは<strong>オブジェクト指向（Object oriented）</strong>の言語である、とされています。この<strong>「オブジェクト指向」</strong>という言葉はプログラミング言語ではよく用いられるものですが、厳密な定義は複雑です。</p>
<p>この<strong>オブジェクト</strong>というのは、プログラミングで取り扱う「もの」すべてを指す言葉です。プログラミングでは、<strong>数値</strong>や<strong>文字</strong>などを取り扱い、数値の演算を行ったり、文字に対して検索や置換、文字の追加などを行います。このとき、取り扱う数値や文字はオブジェクト、つまりプログラミングで用いる「もの」であるということになります。Rでは数値や文字の他に、<strong>因子（factor）</strong>や<strong>論理値（booleanまたはlogical）</strong>、<strong>関数（function）</strong>などを取り扱います。これらのすべてがプログラミングで取り扱う「もの」、つまりオブジェクトです。</p>
<p>上で述べたように、プログラミングで用いるオブジェクトには数値、文字、因子、関数など、様々な種類のものがあります。数値も文字もプログラミングで扱う「もの」であることは共通していますが、数値と文字に対して同じ演算をしたい、ということは通常ありません。数値なら掛け算や割り算を行うことがあっても、文字に対して掛け算や割り算はしません。プログラミング言語も、数値なら数値の演算、文字なら文字の演算を行う必要があります。このように、数値なら数値の、文字なら文字の処理を行うために、オブジェクトには<strong>「型（type）」</strong>というものがあります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>型と演算の関係</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">*</span> <span class="dv">1</span> <span class="co"># 数値同士を掛け算することがあっても、</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">*</span> <span class="st">"dog"</span> <span class="co"># 数値と文字列を掛け算できてしまうと困る（エラーが出る）</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Error in 1 * "dog": non-numeric argument to binary operator</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="型typeとは" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="型typeとは"><span class="header-section-number">3.3</span> 型（type）とは？</h2>
<p><strong>型（type）</strong>とは、そのオブジェクトの種類を定めるためのラベルのようなものです。例えば、Rで数値を入力すると、Rは自動的にその数値がnumericであると認識します。同様に、“（ダブルクオーテーション）で文字を囲うと、Rは自動的にその文字がcharacter（文字列型）であると認識します。Rはこの認識した型に従い、そのオブジェクトに対する演算を行います。</p>
<p>オブジェクトの型は<code>mode</code>関数で確認することができます。関数については後ほど詳しく説明します。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>mode関数で型を確認する</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="dv">1</span>) <span class="co"># 1は数値</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="st">"Hello world"</span>) <span class="co"># "Hello world"は文字列</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "character"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="st">"1"</span>) <span class="co"># "1"は文字列</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "character"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>上記のように、「<code>1</code>」の数字を<code>mode()</code>のカッコの中に入れると、numericが返ってきます。これは、<code>1</code>というオブジェクトの型がnumeric（数値）であることを示しています。同様に、ダブルクオーテーションで囲まれた<code>"Hello world"</code>を<code>mode()</code>のカッコに入れると、characterが返ってきます。これは、<code>"Hello world"</code>の型がcharacter（文字列）であることを意味しています。では、ダブルクオーテーションで囲まれた<code>"1"</code>がどうなるかというと、これはcharacter、つまり文字列になります。</p>
<p>Rでは、このように「ダブルクオーテーションで囲まれている」というオブジェクトの状態を調べ、囲まれていればそのオブジェクトは文字列型であると判断します。同様に、オブジェクトが「数値でかつダブルクオーテーションに囲まれていない」場合には、そのオブジェクトが数値型であると判断します。このように、プログラム上でオブジェクトの型を特に指定していなくても、Rは自動的にそのオブジェクトの型を決定してくれます。このようなプログラムの性質を<strong>「型推論」</strong>と呼びます。</p>
<p>では、Rの代表的な型について、これから簡単に説明していきます。</p>
<section id="文字列character" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="文字列character"><span class="header-section-number">3.3.1</span> 文字列（character）</h3>
<p>一般的なプログラミング言語で最も取り扱うことが多いオブジェクトは<strong>文字列型（character）</strong>です。文字列、つまり文章などを検索したり、一部を取り出したり、条件に合っているか確認したりすることはプログラミング利用の目的の一つとなります。</p>
<p>Rは統計学のプログラミング言語ですので、どちらかというと文字列よりは数値を取り扱うことが多いのですが、文字列を取り扱える仕組みも一通り備えています。</p>
<p>Rで文字列型のオブジェクトを作成するときには、<code>"</code>（ダブルクオーテーション）もしくは<code>'</code>（シングルクォーテーション）で文字を囲みます。ダブルクオーテーション・シングルクオーテーションのどちらを用いても文字列のオブジェクトを作成することはできます。クオーテーションが無い場合にはエラーとなります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>文字列オブジェクトの例</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Hello world"</span> <span class="co"># ダブルクオーテーションで囲った場合</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="st">'Hello R'</span> <span class="co"># シングルクオーテーションで囲った場合</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Hello world <span class="co"># エラー</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Error: &lt;text&gt;:5:7: unexpected symbol</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4: </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5: Hello world</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="do">##          ^</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>ダブルクオーテーションとシングルクオーテーションには違いはありません。どちらを用いても問題ないのですが、Rではダブルクオーテーションを用いるのが一般的です。</p>
<p>Rでは、文字列を入力すればその文字列がそのまま表示されますが、文字列の表示を明示したい場合には<code>print</code>関数を用います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>print関数</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Hello world"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Hello world"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<section id="エスケープ文字エスケープシーケンス" class="level4" data-number="3.3.1.1">
<h4 data-number="3.3.1.1" class="anchored" data-anchor-id="エスケープ文字エスケープシーケンス"><span class="header-section-number">3.3.1.1</span> エスケープ文字（エスケープシーケンス）</h4>
<p>プログラミング言語によっては、ダブルクオーテーションとシングルクオーテーションで<strong>エスケープ文字（エスケープシーケンス）</strong>の取扱いに違いがある場合があります。エスケープシーケンスとは、バックスラッシュ（\、日本語キーボードでは¥）とアルファベットを組み合わせて、特定の意味を持たせる表現のことを指します。例えば、<code>\n</code>は改行を、<code>\t</code>はタブを示す記号です。RではC言語由来のエスケープシーケンスを利用できます。以下の表1にエスケープシーケンスの例を挙げます。</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>表1：エスケープシーケンスの例</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">エスケープシーケンス</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">エスケープシーケンスの意味</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">\a</td>
<td style="text-align: left;">アラート</td>
</tr>
<tr class="even">
<td style="text-align: left;">\b</td>
<td style="text-align: left;">バックスペース</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\f</td>
<td style="text-align: left;">ページ分割</td>
</tr>
<tr class="even">
<td style="text-align: left;">\n</td>
<td style="text-align: left;">改行</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\r</td>
<td style="text-align: left;">キャリッジリターン</td>
</tr>
<tr class="even">
<td style="text-align: left;">\t</td>
<td style="text-align: left;">水平タブ</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\v</td>
<td style="text-align: left;">垂直タブ</td>
</tr>
<tr class="even">
<td style="text-align: left;">\\</td>
<td style="text-align: left;">バックスラッシュ</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\'</td>
<td style="text-align: left;">シングルクオーテーション</td>
</tr>
<tr class="even">
<td style="text-align: left;">\"</td>
<td style="text-align: left;">ダブルクオーテーション</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Rのデータをテキストファイルなどに書き出すときには、エスケープシーケンス、特に<code>\n</code>（改行）や<code>\t</code>（タブ）を用いることがあります。データ書き出しの際のエスケープシーケンスに関しては、<a href="./chapter13.html">13章</a>で詳しく説明します。</p>
<p>エスケープシーケンスを変換した文字列を表示する場合には、<code>writeLines</code>関数を用います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>writeLines関数で文字列にエスケープシーケンスを反映</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="st">"Hello world"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Hello world</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="st">"Hello</span><span class="sc">\n</span><span class="st">world"</span>) <span class="co"># \nは改行に変換</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Hello</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="do">## world</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Hello</span><span class="sc">\n</span><span class="st">world"</span>) <span class="co"># print関数はエスケープシーケンスを変換しない</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Hello\nworld"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="文字列を結合する" class="level4" data-number="3.3.1.2">
<h4 data-number="3.3.1.2" class="anchored" data-anchor-id="文字列を結合する"><span class="header-section-number">3.3.1.2</span> 文字列を結合する</h4>
<p>Rで文字列を用いるときに、文字列Aと文字列Bをくっつけたい、ということがあります。このようなときに用いるのが、<code>paste</code>関数です。<code>paste</code>関数はカッコの中に2つ以上の文字列をコンマでつないで入れると、文字列をスペースを挟んでつなぎ合わせてくれます。文字列の間にスペースが必要ない場合には、<code>paste0</code>関数を用います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>文字列をつなぐpaste関数</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"Hello"</span>, <span class="st">"world"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Hello world"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Hello"</span>, <span class="st">"R"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "HelloR"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>文字列の取扱いに関しては、<a href="./chapter9.html">9章</a>で詳しく説明します。</p>
</section>
</section>
<section id="数値numeric" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="数値numeric"><span class="header-section-number">3.3.2</span> 数値（numeric）</h3>
<p>Rは統計の言語ですので、数値データを取り扱う機会が特に多くなります。グラフを記述したり、データを要約する場合にも主に取り扱うのは数値です。Rでは、数値は<strong>numeric</strong>という型を持ちます。</p>
<section id="数値型のdouble浮動小数点とinteger整数" class="level4" data-number="3.3.2.1">
<h4 data-number="3.3.2.1" class="anchored" data-anchor-id="数値型のdouble浮動小数点とinteger整数"><span class="header-section-number">3.3.2.1</span> 数値型のdouble（浮動小数点）とinteger（整数）</h4>
<p>数値には更に詳細な型があります。詳細な型は<code>typeof</code>関数で調べることができます。Rでの数値は通常doubleという型を持ちます。</p>
<p>数値にはdouble以外に、integer（整数）という型もあります。Rで整数型の数値を利用する時には、数字の後ろにLをつけます。また、数値であってもダブルクオーテーションで囲うと文字列 （character）になります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>double型とinteger型</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="dv">1</span>) <span class="co"># modeでの型はnumeric</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>) <span class="co"># これはdouble</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "double"</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>L) <span class="co"># これはinteger</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "integer"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="st">"1"</span>) <span class="co"># これはcharacter</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "character"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Rではintegerを取り扱う機会は非常に少なく、通常数値はdoubleとして取り扱います。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rでの数値型
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>多くのプログラミング言語では、小数点を含む数値は、その精度（桁数）により、single（浮動小数点型）、double（倍精度浮動小数点型）などの型を持ちます。このsingleはdoubleよりオブジェクトのファイルサイズが小さい代わりに、あまり大きい桁数の数値は取り扱えないという特徴があります。Rにはsingleという型はありません。</p>
</div>
</div>
</div>
</section>
<section id="クラスclass" class="level4" data-number="3.3.2.2">
<h4 data-number="3.3.2.2" class="anchored" data-anchor-id="クラスclass"><span class="header-section-number">3.3.2.2</span> クラス（class）</h4>
<p>Rではオブジェクトは型以外に、<strong>クラス（class）</strong>という性質を別に持っています。Rでの数値型は、numeric（数値）というクラスを持ちます。クラスの確認には<code>class</code>関数を用います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>クラス、モードとtypeof関数</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="dv">1</span>) <span class="co"># 型はnumeric</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>) <span class="co"># typeofだとdouble</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "double"</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span>) <span class="co"># クラスはnumeric</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
アトリビュート（attribute)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Rのオブジェクトは型だけでなく、アトリビュート（attribute）という性質を別に持っています。クラスはこのアトリビュートの一つです。オブジェクト指向プログラミングではクラスは非常に重要な意味を持ちますので、<a href="./chapter18.html">18章</a>で詳しく説明します。</p>
</div>
</div>
</div>
</section>
<section id="演算子operator" class="level4" data-number="3.3.2.3">
<h4 data-number="3.3.2.3" class="anchored" data-anchor-id="演算子operator"><span class="header-section-number">3.3.2.3</span> 演算子（operator）</h4>
<p>数値を扱う際には、四則演算等の計算を行うことがあります。この四則演算を行うための記号のことを、<strong>演算子</strong>と呼びます。Rでは以下の四則演算子を利用できます。</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>表2：Rで使える演算子</caption>
<thead>
<tr class="header">
<th style="text-align: left;">演算子</th>
<th style="text-align: left;">演算の種類</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">+</td>
<td style="text-align: left;">足し算</td>
</tr>
<tr class="even">
<td style="text-align: left;">-</td>
<td style="text-align: left;">引き算</td>
</tr>
<tr class="odd">
<td style="text-align: left;">*</td>
<td style="text-align: left;">掛け算</td>
</tr>
<tr class="even">
<td style="text-align: left;">/</td>
<td style="text-align: left;">割り算</td>
</tr>
<tr class="odd">
<td style="text-align: left;">%%</td>
<td style="text-align: left;">剰余（割り算の余り）</td>
</tr>
<tr class="even">
<td style="text-align: left;">%/%</td>
<td style="text-align: left;">整数の割り算</td>
</tr>
<tr class="odd">
<td style="text-align: left;">^</td>
<td style="text-align: left;">累乗</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>演算子それぞれの計算結果は以下のようになります。演算子の意味はExcelなどで用いられているものとほぼ同じです。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>四則演算の例</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">2</span> <span class="co"># 足し算</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">-</span> <span class="dv">2</span> <span class="co"># 引き算</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">*</span> <span class="dv">2</span> <span class="co"># 掛け算</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">/</span> <span class="dv">2</span> <span class="co"># 割り算</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.5</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">%%</span> <span class="dv">2</span> <span class="co"># 剰余（余り）</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">%/%</span> <span class="dv">2</span> <span class="co"># 整数の割り算</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2</span> <span class="co"># 累乗</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>数値については<a href="./chapter8.html">8章</a>で詳しく説明します。</p>
</section>
</section>
<section id="論理型logical" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="論理型logical"><span class="header-section-number">3.3.3</span> 論理型（logical）</h3>
<p><strong>論理型（logical）</strong>は、<strong>TRUE（真）</strong>と<strong>FALSE（偽）</strong>からなる2値の型です。TRUEとFALSEはその名の通り、その関係が正しいか、間違っているかを意味するものです。論理型はそのまま使用することもありますが、プログラミングでは<strong>比較演算子</strong>と共に用いることが多い型です。</p>
<section id="比較演算子" class="level4" data-number="3.3.3.1">
<h4 data-number="3.3.3.1" class="anchored" data-anchor-id="比較演算子"><span class="header-section-number">3.3.3.1</span> 比較演算子</h4>
<p><strong>比較演算子</strong>とは、演算子の右と左を比較して、その関係が正しい（<code>TRUE</code>）のか、間違っているのか（<code>FALSE</code>）を返す演算子です。比較演算子の例を以下に示します。</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>表3：Rで使える比較演算子</caption>
<thead>
<tr class="header">
<th style="text-align: left;">比較演算子</th>
<th style="text-align: left;">比較演算子の意味</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">==</td>
<td style="text-align: left;">等しい</td>
</tr>
<tr class="even">
<td style="text-align: left;">!=</td>
<td style="text-align: left;">等しくない</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&lt;</td>
<td style="text-align: left;">小なり</td>
</tr>
<tr class="even">
<td style="text-align: left;">&lt;=</td>
<td style="text-align: left;">小なりイコール</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&gt;</td>
<td style="text-align: left;">大なり</td>
</tr>
<tr class="even">
<td style="text-align: left;">&gt;=</td>
<td style="text-align: left;">大なりイコール</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&amp;</td>
<td style="text-align: left;">かつ</td>
</tr>
<tr class="even">
<td style="text-align: left;">&amp;&amp;</td>
<td style="text-align: left;">かつ</td>
</tr>
<tr class="odd">
<td style="text-align: left;">|</td>
<td style="text-align: left;">または</td>
</tr>
<tr class="even">
<td style="text-align: left;">||</td>
<td style="text-align: left;">または</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><code>&amp;</code>と<code>|</code>は比較演算子同士を結びつけるための演算子（論理演算子）です。<code>&amp;</code>と<code>&amp;&amp;</code>、<code>|</code>と<code>||</code>の違いについては、<a href="./chapter4.html">4章</a>で説明します。</p>
<p>比較演算子を用いた演算の例を以下に示します。比較演算子や論理型は主に<strong>条件分岐</strong>で用います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>比較演算子</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="co"># 等しいのでTRUE</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">2</span> <span class="co"># 等しくないのでFALSE</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">!=</span> <span class="dv">1</span> <span class="co"># 等しいのでFALSE</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">!=</span> <span class="dv">2</span> <span class="co"># 等しくないのでTRUE</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">2</span> <span class="co"># 2は1より小さいのでTRUE</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">1</span> <span class="co"># 1は1より小さくないのでFALSE</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;=</span> <span class="dv">2</span> <span class="co"># 2は1より小さいのでTRUE</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="co"># 1は1に等しいのでTURE</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&gt;</span> <span class="dv">2</span> <span class="co"># 3は2より大きいのでTRUE</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">2</span> <span class="co"># 2は2より大きくないのでFALSE</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&gt;=</span> <span class="dv">2</span> <span class="co"># 3は2より大きいのでTRUE</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;=</span> <span class="dv">2</span> <span class="co"># 2は2と等しいのでTRUE</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span> <span class="co"># TRUEかつTRUEなのでTRUE</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">3</span> <span class="co"># TRUEかつFALSEなのでFALSE</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span> <span class="co"># TRUEまたはTRUEなのでTRUE</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">3</span> <span class="co"># TRUEまたはFALSEなのでTRUE</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="演算子の優先順位" class="level4" data-number="3.3.3.2">
<h4 data-number="3.3.3.2" class="anchored" data-anchor-id="演算子の優先順位"><span class="header-section-number">3.3.3.2</span> 演算子の優先順位</h4>
<p>数値の計算で掛け算・割り算を足し算・引き算より前に計算するように、演算子の優先順位、計算する順番は決まっています。概ね通常の計算と同じですが、以下のような順序で演算子は計算されます。</p>
<ol type="1">
<li>カッコでくくられている計算</li>
<li>累乗（<code>^</code>）</li>
<li>剰余・整数の割り算（<code>%%</code>・<code>%/%</code>）</li>
<li>掛け算・割り算（<code>*</code>・<code>/</code>）</li>
<li>足し算・引き算（<code>+</code>・<code>-</code>）</li>
<li>比較演算子（<code>==</code>、<code>!=</code>、<code>&lt;</code>、<code>&lt;=</code>、<code>&gt;</code>、<code>&gt;=</code>）</li>
<li>論理演算子（<code>&amp;</code>、<code>|</code>）</li>
</ol>
<p>計算式は長くなることが多く、演算子の計算順を間違う場合も多いため、優先する計算は積極的にカッコで囲むとよいでしょう。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>演算子の計算順序</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span> <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">3</span> <span class="co"># カッコ内は最優先</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">^</span> <span class="dv">3</span> <span class="sc">%%</span> <span class="dv">5</span> <span class="co"># 累乗は剰余より先に計算(8/5の余り)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">/</span> <span class="dv">3</span> <span class="sc">%%</span> <span class="dv">2</span> <span class="co"># 剰余は割り算より先に計算（3/1を計算）</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">/</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">1</span> <span class="co"># 割り算は足し算より先に計算</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">&gt;</span> <span class="dv">5</span> <span class="co"># 比較演算子は足し算より後に計算</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="dv">6</span> <span class="sc">&gt;</span> <span class="dv">2</span> <span class="co"># 論理演算子は最後に計算</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="その他の型クラス" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="その他の型クラス"><span class="header-section-number">3.3.4</span> その他の型・クラス</h3>
<p>以上の3つ（文字列、数値、論理型）がRでの基本的な型になります。しかし、Rにはこの3つ以外の型を持つオブジェクトも存在します。</p>
<section id="欠損値など" class="level4" data-number="3.3.4.1">
<h4 data-number="3.3.4.1" class="anchored" data-anchor-id="欠損値など"><span class="header-section-number">3.3.4.1</span> 欠損値など</h4>
<p>データ分析では欠損値や、計算結果が表示できないもの、計算結果が無限大になるものなど、データとしてうまく取り扱えない値が生じることがよくあります。このような場合に対応するため、Rは欠損値、計算できない値、無限大にそれぞれ<code>NA</code>、<code>NaN</code>、<code>Inf</code>という型が設定されています。Rでは中身が何もないオブジェクト、<code>NULL</code>というものを作成することもできます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>欠損値、非数、無限大</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="co"># 欠損値（Not Available）</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] NA</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span> <span class="co"># 非数（NaN、Not a Number）</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] NaN</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span> <span class="co"># 無限大（Inf）</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] Inf</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="dv">10000</span><span class="sc">^</span><span class="dv">1000000</span> <span class="co"># 大きすぎて取り扱えない数値もInfになる</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] Inf</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="cn">NULL</span> <span class="co"># 中身がないオブジェクト（NULL）</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="do">## NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="複素数complex" class="level4" data-number="3.3.4.2">
<h4 data-number="3.3.4.2" class="anchored" data-anchor-id="複素数complex"><span class="header-section-number">3.3.4.2</span> 複素数（complex）</h4>
<p>Rでは複素数（整数+虚数）を取り扱うこともできます。複素数を表すときには、数値の後に<code>i</code>を入力します。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>複素数の作成と演算</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span>i <span class="co"># 複素数</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1+1i</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span>i) <span class="co"># 複素数の型はcomplex</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "complex"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span>i) <span class="sc">+</span> (<span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span>i) <span class="co"># 複素数同士の足し算</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4+4i</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="日時のクラスdateposixctposixltdifftime" class="level4" data-number="3.3.4.3">
<h4 data-number="3.3.4.3" class="anchored" data-anchor-id="日時のクラスdateposixctposixltdifftime"><span class="header-section-number">3.3.4.3</span> 日時のクラス（Date、POSIXct、POSIXlt、difftime）</h4>
<p>日付は数値や文字列とは異なる性質を持ちます。統計では日付や時間を演算に用いることもあります。Rでは日付はDateというクラスを持ちます。また、日時のデータはPOSIXctやPOSIXltというクラスに属します。</p>
<p>DateやPOSIXct、POSIXltは引き算などの演算に用いることができます。日時の差はdulationsというクラスを持ちます。</p>
<p>Date、POSIXct、POSIXlt、dulationはいずれもクラスで、データの型としてはdouble、つまり数値型のデータとして取り扱われます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>日時のクラスと型</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.Date</span>() <span class="co"># 現在の日付を表示する関数</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "2025-03-29"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">Sys.Date</span>()) <span class="co"># 日付のクラスはDate</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Date"</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">Sys.Date</span>()) <span class="co"># 日付の型はdouble</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "double"</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.time</span>() <span class="co"># 現在の日時を表示する関数</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "2025-03-29 08:10:57 +09"</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">Sys.time</span>()) <span class="co"># 日時のクラスはPOSIXctとPOSIXlt</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "POSIXct" "POSIXt"</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">Sys.time</span>()) <span class="co"># 日時の型はdouble</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "double"</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>) <span class="co"># 2023/1/1から今日までの日数</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="do">## Time difference of 818 days</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>)) <span class="co"># 日時の差のクラスはdifftime</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "difftime"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
</section>
<section id="変数と定数" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="変数と定数"><span class="header-section-number">3.4</span> 変数と定数</h2>
<section id="変数" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="変数"><span class="header-section-number">3.4.1</span> 変数</h3>
<p>ココまでは、数値や文字列などの、単純なオブジェクトについて説明してきました。単純なオブジェクトはプログラミングの要素として重要です。しかし、オブジェクトを毎回作成し直すのは面倒です。オブジェクトを作ったら、それを一時的に保管しておいて、後から演算に使える方が便利です。</p>
<p>電卓では、このような「一時的に結果を記録する」方法として、メモリー機能があります。Excelなどでは、計算結果をセルに記録しておくこともあるでしょう。プログラミング言語にも、計算結果を一時的に保管しておくものが準備されています。この「計算結果を一時的に保管しておくもの」のことを、プログラミング言語では<strong>変数</strong>と呼びます。</p>
<p>変数には名前がついています。名前付きの箱の中にオブジェクトを入れているようなものが変数です。下の図では、変数「<code>dog</code>」にオブジェクト「<code>"犬"</code>」を入れています。「<code>"犬"</code>」を取り出して使いたいときには、変数である「<code>dog</code>」を持ってくればよい、ということになります。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./image/variable_image.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="図2：変数のイメージ"><img src="./image/variable_image.png" class="img-fluid figure-img" alt="図2：変数のイメージ"></a></p>
<figcaption>図2：変数のイメージ</figcaption>
</figure>
</div>
<p>Rで変数を作成する場合には、変数名に「<code>&lt;-</code>」の記号でオブジェクトを<strong>代入</strong>します。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>変数への代入</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dog <span class="ot">&lt;-</span> <span class="st">"inu"</span> <span class="co"># dogという変数に"inu"という文字列を代入する</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>number <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># numberという変数に、1という数値を代入する</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>dog <span class="co"># 変数dogには"inu"が入っている</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "inu"</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>number <span class="co"># 変数numberには1が入っている</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>変数には型・クラスがあり、代入したオブジェクトと同じ型・クラスを持つことになります。また、変数はそのまま演算に用いることができます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>変数の型</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(dog) <span class="co"># dogの中身は文字列</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "character"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(number) <span class="co"># numberの中身は数値</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(dog, <span class="st">"walk"</span>) <span class="co"># dogの中身と"walk"をつなぐ</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "inu walk"</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>number <span class="sc">+</span> <span class="dv">5</span> <span class="co"># numberの中身に5を足す</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>dog <span class="sc">+</span> <span class="dv">1</span> <span class="co"># dogの中身は文字列なので、足し算はできない</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Error in dog + 1: non-numeric argument to binary operator</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>変数への代入は、「<code>=</code>」や「<code>-&gt;</code>」の演算子によっても行うことができます。ただし、これらを代入に用いると、プログラムを読み解くのが難しくなるため、Rでは「<code>&lt;-</code>」を用いることが推奨されています。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>=や-&gt;による代入</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dog <span class="ot">=</span> <span class="st">"犬"</span> <span class="co"># イコールも代入に使うことができる</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="ot">-&gt;</span> number <span class="co"># -&gt;も代入に使える（方向は&lt;-と逆になる）</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>dog</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "犬"</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>number</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>定義されている変数の一覧を確認するには、<code>ls</code>関数を用います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>変数の確認</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "d"      "dog"    "number"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="変数と定数-1" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="変数と定数-1"><span class="header-section-number">3.4.2</span> 変数と定数</h3>
<p>変数のうち、一度代入したら中身を変えられないもののことを<strong>定数</strong>と呼びます。他のプログラミング言語では定数を設定できるものが多いのですが、Rには定数を設定する方法はありません。変数の中身はいつでも置き換えできます。変数を置き換えると、置き換えに用いたオブジェクトの型・クラスに従い、変数の型・クラスも置き換わります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>変数の置き換え</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dog <span class="ot">&lt;-</span> <span class="st">"inu"</span> <span class="co"># 変数に文字列を代入</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(dog) <span class="co"># 型は文字列になる</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "character"</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>dog <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># 変数に数値を入れ直す</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(dog) <span class="co"># 変数の型は数値になる</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rにおけるデータ型の変換
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>多くのプログラミング言語では、上記のように変数の型が変化するのを抑える仕組み（型宣言）を持っています。型宣言が必要な言語では、変数は厳密に型のチェックを受けます（静的型付け）。Rにはこのような仕組みがなく、代入されたオブジェクトに従って型が決まり、型チェックされることなくプログラムが実行されます。このような言語のことを動的型付けと呼びます。</p>
<p>プログラム中で変数の型が変わると、バグの原因となります。Rでは、プログラムを書いているうちに変数の型が変化していて、正しい計算結果が得られない、ということがたびたび起きます。変数の型を常に確認しながらプログラミングした方がよいでしょう。</p>
</div>
</div>
</div>
<p>定数とは少し異なりますが、Rでは代入なしに使える変数もあります。例えば、円周率のπは「<code>pi</code>」という変数名で始めから登録されています。このような変数にも別のオブジェクトを代入することはできますが、後々混乱する原因となるため避けたほうがよいでしょう。</p>
<p>また、統計手法を試すためのデータが代入されている変数（データセット）もたくさん設定されています。データセットについては、<a href=".chapter14.html">14章</a>で詳しく説明します。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>あらかじめ設定されている変数</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pi <span class="co"># 円周率</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3.141593</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>letters <span class="co"># アルファベット（小文字）</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [20] "t" "u" "v" "w" "x" "y" "z"</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>LETTERS <span class="co"># アルファベット（大文字）</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S"</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [20] "T" "U" "V" "W" "X" "Y" "Z"</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>month.abb <span class="co"># 月（短縮表記）</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "Jan" "Feb" "Mar" "Apr" "May" "Jun" "Jul" "Aug" "Sep" "Oct" "Nov" "Dec"</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>month.name <span class="co"># 月</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "January"   "February"  "March"     "April"     "May"       "June"     </span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "July"      "August"    "September" "October"   "November"  "December"</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>pi <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># piに3を代入する</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>pi <span class="co"># piは3になってしまう</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="値渡しと参照渡し" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="値渡しと参照渡し"><span class="header-section-number">3.4.3</span> 値渡しと参照渡し</h3>
<p>Rでは、変数への代入が行われるたびに、その変数に対するメモリのアドレスを新規に作成し直す、という特徴があるため、他の言語で理解が必要となる値渡しと参照渡しの問題がほとんど起きません。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>値渡し</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># xに1を代入</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="co"># yにxを代入（yとxはメモリを共有）</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="co"># xに2を代入（xのメモリのアドレスが変わる）</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>x <span class="co"># xは新しいアドレスを参照（2が返ってくる）</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>y <span class="co"># yは古いアドレスを参照（1が返ってくる）</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
参照渡し
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>上のコードでは、参照渡しであれば、xの値が2になった場合、xとメモリを共有しているyも2になります。Rでは、代入時にメモリのアドレスが別に準備されるため（値渡し）、参照渡しが起こることは基本的にありません。この特徴はプログラミング初心者には優しいのですが、変数の変更のたびにメモリ上にオブジェクトを新規作成するため、Rの実行速度が遅い原因になります。</p>
</div>
</div>
</div>
</section>
</section>
<section id="便利なオブジェクトクラス" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="便利なオブジェクトクラス"><span class="header-section-number">3.5</span> 便利なオブジェクト・クラス</h2>
<p>ここまでは、オブジェクトが一つだけの場合のデータ型や、変数について見てきました。しかし、統計で取り扱うのは、複数の数値や記録です。数値や記録がたくさんある場合には、数値や記録を一つづつ別々に取り扱うのは非効率です。多くのプログラミング言語では、このような複数の数値や記録を取り扱う専用のクラスを備えています。Rでは、複数の記録を取り扱うクラスとして、<strong>ベクター（vector）</strong>、<strong>リスト（list）</strong>、<strong>データフレーム（data.frame）</strong>、<strong>行列（matrix）</strong>の4つが用いられます。以下にこの4つについて簡単に説明します。それぞれのクラスについてはさらに別章で詳しく説明します。</p>
<section id="ベクターvector" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="ベクターvector"><span class="header-section-number">3.5.1</span> ベクター（vector）</h3>
<p>Rで最も基本的なオブジェクトは、<strong>ベクター（vector）</strong>です。ベクターは同じ型を持つオブジェクトの集まりで、1次元の、つまり縦横の構造がないデータとして取り扱われます。ベクターは<code>c</code>関数（<code>c</code>はcombine、「結合する」の意味）で作成することができます。</p>
<p>ベクターは同じ型を持つデータの集まりです。ですので、ベクターの要素に文字列が交じると、自動的にすべての要素が文字列になる、という特徴があります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ベクターの作成</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>vec_n <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="co"># 数値のベクター</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>vec_c <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dog"</span>, <span class="st">"cat"</span>, <span class="st">"pig"</span>, <span class="st">"horse"</span>) <span class="co"># 文字列のベクター</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>vec_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">"dog"</span>) <span class="co"># 文字列が交じると文字列のベクターになる</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>vec_n</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>vec_c</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "dog"   "cat"   "pig"   "horse"</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>vec_temp</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "1"   "2"   "3"   "dog"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Rでは数値1つや文字列1つの要素も、ベクターとして取り扱われます。ですので、Rのオブジェクトの最小単位はベクターとなります。要素が1つであれば、<code>c</code>関数でつなぎ合わせる必要はありません。</p>
<div class="cell" data-filenames="要素が1つだけのベクター">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="co"># 数字1つでもベクター</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="st">"Hello world"</span> <span class="co"># 文字列1つでもベクター</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Hello world"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
本文でのvectorの表記について
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>vectorはベクトルと表記されることもあります。この文書では、Rのオブジェクトをベクター、方向と大きさを持つ量のことをベクトルと表記することとします。</p>
</div>
</div>
</div>
<section id="ベクターに要素を追加する" class="level4" data-number="3.5.1.1">
<h4 data-number="3.5.1.1" class="anchored" data-anchor-id="ベクターに要素を追加する"><span class="header-section-number">3.5.1.1</span> ベクターに要素を追加する</h4>
<p>ベクターに要素を追加するために、<code>append</code>関数というものが用意されています。しかし、上記の<code>c</code>関数でもベクターに要素を追加することができます。</p>
<p><code>append</code>関数では位置を特定して要素を追加することができますが、位置を特定して要素を追加することはまれです。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ベクターに要素を追加する</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">append</span>(vec_n, <span class="dv">5</span>) <span class="co"># 上の数値ベクターに5を追加</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4 5</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(vec_n, <span class="dv">5</span>) <span class="co"># 上と同じ</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="ベクターの要素を取り出す" class="level4" data-number="3.5.1.2">
<h4 data-number="3.5.1.2" class="anchored" data-anchor-id="ベクターの要素を取り出す"><span class="header-section-number">3.5.1.2</span> ベクターの要素を取り出す</h4>
<p>ベクターの要素を取り出すときには、<strong>インデックス</strong>というものを用います。インデックスとは、ベクターなどの複数の値を取り扱うオブジェクトにおいて、値のある位置を示す数値のことです。インデックスはベクターの変数の後に、四角カッコ（<code>[ ]</code>）に数値を入れることで指定することができます。Rではインデックスは1から始まります。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./image/vector_index.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3" title="図3：ベクターとインデックス"><img src="./image/vector_index.png" class="img-fluid figure-img" alt="図3：ベクターとインデックス"></a></p>
<figcaption>図3：ベクターとインデックス</figcaption>
</figure>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ベクターの要素をインデックスで取り出す</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>) <span class="co"># 数値のベクターを作成する</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">1</span>] <span class="co"># インデックス1には4が入っている</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">3</span>] <span class="co"># インデックス3には2が入っている</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
他言語でのインデックス
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>多くのプログラミング言語では、インデックスは0から始まります。インデックスが1から始まるプログラミング言語はまれです。</p>
</div>
</div>
</div>
</section>
<section id="ベクターの要素の置き換え" class="level4" data-number="3.5.1.3">
<h4 data-number="3.5.1.3" class="anchored" data-anchor-id="ベクターの要素の置き換え"><span class="header-section-number">3.5.1.3</span> ベクターの要素の置き換え</h4>
<p>ベクターの要素を置き換えるときには、置き換えたいベクターのインデックスを指定し、数値などを代入します。この時、数値のベクターの要素を文字列に置き換えると、ベクター全体が文字列に置き換わるので注意して下さい。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ベクターの要素を置き換える</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>vec <span class="co"># 数値のベクター</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4 3 2 1</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="co"># インデックス3の数値を5に置き換える</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>vec <span class="co"># 3番めが2から5に置き換わる</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4 3 5 1</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">"dog"</span> <span class="co"># インデックス4の数値を"dog"（文字列）に置き換える</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>vec <span class="co"># ベクターはすべて文字列になる</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "4"   "3"   "5"   "dog"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="ベクターの要素を取り除く" class="level4" data-number="3.5.1.4">
<h4 data-number="3.5.1.4" class="anchored" data-anchor-id="ベクターの要素を取り除く"><span class="header-section-number">3.5.1.4</span> ベクターの要素を取り除く</h4>
<p>ベクターの要素を取り除くときには、<strong>ベクターのインデックスをマイナス</strong>で指定します。マイナスのインデックスで指定した要素は取り除かれ、ベクターの長さが短くなります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ベクターの要素を取り除く</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>vec</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "4"   "3"   "5"   "dog"</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>vec[<span class="sc">-</span><span class="dv">3</span>] <span class="co"># インデックス3の要素（5）を取り除く</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "4"   "3"   "dog"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="ベクターの演算" class="level4" data-number="3.5.1.5">
<h4 data-number="3.5.1.5" class="anchored" data-anchor-id="ベクターの演算"><span class="header-section-number">3.5.1.5</span> ベクターの演算</h4>
<p>ベクターは、そのまま演算に用いることができます。数値のベクターに数値を足せば、ベクターのすべての要素に数値が足されます。文字列のベクターに<code>paste</code>関数で文字を継ぎ足せば、すべての要素に文字が継ぎ足されます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ベクターを演算に用いる</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>vec_n <span class="co"># 数値のベクター</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>vec_n <span class="sc">+</span> <span class="dv">5</span> <span class="co"># 数値のベクターに5を足すと、すべての要素に5が足される</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6 7 8 9</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>vec_c <span class="co"># 文字のベクター</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "dog"   "cat"   "pig"   "horse"</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(vec_c, <span class="st">"is an animal."</span>) <span class="co"># 文字のベクターにpaste関数で文字をつなぎ合わせる</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "dog is an animal."   "cat is an animal."   "pig is an animal."  </span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] "horse is an animal."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>ベクターについては<a href=".chapter11.html">11章</a>でさらに詳しく説明します。</p>
</section>
</section>
<section id="因子factor" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="因子factor"><span class="header-section-number">3.5.2</span> 因子（factor）</h3>
<p><strong>因子（factor）</strong>はR以外のプログラミング言語にはないクラスの一つです。因子とは、<strong>カテゴリ</strong>を表すときに用いるクラスです。カテゴリとは、例えば男性/女性や、成人/未成年、喫煙者/非喫煙者などの、そのデータの性質を表す要素のことを指します。統計では、例えば男性と女性で分けて数値を集計する、といったシチュエーションがたくさんあります。このように、カテゴリごとの集計や統計を行いやすくするために準備されているクラスが因子です。因子は<code>factor</code>関数を用いて作成します。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>因子型（factor）</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="st">"male"</span>) <span class="co"># 男性を示す因子</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] male</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: male</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">factor</span>(<span class="st">"male"</span>)) <span class="co"># 因子のクラスはfactor</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "factor"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<section id="因子のレベルlevels" class="level4" data-number="3.5.2.1">
<h4 data-number="3.5.2.1" class="anchored" data-anchor-id="因子のレベルlevels"><span class="header-section-number">3.5.2.1</span> 因子のレベル（levels）</h4>
<p>因子には、<strong>レベル（levels）</strong>というアトリビュートが付いています。因子はカテゴリを示すものですので、通常1つだけで用いることはありません（カテゴリが1つだけであれば、カテゴリ分けする必要がありません）。つまり、因子は複数の要素を持つベクターとして作成することになります。このときのベクター内の各カテゴリ（男性・女性など）のことをレベルと呼びます。因子については<a href="./chapter10.html">10章</a>で詳しく説明します。</p>
</section>
</section>
<section id="リストlist" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="リストlist"><span class="header-section-number">3.5.3</span> リスト（list）</h3>
<p>統計の計算をしていると、複数の計算結果をまとめて取り扱いたい、という場合があります。ベクターは1次元のオブジェクトで、かつすべての要素のデータ型が同じですので、ベクターでは型や長さの違う、様々な結果を一度に取り扱うことはできません。このような、型の違うデータを一度に取り扱うときに用いられるのが、<strong>リスト（list）</strong>と呼ばれるオブジェクトです。リストは、様々なオブジェクトをまとめて一つにしたようなデータ構造を持ちます。リストを作成するときには、<code>list</code>関数を用います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>リスト（list）の作成</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>vec1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="co"># 数値のベクター</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>vec2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dog"</span>, <span class="st">"cat"</span>, <span class="st">"pig"</span>, <span class="st">"horse"</span>) <span class="co"># 文字列のベクター</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>num <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="co"># 数値</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>char_temp <span class="ot">&lt;-</span> <span class="st">"Hello world"</span> <span class="co"># 文字列</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>list_temp <span class="ot">&lt;-</span> <span class="fu">list</span>(vec1, vec2, num, char_temp) <span class="co"># 色々な要素をリストにまとめる</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>list_temp <span class="co"># まとめたリストを表示</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [[2]]</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "dog"   "cat"   "pig"   "horse"</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [[3]]</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 10</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [[4]]</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Hello world"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<section id="リストの要素を取り出す" class="level4" data-number="3.5.3.1">
<h4 data-number="3.5.3.1" class="anchored" data-anchor-id="リストの要素を取り出す"><span class="header-section-number">3.5.3.1</span> リストの要素を取り出す</h4>
<p>リストの要素を取り出す場合には、ベクターと同様にインデックスを用います。ただし、リストのインデックスは多層化、ネストされているため、呼び出しはやや複雑です。リストの要素を取り出すときには、四角カッコを2重にして用います（<code>[[ ]]</code>）。<code>[[1]]</code>で呼び出すと、リストの1番目の要素を呼び出すことになります。ベクターと同様に<strong><code>[1]</code>で呼び出すと、リストの1番目の要素を、リストとして呼び出す</strong>ことになり、要素までたどり着けません。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>リストの要素を取り出す</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>list_temp[[<span class="dv">1</span>]] <span class="co"># リストの1番目の要素を取り出す</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>list_temp[[<span class="dv">2</span>]] <span class="co"># 2番目の要素を取り出す</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "dog"   "cat"   "pig"   "horse"</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>list_temp[<span class="dv">1</span>] <span class="co"># リストの1番目の要素を、リストとして取り出す</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>list_temp[[<span class="dv">1</span>]][<span class="dv">1</span>] <span class="co"># リストの1番目の要素（ベクター）の、1番目の要素を取り出す</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>リストについては、<a href="./chapter12.html">12章</a>で詳しく説明します。</p>
</section>
</section>
<section id="データフレームdata.frame" class="level3" data-number="3.5.4">
<h3 data-number="3.5.4" class="anchored" data-anchor-id="データフレームdata.frame"><span class="header-section-number">3.5.4</span> データフレーム（data.frame）</h3>
<p><strong>データフレーム（data.frame）</strong>はExcelの表のように、行と列を持ち、長方形の形に整形された表形式のオブジェクトです。データフレームはExcelの表のように取り扱うことができます。</p>
<p>データフレームは<strong>縦方向（列）に同じデータ型</strong>を持つ、ベクターの集合になっています。データフレームは横方向（行）には異なる型を持つことができますが、縦方向（列）は必ず同じ型を持つ必要があります。列はベクターですので、ベクターと同じように<strong>数値の列の1つのデータを文字列に置き換えると、その列のデータが全て文字列に変換される</strong>という特徴があります。</p>
<p>データフレームは<code>data.frame</code>関数を用いて作ることができます。データフレームを作成するときには、<strong>「列名」=「列の要素」</strong>という形でカッコの中に入力します。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>データフレームの作成</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="co"># データフレームを作成する（各列を同じ長さにする）</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">number =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="co"># 1列目は数値</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">animal =</span> <span class="fu">c</span>(<span class="st">"dog"</span>, <span class="st">"cat"</span>, <span class="st">"pig"</span>, <span class="st">"horse"</span>), <span class="co"># 2列目と3列目は動物と果物</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">fruits =</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"orange"</span>, <span class="st">"banana"</span>, <span class="st">"grape"</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>d <span class="co"># データフレームの表示</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal fruits</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      1    dog  apple</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      2    cat orange</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      3    pig banana</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      4  horse  grape</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
データフレームとリスト
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>データフレームは同じ長さのベクターをリストにしたものです。ですので、縦（列）はベクターとして同じ型を持ちます。データフレームはリストでもあるので、リストと同じように取り扱うこともできます。</p>
</div>
</div>
</div>
<section id="データフレームの次元dimensionと行数列数" class="level4" data-number="3.5.4.1">
<h4 data-number="3.5.4.1" class="anchored" data-anchor-id="データフレームの次元dimensionと行数列数"><span class="header-section-number">3.5.4.1</span> データフレームの次元（dimension）と行数・列数</h4>
<p>データフレームには、<strong>次元（dimension）</strong>という性質（アトリビュート、attribute）があります。この次元とは、行の数、列の数のことです。次元を取得する時には、<code>dim</code>関数を用います。また、行の数、列の数はそれぞれ<code>nrow</code>関数、<code>ncol</code>関数で取得することができます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>データフレームの次元を取得する</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d) <span class="co"># 次元の取得（前が行の数、後ろが列の数）</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4 3</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(d) <span class="co"># 行の数</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(d) <span class="co"># 列の数</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="データフレームのインデックス" class="level4" data-number="3.5.4.2">
<h4 data-number="3.5.4.2" class="anchored" data-anchor-id="データフレームのインデックス"><span class="header-section-number">3.5.4.2</span> データフレームのインデックス</h4>
<p>ベクターやリストと同じく、データフレームでもインデックスで要素を取り出すことができます。データフレームのインデックスは、<strong><code>[行, 列]</code></strong>という形で指定します。行も列も、1行目・1列目のインデックスが1となります。</p>
<p>データフレームでは、行だけ、列だけをインデックスとして指定することもできます。<strong>行だけをインデックスとして指定した時（<code>[行, ]</code>の形で指定）には、その行がデータフレームとして取り出されます</strong>。一方、<strong>列だけを指定した時（<code>[, 列]</code>の形で指定）には、その列がベクターとして取り出されます</strong>。データフレームを行と列で取り出した場合には異なるものが取り出されるので、特にデータフレームの行を取り出す際には注意が必要です。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>データフレームの要素を取り出す</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal fruits</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      1    dog  apple</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      2    cat orange</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      3    pig banana</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      4  horse  grape</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>d[<span class="dv">2</span>, <span class="dv">3</span>] <span class="co"># 2行3列目のデータを取り出す</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "orange"</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>d[<span class="dv">2</span>, ] <span class="co"># 2行目を取り出す（データフレーム）</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal fruits</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      2    cat orange</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>d[, <span class="dv">3</span>] <span class="co"># 3列目を取り出す（ベクター）</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "apple"  "orange" "banana" "grape"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>データフレームの列は、列の名前を用いても取り出すことができます。列を取り出すときには、<strong>$（ドルマーク）に列名</strong>を繋げて記述します。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>列を列名で呼び出す</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>number <span class="co"># 1列目の列名はnumber</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>animal <span class="co"># 2列目の列名はanimal</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "dog"   "cat"   "pig"   "horse"</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>fruits <span class="co"># 3列目の列名はfruits</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "apple"  "orange" "banana" "grape"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="データフレームの要素の置き換え" class="level4" data-number="3.5.4.3">
<h4 data-number="3.5.4.3" class="anchored" data-anchor-id="データフレームの要素の置き換え"><span class="header-section-number">3.5.4.3</span> データフレームの要素の置き換え</h4>
<p>データフレームの要素の置き換えは、ベクターと同じように、置き換えたい場所のインデックスを指定して、値を代入する形で行います。この時、その置き換える列の型と代入するデータの型が異なると、列の型がすべて置き換わることがあるので注意が必要です。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>データフレームの要素を置き換える</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>d[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"peach"</span> <span class="co"># 2行3列目の要素をpeachに置き換える</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>d <span class="co"># 2行3列目がpeachに置き換わる</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal fruits</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      1    dog  apple</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      2    cat  peach</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      3    pig banana</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      4  horse  grape</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>d[<span class="dv">2</span>, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"tomato"</span> <span class="co"># 2行1列目をtomato（文字列）に置き換える</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>d <span class="co"># 2行1列目がtomatoに置き換わる</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal fruits</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      1    dog  apple</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 tomato    cat  peach</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      3    pig banana</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      4  horse  grape</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(d[, <span class="dv">1</span>]) <span class="co"># 1列目が文字列に置き換わる</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "character"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="データフレームの行列の削除" class="level4" data-number="3.5.4.4">
<h4 data-number="3.5.4.4" class="anchored" data-anchor-id="データフレームの行列の削除"><span class="header-section-number">3.5.4.4</span> データフレームの行・列の削除</h4>
<p>データフレームの行や列を削除する場合には、ベクターと同じように、インデックスをマイナスで与えます。インデックスをマイナスで指定することで、そのインデックスの行・列を取り除くことができます。ただし、データフレームの1つの要素だけを削除することはできません（指定した行・列がまるごと削除されます）。1つの要素だけを取り除く場合には、その要素のインデックスに対して<code>NA</code>を代入するとよいでしょう。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>データフレームの行・列を削除する</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>d <span class="co"># 元々のデータフレームは4行3列</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal fruits</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      1    dog  apple</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 tomato    cat  peach</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      3    pig banana</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      4  horse  grape</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>d[<span class="sc">-</span><span class="dv">1</span>, ] <span class="co"># 1行目を削除</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal fruits</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 tomato    cat  peach</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      3    pig banana</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      4  horse  grape</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>d[, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># 1列目を削除</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="do">##   animal fruits</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    dog  apple</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 2    cat  peach</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 3    pig banana</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  horse  grape</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>d[<span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">3</span>] <span class="co"># 2行目と3列目を削除</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="do">##   number animal</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      1    dog</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      3    pig</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      4  horse</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>d[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span> <span class="co"># 1要素だけを取り除くときは、NAを代入する</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="行列matrix" class="level3" data-number="3.5.5">
<h3 data-number="3.5.5" class="anchored" data-anchor-id="行列matrix"><span class="header-section-number">3.5.5</span> 行列（matrix）</h3>
<p><strong>行列（matrix）</strong>は、線形代数（高校数学での行列計算）に用いるものです。行列は基本的には一つの型の要素からなる、行と列のあるオブジェクトです。行列はデータフレームとよく似ていますが、データフレームが列方向のベクターのリストであるのに対し、行列は次元（dimension）を持つベクターに近いものとなります。</p>
<p>Rで行列を作成するときには、<code>matrix</code>関数を用います。<code>matrix</code>関数では、カッコの中に、ベクター、行数、列数を指定する数値を与えます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>行列を作成する</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2行3列の行列</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>) <span class="co"># nrowは行数、ncolは列数</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>mat</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    3    5</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    2    4    6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<section id="行列の次元とインデックス" class="level4" data-number="3.5.5.1">
<h4 data-number="3.5.5.1" class="anchored" data-anchor-id="行列の次元とインデックス"><span class="header-section-number">3.5.5.1</span> 行列の次元とインデックス</h4>
<p>行列の次元とインデックスは、データフレームとほぼ同じように取り扱うことができます。行列の行・列に名前をつけることもできます。従って、列を取り出すときに列名を利用することもできます。取り出したものはいずれもベクターになります。要素・行・列の削除もデータフレームと同じ方法で行います。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>行列の要素の取り出し</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>mat[<span class="dv">1</span>, <span class="dv">1</span>] <span class="co"># 1行1列目の要素</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>mat[<span class="dv">1</span>, ] <span class="co"># 1行目の要素（ベクター）</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 3 5</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>mat[, <span class="dv">1</span>] <span class="co"># 1列目の要素（ベクター）</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mat) <span class="co"># matのdimensionを表示</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2 3</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mat) <span class="co"># matの行数を表示</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(mat) <span class="co"># matの列数を表示</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="行列の演算" class="level4" data-number="3.5.5.2">
<h4 data-number="3.5.5.2" class="anchored" data-anchor-id="行列の演算"><span class="header-section-number">3.5.5.2</span> 行列の演算</h4>
<p>データフレームとは異なり、数値の行列は演算に用いることができます。行列（線形代数）の計算のために、Rには行列積、外積、クロネッカー積に対応する演算子が準備されています。</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>表4：Rで使える行列の演算子</caption>
<thead>
<tr class="header">
<th style="text-align: left;">行列の演算子</th>
<th style="text-align: left;">演算子の意味</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">%*%</td>
<td style="text-align: left;">行列の積</td>
</tr>
<tr class="even">
<td style="text-align: left;">%o%</td>
<td style="text-align: left;">外積</td>
</tr>
<tr class="odd">
<td style="text-align: left;">%x%</td>
<td style="text-align: left;">クロネッカー積</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>行列の演算</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>mat2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>mat <span class="sc">%*%</span> mat2 <span class="co"># 行列の積</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]   22   49</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]   28   64</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>mat <span class="sc">%o%</span> mat2 <span class="co"># 外積</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 1, 1</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    3    5</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    2    4    6</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 2, 1</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    2    6   10</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    4    8   12</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 3, 1</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    3    9   15</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    6   12   18</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 1, 2</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    4   12   20</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    8   16   24</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 2, 2</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    5   15   25</span></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]   10   20   30</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 3, 2</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    6   18   30</span></span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]   12   24   36</span></span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>mat <span class="sc">%x%</span> mat2 <span class="co"># クロネッカー積</span></span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3] [,4] [,5] [,6]</span></span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    4    3   12    5   20</span></span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    2    5    6   15   10   25</span></span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,]    3    6    9   18   15   30</span></span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a><span class="do">## [4,]    2    8    4   16    6   24</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a><span class="do">## [5,]    4   10    8   20   12   30</span></span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a><span class="do">## [6,]    6   12   12   24   18   36</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="次元以上のオブジェクトarray" class="level4" data-number="3.5.5.3">
<h4 data-number="3.5.5.3" class="anchored" data-anchor-id="次元以上のオブジェクトarray"><span class="header-section-number">3.5.5.3</span> 3次元以上のオブジェクト：array</h4>
<p>行列はベクターに次元を2つ（行と列）与えたものですが、3次元以上の次元を与えることもできます。このような3次元以上のデータを取り扱う場合には、arrayというオブジェクトを使用します。arrayは<code>array</code>関数で作成することができ、各次元の数（行数、列数に当たるもの）をベクターで与えます。統計やデータ解析で3次元以上のデータを取り扱うことは比較的まれです。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>arrayを作成する</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">array</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>), <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)) <span class="co"># 2行2列2シートの行列</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 1</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    3</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    2    4</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 2</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    5    7</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    6    8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="その他のオブジェクト" class="level3" data-number="3.5.6">
<h3 data-number="3.5.6" class="anchored" data-anchor-id="その他のオブジェクト"><span class="header-section-number">3.5.6</span> その他のオブジェクト</h3>
<p>Rに基本的に備わっているオブジェクトとして、ベクター、リスト、データフレーム、行列の他に、<strong>時系列（time series、ts）</strong>というオブジェクトがあります。時系列とは、例えば株価や為替相場の時間変化のような、時間とともに定期的に記録されたデータのことを指します。時系列はクラスとして設定されており、中身はベクターです。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>時系列データ（ts）</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>co2[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="co"># 1959年からのCO2濃度の推移</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 315.42 316.31 316.50 317.56 318.13 318.00 316.39 314.65 313.68 313.18</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(co2) <span class="co"># クラスはts</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "ts"</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(co2) <span class="co"># 型はdouble</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "double"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="関数" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="関数"><span class="header-section-number">3.6</span> 関数</h2>
<p>ここまでに、<code>mode</code>関数、<code>typeof</code>関数、<code>class</code>関数、<code>c</code>関数、<code>list</code>関数、<code>data.frame</code>関数、<code>matrix</code>関数など、様々な関数を用いて、オブジェクトの型やクラスを調べたり、ベクターやリストなどを作成してきました。R言語の<strong>関数</strong>とは、<strong>オブジェクトに一定の演算を加えて、結果を表示するオブジェクト</strong>のことを指します。関数のクラスは<strong>function</strong>（関数）、型も<strong>function</strong>です。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>オブジェクトとしての関数</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(typeof) <span class="co"># 関数のクラスはfunction</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "function"</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(typeof) <span class="co"># 関数の型もfunction</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "function"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Rでの関数は、<strong>引数</strong>と呼ばれる、カッコの中に記載されたオブジェクトに対して、一定の演算を加えるものです。Excelの関数をイメージしていただければ理解しやすいと思います。関数のイメージを図にすると、以下のようになります。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./image/function_image.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4" title="図4：関数のイメージ図"><img src="./image/function_image.png" class="img-fluid figure-img" alt="図4：関数のイメージ図"></a></p>
<figcaption>図4：関数のイメージ図</figcaption>
</figure>
</div>
<p>Rには<code>mean</code>関数という、数値の平均値を表示してくれる関数があります。上の図では、ベクターである、<code>c(5, 10, 15)</code>を引数として与えると、<code>mean</code>関数は引数を読み取って平均値を計算し、平均値である10を表示してくれます。この、表示される関数の計算結果のことを、<strong>返り値</strong>と呼びます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>関数、引数と返り値</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>) <span class="co"># 引数とするベクター</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vec) <span class="co"># mean関数に引数vecを与えると、10が返り値として返ってくる</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Rには、上記の関数以外にも、数値や文字列、データフレームを演算するための関数を数多く備えています。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>代表的な関数と、関数としての演算子</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(vec) <span class="co"># 標準偏差を計算する関数</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(vec) <span class="co"># 中央値を計算する関数</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 10</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">log10</span>(vec) <span class="co"># 常用対数を計算する関数</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.698970 1.000000 1.176091</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(vec) <span class="co"># ネイピア数の指数を計算する関数</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]     148.4132   22026.4658 3269017.3725</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="st">`</span><span class="at">+</span><span class="st">`</span>) <span class="co"># 演算子の+の型はfunction（関数）</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "function"</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">+</span><span class="st">`</span>(<span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># 関数なので、引数を2つ取ると足し算になる</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="st">`</span><span class="at">[</span><span class="st">`</span>) <span class="co"># インデックスも関数</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "function"</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="st">`</span><span class="at">if</span><span class="st">`</span>) <span class="co"># if（条件分岐）も関数</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "function"</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(<span class="st">`</span><span class="at">for</span><span class="st">`</span>) <span class="co"># for（繰り返し文）も関数</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "function"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rでの関数
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Rでは、演算子やインデックス指定、条件分岐、繰り返し文も関数です。</p>
</div>
</div>
</div>
<p>このように、Rでは多くの演算を関数によって処理しています。この性質から、Rは<strong>関数型言語</strong>であるとされています。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rと関数型言語
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>正確には、Rは厳密な意味では関数型言語ではないように思います。関数型言語には<a href="https://www.haskell.org/">Haskell</a>などがありますが、関数型言語では再帰的関数（関数内で関数を呼び出す）ような処理を用いて繰り返し計算を避ける場合が多く、Rのような逐次型処理に慣れていると読みにくいコードをよく書くイメージがあります。Rでも再帰的関数を用いることはできますが、頻繁には使用されません。</p>
</div>
</div>
</div>
<section id="関数を自作する" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="関数を自作する"><span class="header-section-number">3.6.1</span> 関数を自作する</h3>
<p>どのようなプログラミング言語にも、関数を自作する方法が備わっています。Rでは、<code>function</code>文を用いて関数を自作することができます。関数を変数に代入して用いるのが一般的な関数の作成方法です。<code>function</code>文の書き方は以下の通りです。</p>
<p><strong>関数名 &lt;- function(引数群){引数を使った処理}</strong></p>
<p>関数の返り値は、<code>return</code>関数を使って明示することもできますが、単に最後に記載したオブジェクトを返り値とすることもできます。</p>
<p>また、Rでは<code>function</code>と書く代わりに、<code>\</code>（バックスラッシュ）を<code>function</code>の代わりに用いることもできます。</p>
<p>作成した関数を用いて演算するときには、「関数名(引数)」という形で表記します。これは<code>mode</code>関数や<code>class</code>関数の使い方と同じです。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>関数を自作する</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 引数をそのまま帰す関数</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>return_selfx <span class="ot">&lt;-</span> <span class="cf">function</span>(x){<span class="fu">return</span>(x)} <span class="co"># 返り値をreturn関数で表示</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>return_selfy <span class="ot">&lt;-</span> <span class="cf">function</span>(y){y} <span class="co"># 最後に返り値を書く</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>return_selfz <span class="ot">&lt;-</span> \(z){z} <span class="co"># functionの代わりにバックスラッシュを用いる</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># どれも同じ演算をする関数になる</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="fu">return_selfx</span>(<span class="dv">1</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="fu">return_selfy</span>(<span class="dv">1</span>)</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="fu">return_selfz</span>(<span class="dv">1</span>)</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>実際に関数を作るときには、もう少し複雑な処理を<code>{ }</code>（中かっこ）の中に書きます。処理は一つ一つ改行しながら書き、最後に返り値を書きます。中かっこの中で改行を行っても問題ありませんが、引数のかっこ（「<code>)</code>」）の後にかっこの前側（「<code>{</code>」）が記載されている必要があります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>関数内の処理の書き方</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sum2関数を作成する</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>sum2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, z){ <span class="co"># 引数はx、y、zの3つ</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  sum_of_xyz <span class="ot">&lt;-</span> x <span class="sc">+</span> y <span class="sc">+</span> z <span class="co"># 引数を足し算する</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  sum_of_xyz <span class="co"># 足し算したものを返り値にする</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum2</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">2</span>, <span class="at">z =</span> <span class="dv">3</span>)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>上の例のように、引数を指定するときには、引数の種類を明示的に記載することもできます。明示的に記載する場合には、<strong>「引数名=値」</strong>という形で書きます。引数名を省略した場合には、記載した引数の順番に従って、引数が用いられます。</p>
<p>関数を作成するときには、<strong>引数のデフォルト値</strong>を設定しておくこともできます。デフォルト値が設定されている関数では、その引数を入力しなかったときには、自動的に引数にデフォルト値が入ります。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>引数のデフォルト値と省略</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>sum3 <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">y =</span> <span class="dv">1</span>){ <span class="co"># yのデフォルト値を1とする</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum3</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">2</span>) <span class="co"># 引数を明示的に記載</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum3</span>(<span class="dv">1</span>, <span class="dv">2</span>) <span class="co"># xに1、yに2が入る</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sum3</span>(<span class="dv">1</span>) <span class="co"># 引数yが省略されているので、デフォルト値（1）が用いられる</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sum3</span>(<span class="at">y =</span> <span class="dv">1</span>) <span class="co"># xにはデフォルトが設定されていないので、省略できない</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Error in sum3(y = 1): argument "x" is missing, with no default</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="型クラスの確認と変換" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="型クラスの確認と変換"><span class="header-section-number">3.7</span> 型・クラスの確認と変換</h2>
<section id="型クラスの確認is.関数群" class="level3" data-number="3.7.1">
<h3 data-number="3.7.1" class="anchored" data-anchor-id="型クラスの確認is.関数群"><span class="header-section-number">3.7.1</span> 型・クラスの確認：is.関数群</h3>
<p>Rでは、型やクラスを確認するための関数として、<code>typeof</code>関数・<code>mode</code>関数・<code>class</code>関数以外に、<code>is.</code>関数というものを備えています。<code>is.</code>関数を用いると、オブジェクトの型が、ある型と一致しているかどうかを確認することができます。引数が数値であるかどうかは、<code>is.numeric</code>関数、<code>is.integer</code>関数、<code>is.double</code>関数を用いて確認することができます。例えば<strong><code>is.numeric(1)</code>は<code>TRUE</code></strong>を返し、<strong><code>is.numeric("dog")</code>は<code>FALSE</code></strong>を返します。この<code>is.</code>関数には、文字列や<code>NA</code>、<code>NaN</code>等を確認する関数もあります。<code>is.</code>関数を以下の表2に示します。</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>表2：xの型の確認に用いる関数</caption>
<thead>
<tr class="header">
<th style="text-align: left;">is.関数名</th>
<th style="text-align: left;">チェックする型</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">is.numeric(x)</td>
<td style="text-align: left;">数値型</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.integer(x)</td>
<td style="text-align: left;">整数型</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.double(x)</td>
<td style="text-align: left;">double型</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.complex</td>
<td style="text-align: left;">複素数型</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.character(x)</td>
<td style="text-align: left;">文字列型</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.logical(x)</td>
<td style="text-align: left;">真偽型</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.factor(x)</td>
<td style="text-align: left;">因子型</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.atomic(x)</td>
<td style="text-align: left;">ベクター</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.list(x)</td>
<td style="text-align: left;">リスト</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.matrix(x)</td>
<td style="text-align: left;">マトリックス</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.data.frame(x)</td>
<td style="text-align: left;">データフレーム</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.na(x)</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.nan(x)</td>
<td style="text-align: left;">NaN</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.null(x)</td>
<td style="text-align: left;">NULL</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is.infinite(x)</td>
<td style="text-align: left;">無限大</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><code>is.</code>関数の中では、<code>is.na</code>関数の使用頻度が高いです。<code>is.na</code>関数を用いると、ベクターやデータフレームからNAを含む要素をうまく取り除くことができます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>is.関数群</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.numeric</span>(<span class="dv">1</span>), <span class="fu">is.numeric</span>(<span class="st">"1"</span>)) <span class="co"># 文字列（"1"）は数値ではない</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.integer</span>(<span class="dv">1</span>L), <span class="fu">is.integer</span>(<span class="dv">1</span>)) <span class="co"># Lが付いていないとdoubleになる</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.double</span>(<span class="dv">1</span>), <span class="fu">is.double</span>(<span class="dv">1</span>L)) <span class="co"># Lが付いているとintegerになる</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.complex</span>(<span class="dv">1</span><span class="sc">+</span><span class="dv">1</span>i), <span class="fu">is.complex</span>(<span class="dv">1</span><span class="sc">+</span><span class="dv">1</span>)) <span class="co"># iがあると複素数になる</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.character</span>(<span class="st">"dog"</span>), <span class="fu">is.character</span>(<span class="dv">1</span>)) <span class="co"># 数値は文字列ではない</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 0はFALSE扱いされるが、logicalではない</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.logical</span>(T), <span class="fu">is.logical</span>(<span class="dv">0</span>), <span class="fu">is.logical</span>(<span class="st">"dog"</span>)) </span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE FALSE</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.factor</span>(<span class="fu">factor</span>(<span class="dv">1</span>)), <span class="fu">is.factor</span>(<span class="dv">1</span>))</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.atomic</span>(<span class="dv">1</span>), <span class="fu">is.atomic</span>(<span class="fu">list</span>(<span class="dv">1</span>))) <span class="co"># ベクターはTRUE、リストはFALSE</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.vector</span>(<span class="dv">1</span>), <span class="fu">is.vector</span>(<span class="fu">list</span>(<span class="dv">1</span>))) <span class="co"># is.vectorもあるが、リストもTRUEになる</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE TRUE</span></span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.list</span>(<span class="fu">list</span>(<span class="dv">1</span>)), <span class="fu">is.list</span>(<span class="dv">1</span>))<span class="co"># ベクターはFALSE、リストはTRUE</span></span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.matrix</span>(<span class="fu">matrix</span>(<span class="dv">1</span>, <span class="at">ncol=</span><span class="dv">1</span>)), <span class="fu">is.matrix</span>(<span class="dv">1</span>))</span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.data.frame</span>(<span class="fu">data.frame</span>(<span class="dv">1</span>)), <span class="fu">is.data.frame</span>(<span class="fu">list</span>(<span class="dv">1</span>))) <span class="co"># リストはFALSE</span></span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a><span class="co"># NAとNaNはNA扱い、NULLは無いもの扱い</span></span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.na</span>(<span class="cn">NA</span>), <span class="fu">is.na</span>(<span class="dv">1</span>), <span class="fu">is.na</span>(<span class="cn">NaN</span>), <span class="fu">is.na</span>(<span class="cn">Inf</span>), <span class="fu">is.na</span>(<span class="cn">NULL</span>)) </span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE  TRUE FALSE</span></span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a><span class="co"># NULLは無いもの扱い</span></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.nan</span>(<span class="cn">NA</span>), <span class="fu">is.nan</span>(<span class="dv">1</span>), <span class="fu">is.nan</span>(<span class="cn">NaN</span>), <span class="fu">is.nan</span>(<span class="cn">Inf</span>), <span class="fu">is.nan</span>(<span class="cn">NULL</span>))</span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE FALSE  TRUE FALSE</span></span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a><span class="co"># NULLを評価する</span></span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.null</span>(<span class="cn">NA</span>), <span class="fu">is.null</span>(<span class="dv">1</span>), <span class="fu">is.null</span>(<span class="cn">NaN</span>), <span class="fu">is.null</span>(<span class="cn">Inf</span>), <span class="fu">is.null</span>(<span class="cn">NULL</span>)) </span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE FALSE FALSE FALSE  TRUE</span></span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a><span class="co"># NULLは無いもの扱い</span></span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.infinite</span>(<span class="cn">NA</span>), <span class="fu">is.infinite</span>(<span class="dv">1</span>), <span class="fu">is.infinite</span>(<span class="cn">NaN</span>), <span class="fu">is.infinite</span>(<span class="cn">Inf</span>), <span class="fu">is.infinite</span>(<span class="cn">NULL</span>)) </span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE FALSE FALSE  TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
atomicなベクター
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>ベクターは<code>is.atomic</code>関数で評価します。これは、ベクターのことをatomic vectorと呼ぶためです。atomic vectorはvectorと同じ意味を持ちます。エラーやメッセージには時々このatomic vectorという表記が出てきますが、これは通常のベクターのことを述べているだけで、atomic vectorという特別なものがあるわけではありません。</p>
</div>
</div>
</div>
</section>
<section id="型クラスの変換as.関数群" class="level3" data-number="3.7.2">
<h3 data-number="3.7.2" class="anchored" data-anchor-id="型クラスの変換as.関数群"><span class="header-section-number">3.7.2</span> 型・クラスの変換：as.関数群</h3>
<p><code>is.</code>関数はデータのクラスや型をチェックし、論理型を返す関数です。Rには、関数名がよく似た<code>as.</code>関数があります。<code>as.</code>関数は、引数の型を指定した型に変換する関数です。例えば、<code>as.numeric</code>関数は引数をnumericに変換する関数です。<code>as.</code>関数の一覧を以下の表3に示します。</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>表3：xの型の変換に用いる関数</caption>
<thead>
<tr class="header">
<th style="text-align: left;">as.関数名</th>
<th style="text-align: left;">変換する型</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">as.numeric(x)</td>
<td style="text-align: left;">数値型に変換</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.integer(x)</td>
<td style="text-align: left;">整数型に変換</td>
</tr>
<tr class="odd">
<td style="text-align: left;">as.double(x)</td>
<td style="text-align: left;">double型に変換</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.complex</td>
<td style="text-align: left;">複素数型に変換</td>
</tr>
<tr class="odd">
<td style="text-align: left;">as.character(x)</td>
<td style="text-align: left;">文字列型に変換</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.logical(x)</td>
<td style="text-align: left;">真偽型に変換</td>
</tr>
<tr class="odd">
<td style="text-align: left;">as.factor(x)</td>
<td style="text-align: left;">因子型に変換</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.Date</td>
<td style="text-align: left;">日時型に変換</td>
</tr>
<tr class="odd">
<td style="text-align: left;">as.POSIXct</td>
<td style="text-align: left;">POSIXct型に変換</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.POSIXlt</td>
<td style="text-align: left;">POSIXlt型に変換</td>
</tr>
<tr class="odd">
<td style="text-align: left;">as.list(x)</td>
<td style="text-align: left;">リストに変換</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.matrix(x)</td>
<td style="text-align: left;">マトリックスに変換</td>
</tr>
<tr class="odd">
<td style="text-align: left;">as.data.frame(x)</td>
<td style="text-align: left;">データフレームに変換</td>
</tr>
<tr class="even">
<td style="text-align: left;">as.null(x)</td>
<td style="text-align: left;">NULLに変換</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>as.関数群</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="cn">TRUE</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>(<span class="fl">1.1</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="fu">as.double</span>(<span class="dv">1</span>L)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="fu">as.complex</span>(<span class="dv">1</span>)</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1+0i</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">1</span>)</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "1"</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">as.logical</span>(<span class="dv">1</span>), <span class="fu">as.logical</span>(<span class="dv">0</span>))</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(<span class="fu">c</span>(<span class="st">"dog"</span>, <span class="st">"cat"</span>))</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] dog cat</span></span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: cat dog</span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">"2022-02-22"</span>) <span class="co"># わかりにくいが、日付型になっている</span></span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "2022-02-22"</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a><span class="co"># わかりにくいが、日時型になっている</span></span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a><span class="fu">as.POSIXct</span>(<span class="st">"2022-02-22 15:00:00"</span>)</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "2022-02-22 15:00:00 +09"</span></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a><span class="fu">as.POSIXlt</span>(<span class="st">"2022-02-22 15:00:00"</span>)</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "2022-02-22 15:00:00 +09"</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a><span class="fu">as.list</span>(<span class="dv">1</span>)</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(<span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a><span class="do">##   X1 X1.1</span></span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  1    1</span></span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a><span class="fu">as.matrix</span>(<span class="fu">data.frame</span>(<span class="at">x=</span><span class="dv">1</span>, <span class="at">y=</span><span class="dv">1</span>))</span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a><span class="do">##      x y</span></span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,] 1 1</span></span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a><span class="fu">as.null</span>(<span class="dv">1</span>)</span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a><span class="do">## NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="naの取り扱い" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="naの取り扱い"><span class="header-section-number">3.8</span> NAの取り扱い</h2>
<p>Rでは、データに欠測値（<code>NA</code>）、計算できない値（<code>NaN</code>）、空の値（<code>NULL</code>）、無限大（<code>Inf</code>）が含まれることがあります。これらのうち、<code>NA</code>と<code>NaN</code>を取り除く関数が<code>na.omit</code>関数です。<code>na.omit</code>関数はベクターやデータフレームを引数に取り、<code>NA</code>と<code>NaN</code>を取り除いてくれる関数です。<code>NA</code>と異なり、<code>Inf</code>は取り除かれません。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>na.omit関数</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="cn">NaN</span>, <span class="cn">NULL</span>, <span class="cn">Inf</span>) <span class="co"># NULLは要素として含められない</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>vec</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]   1  NA NaN Inf</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">na.omit</span>(vec)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]   1 Inf</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,"na.action")</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2 3</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,"class")</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "omit"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="予約語" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="予約語"><span class="header-section-number">3.9</span> 予約語</h2>
<p>上の例では関数や変数に名前をつけていますが、関数名や変数名の付け方にはルールがあります。</p>
<ul>
<li>名前の始めに数値（1、2など）をつけることはできない</li>
<li>名前の始めにアンダーバー（_）を用いることはできない</li>
<li>大文字と小文字は区別される（SUMとsumは別扱い）</li>
<li>演算子や記号（<code>!</code>や<code>?</code>、<code>+</code>、<code>-</code>、<code>#</code> など）は使えない</li>
<li><strong>予約語</strong>を用いることはできない</li>
</ul>
<p><strong>予約語（reserved word）</strong>とは、R言語がすでに役割を与えているために、関数名や変数名には使用できない文字列です。Rで設定されている予約語は以下の通りです。</p>
<ul>
<li>if</li>
<li>else</li>
<li>repeat</li>
<li>while</li>
<li>function<br>
</li>
<li>for</li>
<li>in</li>
<li>next</li>
<li>break</li>
<li>TRUE</li>
<li>FALSE</li>
<li>NULL</li>
<li>Inf</li>
<li>NaN</li>
<li>NA</li>
<li>NA_integer_</li>
<li>NA_real_</li>
<li>NA_complex_</li>
<li>NA_character_</li>
<li>…</li>
<li>..1</li>
<li>..2</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rでのピリオドの取り扱い
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Rでは、ピリオド（.）が予約語に含まれていないため、変数名にピリオドを利用することができます。ただし、他の言語ではこのピリオドをメソッド（method）という、関数の仲間のようなものに用いることが多く、勘違いを起こしやすい表記になります。Rでも変数名にピリオドを用いないほうがよいとされています。</p>
</div>
</div>
</div>
</section>
<section id="ヘルプ" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="ヘルプ"><span class="header-section-number">3.10</span> ヘルプ</h2>
<p>ヘルプを呼び出すことでRの関数の使い方を確認することができます。ヘルプは関数名の前に<code>?</code>を付けて実行することで呼び出すことができます。RStudioでは、右下のパネルにヘルプの内容が表示されます。</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ヘルプの呼び出し</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>?mean <span class="co"># mean関数のヘルプを呼び出す</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>


<!-- -->

<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">図1：コンパイルと機械語への変換</span>
<span class="glightbox-desc lightbox-desc-2">図2：変数のイメージ</span>
<span class="glightbox-desc lightbox-desc-3">図3：ベクターとインデックス</span>
<span class="glightbox-desc lightbox-desc-4">図4：関数のイメージ図</span>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapter2.html" class="pagination-link" aria-label="Rを使ってみよう">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Rを使ってみよう</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./chapter4.html" class="pagination-link" aria-label="条件判断（Control structures）">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">条件判断（Control structures）</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb53" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># オブジェクトと変数・定数</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, setup, include=FALSE, echo=FALSE}</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="in">  collapse = TRUE</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="fu">## プログラミング言語としてのR</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>R言語は統計の計算を行うために開発されたプログラミング言語です。プログラミング言語としての仕様は<span class="co">[</span><span class="ot">S言語</span><span class="co">](https://ja.wikipedia.org/wiki/S%E8%A8%80%E8%AA%9E)</span>という、<span class="co">[</span><span class="ot">ベル研究所</span><span class="co">](https://www.bell-labs.com/)</span>によって開発された言語を参考としています。R言語は、「動的型付け、型推論、インタプリタ型、オブジェクト指向の関数型言語」というタイプのプログラミング言語です。プログラミング未体験の方にはすべての単語が意味不明だと思いますが、単語の意味については順々に紹介していきます。</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>まずは、**「インタプリタ」**について説明します。インタプリタとは、プログラムをコンパイルすることなく実行することができる環境のことを指します。</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>この、**「コンパイル」**というのは、プログラムを機械語に置き換える変換のことを指します。</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>**「機械語」**というのも聞き覚えがない言葉だと思います。機械語とは、コンピュータが読み取れる、1と0だけからなる数字の列のことです。コンピュータは我々の言語や画像などをそのまま処理することはできず、1ビット単位（1と0）の情報だけを取り扱うことができます。プログラミング言語のうち、例えばCやJavaでは、プログラムはまず機械語に変換、コンパイルされます。コンパイルされたプログラムだけがコンピュータ上で実行できます（下図1）。</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a><span class="al">![図1：コンパイルと機械語への変換](./image/compile.png)</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>一方、インタプリタ型の言語では、プログラミング言語をコンパイルすることなく実行することができます。インタプリタ型の言語には<span class="co">[</span><span class="ot">Python</span><span class="co">](https://www.python.org/)</span>や<span class="co">[</span><span class="ot">Ruby</span><span class="co">](https://www.ruby-lang.org/ja/)</span>、<span class="co">[</span><span class="ot">PHP</span><span class="co">](https://www.php.net/)</span>などがあります。コンパイルには通常時間がかかりますが、インタプリタ型言語ではコンパイルに時間をかけることなく、すぐにプログラムを実行することができるというメリットがあります。一方で、コンパイルを除いたプログラムを実行・完了するまでの時間はコンパイルを行うプログラミング言語よりも長くなるというデメリットもあります。</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>Rはインタプリタ型の言語ですので、記述したプログラム（スクリプトとも呼びます）はすぐに実行されます。一方で、Rでの計算速度はインタプリタ型言語の中でもかなり遅い部類に入ります。ただし、Rは主にad hocな（その場一回限りの）統計解析に用いられる言語です。1回限りであれば、それほど計算が早くなくても問題とはなりませんし、入力したプログラムがすぐに実行されるという性質も統計解析との相性がよいものです。コンピュータの性能も昔より遥かに高くなっており、R言語での計算が遅いと感じることは減ってきています。</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a><span class="fu">## オブジェクトとは？</span></span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>Rは**オブジェクト指向（Object oriented）**の言語である、とされています。この**「オブジェクト指向」**という言葉はプログラミング言語ではよく用いられるものですが、厳密な定義は複雑です。</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>この**オブジェクト**というのは、プログラミングで取り扱う「もの」すべてを指す言葉です。プログラミングでは、**数値**や**文字**などを取り扱い、数値の演算を行ったり、文字に対して検索や置換、文字の追加などを行います。このとき、取り扱う数値や文字はオブジェクト、つまりプログラミングで用いる「もの」であるということになります。Rでは数値や文字の他に、**因子（factor）**や**論理値（booleanまたはlogical）**、**関数（function）**などを取り扱います。これらのすべてがプログラミングで取り扱う「もの」、つまりオブジェクトです。</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a>上で述べたように、プログラミングで用いるオブジェクトには数値、文字、因子、関数など、様々な種類のものがあります。数値も文字もプログラミングで扱う「もの」であることは共通していますが、数値と文字に対して同じ演算をしたい、ということは通常ありません。数値なら掛け算や割り算を行うことがあっても、文字に対して掛け算や割り算はしません。プログラミング言語も、数値なら数値の演算、文字なら文字の演算を行う必要があります。このように、数値なら数値の、文字なら文字の処理を行うために、オブジェクトには**「型（type）」**というものがあります。</span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-34"><a href="#cb53-34" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="型と演算の関係", error=TRUE}</span></span>
<span id="cb53-35"><a href="#cb53-35" aria-hidden="true" tabindex="-1"></a><span class="in">1 * 1 # 数値同士を掛け算することがあっても、</span></span>
<span id="cb53-36"><a href="#cb53-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-37"><a href="#cb53-37" aria-hidden="true" tabindex="-1"></a><span class="in">1 * "dog" # 数値と文字列を掛け算できてしまうと困る（エラーが出る）</span></span>
<span id="cb53-38"><a href="#cb53-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-39"><a href="#cb53-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-40"><a href="#cb53-40" aria-hidden="true" tabindex="-1"></a><span class="fu">## 型（type）とは？</span></span>
<span id="cb53-41"><a href="#cb53-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-42"><a href="#cb53-42" aria-hidden="true" tabindex="-1"></a>**型（type）**とは、そのオブジェクトの種類を定めるためのラベルのようなものです。例えば、Rで数値を入力すると、Rは自動的にその数値がnumericであると認識します。同様に、"（ダブルクオーテーション）で文字を囲うと、Rは自動的にその文字がcharacter（文字列型）であると認識します。Rはこの認識した型に従い、そのオブジェクトに対する演算を行います。</span>
<span id="cb53-43"><a href="#cb53-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-44"><a href="#cb53-44" aria-hidden="true" tabindex="-1"></a>オブジェクトの型は<span class="in">`mode`</span>関数で確認することができます。関数については後ほど詳しく説明します。</span>
<span id="cb53-45"><a href="#cb53-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-46"><a href="#cb53-46" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="mode関数で型を確認する"}</span></span>
<span id="cb53-47"><a href="#cb53-47" aria-hidden="true" tabindex="-1"></a><span class="in">mode(1) # 1は数値</span></span>
<span id="cb53-48"><a href="#cb53-48" aria-hidden="true" tabindex="-1"></a><span class="in">mode("Hello world") # "Hello world"は文字列</span></span>
<span id="cb53-49"><a href="#cb53-49" aria-hidden="true" tabindex="-1"></a><span class="in">mode("1") # "1"は文字列</span></span>
<span id="cb53-50"><a href="#cb53-50" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-51"><a href="#cb53-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-52"><a href="#cb53-52" aria-hidden="true" tabindex="-1"></a>上記のように、「<span class="in">`1`</span>」の数字を<span class="in">`mode()`</span>のカッコの中に入れると、numericが返ってきます。これは、<span class="in">`1`</span>というオブジェクトの型がnumeric（数値）であることを示しています。同様に、ダブルクオーテーションで囲まれた<span class="in">`"Hello world"`</span>を<span class="in">`mode()`</span>のカッコに入れると、characterが返ってきます。これは、<span class="in">`"Hello world"`</span>の型がcharacter（文字列）であることを意味しています。では、ダブルクオーテーションで囲まれた<span class="in">`"1"`</span>がどうなるかというと、これはcharacter、つまり文字列になります。</span>
<span id="cb53-53"><a href="#cb53-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-54"><a href="#cb53-54" aria-hidden="true" tabindex="-1"></a>Rでは、このように「ダブルクオーテーションで囲まれている」というオブジェクトの状態を調べ、囲まれていればそのオブジェクトは文字列型であると判断します。同様に、オブジェクトが「数値でかつダブルクオーテーションに囲まれていない」場合には、そのオブジェクトが数値型であると判断します。このように、プログラム上でオブジェクトの型を特に指定していなくても、Rは自動的にそのオブジェクトの型を決定してくれます。このようなプログラムの性質を**「型推論」**と呼びます。</span>
<span id="cb53-55"><a href="#cb53-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-56"><a href="#cb53-56" aria-hidden="true" tabindex="-1"></a>では、Rの代表的な型について、これから簡単に説明していきます。</span>
<span id="cb53-57"><a href="#cb53-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-58"><a href="#cb53-58" aria-hidden="true" tabindex="-1"></a><span class="fu">### 文字列（character）</span></span>
<span id="cb53-59"><a href="#cb53-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-60"><a href="#cb53-60" aria-hidden="true" tabindex="-1"></a>一般的なプログラミング言語で最も取り扱うことが多いオブジェクトは**文字列型（character）**です。文字列、つまり文章などを検索したり、一部を取り出したり、条件に合っているか確認したりすることはプログラミング利用の目的の一つとなります。</span>
<span id="cb53-61"><a href="#cb53-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-62"><a href="#cb53-62" aria-hidden="true" tabindex="-1"></a>Rは統計学のプログラミング言語ですので、どちらかというと文字列よりは数値を取り扱うことが多いのですが、文字列を取り扱える仕組みも一通り備えています。</span>
<span id="cb53-63"><a href="#cb53-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-64"><a href="#cb53-64" aria-hidden="true" tabindex="-1"></a>Rで文字列型のオブジェクトを作成するときには、<span class="in">`"`</span>（ダブルクオーテーション）もしくは<span class="in">`'`</span>（シングルクォーテーション）で文字を囲みます。ダブルクオーテーション・シングルクオーテーションのどちらを用いても文字列のオブジェクトを作成することはできます。クオーテーションが無い場合にはエラーとなります。</span>
<span id="cb53-65"><a href="#cb53-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-66"><a href="#cb53-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="文字列オブジェクトの例", error=TRUE}</span></span>
<span id="cb53-67"><a href="#cb53-67" aria-hidden="true" tabindex="-1"></a><span class="in">"Hello world" # ダブルクオーテーションで囲った場合</span></span>
<span id="cb53-68"><a href="#cb53-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-69"><a href="#cb53-69" aria-hidden="true" tabindex="-1"></a><span class="in">'Hello R' # シングルクオーテーションで囲った場合</span></span>
<span id="cb53-70"><a href="#cb53-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-71"><a href="#cb53-71" aria-hidden="true" tabindex="-1"></a><span class="in">Hello world # エラー</span></span>
<span id="cb53-72"><a href="#cb53-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-73"><a href="#cb53-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-74"><a href="#cb53-74" aria-hidden="true" tabindex="-1"></a>ダブルクオーテーションとシングルクオーテーションには違いはありません。どちらを用いても問題ないのですが、Rではダブルクオーテーションを用いるのが一般的です。</span>
<span id="cb53-75"><a href="#cb53-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-76"><a href="#cb53-76" aria-hidden="true" tabindex="-1"></a>Rでは、文字列を入力すればその文字列がそのまま表示されますが、文字列の表示を明示したい場合には<span class="in">`print`</span>関数を用います。</span>
<span id="cb53-77"><a href="#cb53-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-78"><a href="#cb53-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="print関数"}</span></span>
<span id="cb53-79"><a href="#cb53-79" aria-hidden="true" tabindex="-1"></a><span class="in">print("Hello world")</span></span>
<span id="cb53-80"><a href="#cb53-80" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-81"><a href="#cb53-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-82"><a href="#cb53-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-83"><a href="#cb53-83" aria-hidden="true" tabindex="-1"></a><span class="fu">#### エスケープ文字（エスケープシーケンス）</span></span>
<span id="cb53-84"><a href="#cb53-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-85"><a href="#cb53-85" aria-hidden="true" tabindex="-1"></a>プログラミング言語によっては、ダブルクオーテーションとシングルクオーテーションで**エスケープ文字（エスケープシーケンス）**の取扱いに違いがある場合があります。エスケープシーケンスとは、バックスラッシュ（<span class="sc">\\</span>、日本語キーボードでは¥）とアルファベットを組み合わせて、特定の意味を持たせる表現のことを指します。例えば、<span class="in">`\n`</span>は改行を、<span class="in">`\t`</span>はタブを示す記号です。RではC言語由来のエスケープシーケンスを利用できます。以下の表1にエスケープシーケンスの例を挙げます。</span>
<span id="cb53-86"><a href="#cb53-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-87"><a href="#cb53-87" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb53-88"><a href="#cb53-88" aria-hidden="true" tabindex="-1"></a><span class="in">d &lt;- data.frame(</span></span>
<span id="cb53-89"><a href="#cb53-89" aria-hidden="true" tabindex="-1"></a><span class="in">  escapeSequence = c('\\a', '\\b', '\\f', '\\n', '\\r', '\\t', '\\v', '\\\\', "\\\'", '\\\"'),</span></span>
<span id="cb53-90"><a href="#cb53-90" aria-hidden="true" tabindex="-1"></a><span class="in">  represent = c("アラート", "バックスペース", "ページ分割", "改行", "キャリッジリターン", "水平タブ", "垂直タブ", "バックスラッシュ", "シングルクオーテーション", "ダブルクオーテーション")</span></span>
<span id="cb53-91"><a href="#cb53-91" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-92"><a href="#cb53-92" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(d) &lt;- c("エスケープシーケンス", "エスケープシーケンスの意味")</span></span>
<span id="cb53-93"><a href="#cb53-93" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(d, "html", caption="表1：エスケープシーケンスの例")</span></span>
<span id="cb53-94"><a href="#cb53-94" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-95"><a href="#cb53-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-96"><a href="#cb53-96" aria-hidden="true" tabindex="-1"></a>Rのデータをテキストファイルなどに書き出すときには、エスケープシーケンス、特に<span class="in">`\n`</span>（改行）や<span class="in">`\t`</span>（タブ）を用いることがあります。データ書き出しの際のエスケープシーケンスに関しては、<span class="co">[</span><span class="ot">13章</span><span class="co">](./chapter13.html)</span>で詳しく説明します。</span>
<span id="cb53-97"><a href="#cb53-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-98"><a href="#cb53-98" aria-hidden="true" tabindex="-1"></a>エスケープシーケンスを変換した文字列を表示する場合には、<span class="in">`writeLines`</span>関数を用います。</span>
<span id="cb53-99"><a href="#cb53-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-100"><a href="#cb53-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="writeLines関数で文字列にエスケープシーケンスを反映"}</span></span>
<span id="cb53-101"><a href="#cb53-101" aria-hidden="true" tabindex="-1"></a><span class="in">writeLines("Hello world")</span></span>
<span id="cb53-102"><a href="#cb53-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-103"><a href="#cb53-103" aria-hidden="true" tabindex="-1"></a><span class="in">writeLines("Hello\nworld") # \nは改行に変換</span></span>
<span id="cb53-104"><a href="#cb53-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-105"><a href="#cb53-105" aria-hidden="true" tabindex="-1"></a><span class="in">print("Hello\nworld") # print関数はエスケープシーケンスを変換しない</span></span>
<span id="cb53-106"><a href="#cb53-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-107"><a href="#cb53-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-108"><a href="#cb53-108" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 文字列を結合する</span></span>
<span id="cb53-109"><a href="#cb53-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-110"><a href="#cb53-110" aria-hidden="true" tabindex="-1"></a>Rで文字列を用いるときに、文字列Aと文字列Bをくっつけたい、ということがあります。このようなときに用いるのが、<span class="in">`paste`</span>関数です。<span class="in">`paste`</span>関数はカッコの中に2つ以上の文字列をコンマでつないで入れると、文字列をスペースを挟んでつなぎ合わせてくれます。文字列の間にスペースが必要ない場合には、<span class="in">`paste0`</span>関数を用います。</span>
<span id="cb53-111"><a href="#cb53-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-112"><a href="#cb53-112" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="文字列をつなぐpaste関数"}</span></span>
<span id="cb53-113"><a href="#cb53-113" aria-hidden="true" tabindex="-1"></a><span class="in">paste("Hello", "world")</span></span>
<span id="cb53-114"><a href="#cb53-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-115"><a href="#cb53-115" aria-hidden="true" tabindex="-1"></a><span class="in">paste0("Hello", "R")</span></span>
<span id="cb53-116"><a href="#cb53-116" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-117"><a href="#cb53-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-118"><a href="#cb53-118" aria-hidden="true" tabindex="-1"></a>文字列の取扱いに関しては、<span class="co">[</span><span class="ot">9章</span><span class="co">](./chapter9.html)</span>で詳しく説明します。</span>
<span id="cb53-119"><a href="#cb53-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-120"><a href="#cb53-120" aria-hidden="true" tabindex="-1"></a><span class="fu">### 数値（numeric）</span></span>
<span id="cb53-121"><a href="#cb53-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-122"><a href="#cb53-122" aria-hidden="true" tabindex="-1"></a>Rは統計の言語ですので、数値データを取り扱う機会が特に多くなります。グラフを記述したり、データを要約する場合にも主に取り扱うのは数値です。Rでは、数値は**numeric**という型を持ちます。</span>
<span id="cb53-123"><a href="#cb53-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-124"><a href="#cb53-124" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 数値型のdouble（浮動小数点）とinteger（整数）</span></span>
<span id="cb53-125"><a href="#cb53-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-126"><a href="#cb53-126" aria-hidden="true" tabindex="-1"></a>数値には更に詳細な型があります。詳細な型は<span class="in">`typeof`</span>関数で調べることができます。Rでの数値は通常doubleという型を持ちます。</span>
<span id="cb53-127"><a href="#cb53-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-128"><a href="#cb53-128" aria-hidden="true" tabindex="-1"></a>数値にはdouble以外に、integer（整数）という型もあります。Rで整数型の数値を利用する時には、数字の後ろにLをつけます。また、数値であってもダブルクオーテーションで囲うと文字列 （character）になります。</span>
<span id="cb53-129"><a href="#cb53-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-130"><a href="#cb53-130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="double型とinteger型"}</span></span>
<span id="cb53-131"><a href="#cb53-131" aria-hidden="true" tabindex="-1"></a><span class="in">mode(1) # modeでの型はnumeric</span></span>
<span id="cb53-132"><a href="#cb53-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-133"><a href="#cb53-133" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(1) # これはdouble</span></span>
<span id="cb53-134"><a href="#cb53-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-135"><a href="#cb53-135" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(1L) # これはinteger</span></span>
<span id="cb53-136"><a href="#cb53-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-137"><a href="#cb53-137" aria-hidden="true" tabindex="-1"></a><span class="in">typeof("1") # これはcharacter</span></span>
<span id="cb53-138"><a href="#cb53-138" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-139"><a href="#cb53-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-140"><a href="#cb53-140" aria-hidden="true" tabindex="-1"></a>Rではintegerを取り扱う機会は非常に少なく、通常数値はdoubleとして取り扱います。</span>
<span id="cb53-141"><a href="#cb53-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-142"><a href="#cb53-142" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-143"><a href="#cb53-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-144"><a href="#cb53-144" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rでの数値型</span></span>
<span id="cb53-145"><a href="#cb53-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-146"><a href="#cb53-146" aria-hidden="true" tabindex="-1"></a>多くのプログラミング言語では、小数点を含む数値は、その精度（桁数）により、single（浮動小数点型）、double（倍精度浮動小数点型）などの型を持ちます。このsingleはdoubleよりオブジェクトのファイルサイズが小さい代わりに、あまり大きい桁数の数値は取り扱えないという特徴があります。Rにはsingleという型はありません。</span>
<span id="cb53-147"><a href="#cb53-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-148"><a href="#cb53-148" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-149"><a href="#cb53-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-150"><a href="#cb53-150" aria-hidden="true" tabindex="-1"></a><span class="fu">#### クラス（class）</span></span>
<span id="cb53-151"><a href="#cb53-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-152"><a href="#cb53-152" aria-hidden="true" tabindex="-1"></a>Rではオブジェクトは型以外に、**クラス（class）**という性質を別に持っています。Rでの数値型は、numeric（数値）というクラスを持ちます。クラスの確認には<span class="in">`class`</span>関数を用います。</span>
<span id="cb53-153"><a href="#cb53-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-154"><a href="#cb53-154" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="クラス、モードとtypeof関数"}</span></span>
<span id="cb53-155"><a href="#cb53-155" aria-hidden="true" tabindex="-1"></a><span class="in">mode(1) # 型はnumeric</span></span>
<span id="cb53-156"><a href="#cb53-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-157"><a href="#cb53-157" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(1) # typeofだとdouble</span></span>
<span id="cb53-158"><a href="#cb53-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-159"><a href="#cb53-159" aria-hidden="true" tabindex="-1"></a><span class="in">class(1) # クラスはnumeric</span></span>
<span id="cb53-160"><a href="#cb53-160" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-161"><a href="#cb53-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-162"><a href="#cb53-162" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-163"><a href="#cb53-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-164"><a href="#cb53-164" aria-hidden="true" tabindex="-1"></a><span class="fu">## アトリビュート（attribute)</span></span>
<span id="cb53-165"><a href="#cb53-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-166"><a href="#cb53-166" aria-hidden="true" tabindex="-1"></a>Rのオブジェクトは型だけでなく、アトリビュート（attribute）という性質を別に持っています。クラスはこのアトリビュートの一つです。オブジェクト指向プログラミングではクラスは非常に重要な意味を持ちますので、<span class="co">[</span><span class="ot">18章</span><span class="co">](./chapter18.html)</span>で詳しく説明します。</span>
<span id="cb53-167"><a href="#cb53-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-168"><a href="#cb53-168" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-169"><a href="#cb53-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-170"><a href="#cb53-170" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 演算子（operator）</span></span>
<span id="cb53-171"><a href="#cb53-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-172"><a href="#cb53-172" aria-hidden="true" tabindex="-1"></a>数値を扱う際には、四則演算等の計算を行うことがあります。この四則演算を行うための記号のことを、**演算子**と呼びます。Rでは以下の四則演算子を利用できます。</span>
<span id="cb53-173"><a href="#cb53-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-174"><a href="#cb53-174" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb53-175"><a href="#cb53-175" aria-hidden="true" tabindex="-1"></a><span class="in">d &lt;- data.frame(</span></span>
<span id="cb53-176"><a href="#cb53-176" aria-hidden="true" tabindex="-1"></a><span class="in">  operator = c("+", "-", "*", "/", "%%", "%/%", "^"),</span></span>
<span id="cb53-177"><a href="#cb53-177" aria-hidden="true" tabindex="-1"></a><span class="in">  meaning = c("足し算", "引き算", "掛け算", "割り算", "剰余（割り算の余り）", "整数の割り算", "累乗")</span></span>
<span id="cb53-178"><a href="#cb53-178" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-179"><a href="#cb53-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-180"><a href="#cb53-180" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(d) &lt;- c("演算子", "演算の種類")</span></span>
<span id="cb53-181"><a href="#cb53-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-182"><a href="#cb53-182" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(d, caption="表2：Rで使える演算子")</span></span>
<span id="cb53-183"><a href="#cb53-183" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-184"><a href="#cb53-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-185"><a href="#cb53-185" aria-hidden="true" tabindex="-1"></a>演算子それぞれの計算結果は以下のようになります。演算子の意味はExcelなどで用いられているものとほぼ同じです。</span>
<span id="cb53-186"><a href="#cb53-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-187"><a href="#cb53-187" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="四則演算の例"}</span></span>
<span id="cb53-188"><a href="#cb53-188" aria-hidden="true" tabindex="-1"></a><span class="in">3 + 2 # 足し算</span></span>
<span id="cb53-189"><a href="#cb53-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-190"><a href="#cb53-190" aria-hidden="true" tabindex="-1"></a><span class="in">3 - 2 # 引き算</span></span>
<span id="cb53-191"><a href="#cb53-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-192"><a href="#cb53-192" aria-hidden="true" tabindex="-1"></a><span class="in">3 * 2 # 掛け算</span></span>
<span id="cb53-193"><a href="#cb53-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-194"><a href="#cb53-194" aria-hidden="true" tabindex="-1"></a><span class="in">3 / 2 # 割り算</span></span>
<span id="cb53-195"><a href="#cb53-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-196"><a href="#cb53-196" aria-hidden="true" tabindex="-1"></a><span class="in">3 %% 2 # 剰余（余り）</span></span>
<span id="cb53-197"><a href="#cb53-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-198"><a href="#cb53-198" aria-hidden="true" tabindex="-1"></a><span class="in">3 %/% 2 # 整数の割り算</span></span>
<span id="cb53-199"><a href="#cb53-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-200"><a href="#cb53-200" aria-hidden="true" tabindex="-1"></a><span class="in">3^2 # 累乗</span></span>
<span id="cb53-201"><a href="#cb53-201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-202"><a href="#cb53-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-203"><a href="#cb53-203" aria-hidden="true" tabindex="-1"></a>数値については<span class="co">[</span><span class="ot">8章</span><span class="co">](./chapter8.html)</span>で詳しく説明します。</span>
<span id="cb53-204"><a href="#cb53-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-205"><a href="#cb53-205" aria-hidden="true" tabindex="-1"></a><span class="fu">### 論理型（logical）</span></span>
<span id="cb53-206"><a href="#cb53-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-207"><a href="#cb53-207" aria-hidden="true" tabindex="-1"></a>**論理型（logical）**は、**TRUE（真）**と**FALSE（偽）**からなる2値の型です。TRUEとFALSEはその名の通り、その関係が正しいか、間違っているかを意味するものです。論理型はそのまま使用することもありますが、プログラミングでは**比較演算子**と共に用いることが多い型です。</span>
<span id="cb53-208"><a href="#cb53-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-209"><a href="#cb53-209" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 比較演算子</span></span>
<span id="cb53-210"><a href="#cb53-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-211"><a href="#cb53-211" aria-hidden="true" tabindex="-1"></a>**比較演算子**とは、演算子の右と左を比較して、その関係が正しい（<span class="in">`TRUE`</span>）のか、間違っているのか（<span class="in">`FALSE`</span>）を返す演算子です。比較演算子の例を以下に示します。</span>
<span id="cb53-212"><a href="#cb53-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-213"><a href="#cb53-213" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb53-214"><a href="#cb53-214" aria-hidden="true" tabindex="-1"></a><span class="in">d &lt;- data.frame(</span></span>
<span id="cb53-215"><a href="#cb53-215" aria-hidden="true" tabindex="-1"></a><span class="in">  operator = c("==", "!=", "&lt;", "&lt;=", "&gt;", "&gt;=", "&amp;", "&amp;&amp;", "|", "||"),</span></span>
<span id="cb53-216"><a href="#cb53-216" aria-hidden="true" tabindex="-1"></a><span class="in">  meaning = c("等しい", "等しくない", "小なり", "小なりイコール", "大なり", "大なりイコール", "かつ", "かつ", "または", "または")</span></span>
<span id="cb53-217"><a href="#cb53-217" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-218"><a href="#cb53-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-219"><a href="#cb53-219" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(d) &lt;- c("比較演算子", "比較演算子の意味")</span></span>
<span id="cb53-220"><a href="#cb53-220" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(d, caption="表3：Rで使える比較演算子")</span></span>
<span id="cb53-221"><a href="#cb53-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-222"><a href="#cb53-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-223"><a href="#cb53-223" aria-hidden="true" tabindex="-1"></a><span class="in">`&amp;`</span>と<span class="in">`|`</span>は比較演算子同士を結びつけるための演算子（論理演算子）です。<span class="in">`&amp;`</span>と<span class="in">`&amp;&amp;`</span>、<span class="in">`|`</span>と<span class="in">`||`</span>の違いについては、<span class="co">[</span><span class="ot">4章</span><span class="co">](./chapter4.html)</span>で説明します。</span>
<span id="cb53-224"><a href="#cb53-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-225"><a href="#cb53-225" aria-hidden="true" tabindex="-1"></a>比較演算子を用いた演算の例を以下に示します。比較演算子や論理型は主に**条件分岐**で用います。</span>
<span id="cb53-226"><a href="#cb53-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-227"><a href="#cb53-227" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="比較演算子"}</span></span>
<span id="cb53-228"><a href="#cb53-228" aria-hidden="true" tabindex="-1"></a><span class="in">1 == 1 # 等しいのでTRUE</span></span>
<span id="cb53-229"><a href="#cb53-229" aria-hidden="true" tabindex="-1"></a><span class="in">1 == 2 # 等しくないのでFALSE</span></span>
<span id="cb53-230"><a href="#cb53-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-231"><a href="#cb53-231" aria-hidden="true" tabindex="-1"></a><span class="in">1 != 1 # 等しいのでFALSE</span></span>
<span id="cb53-232"><a href="#cb53-232" aria-hidden="true" tabindex="-1"></a><span class="in">1 != 2 # 等しくないのでTRUE</span></span>
<span id="cb53-233"><a href="#cb53-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-234"><a href="#cb53-234" aria-hidden="true" tabindex="-1"></a><span class="in">1 &lt; 2 # 2は1より小さいのでTRUE</span></span>
<span id="cb53-235"><a href="#cb53-235" aria-hidden="true" tabindex="-1"></a><span class="in">1 &lt; 1 # 1は1より小さくないのでFALSE</span></span>
<span id="cb53-236"><a href="#cb53-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-237"><a href="#cb53-237" aria-hidden="true" tabindex="-1"></a><span class="in">1 &lt;= 2 # 2は1より小さいのでTRUE</span></span>
<span id="cb53-238"><a href="#cb53-238" aria-hidden="true" tabindex="-1"></a><span class="in">1 &lt;= 1 # 1は1に等しいのでTURE</span></span>
<span id="cb53-239"><a href="#cb53-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-240"><a href="#cb53-240" aria-hidden="true" tabindex="-1"></a><span class="in">3 &gt; 2 # 3は2より大きいのでTRUE</span></span>
<span id="cb53-241"><a href="#cb53-241" aria-hidden="true" tabindex="-1"></a><span class="in">2 &gt; 2 # 2は2より大きくないのでFALSE</span></span>
<span id="cb53-242"><a href="#cb53-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-243"><a href="#cb53-243" aria-hidden="true" tabindex="-1"></a><span class="in">3 &gt;= 2 # 3は2より大きいのでTRUE</span></span>
<span id="cb53-244"><a href="#cb53-244" aria-hidden="true" tabindex="-1"></a><span class="in">2 &gt;= 2 # 2は2と等しいのでTRUE</span></span>
<span id="cb53-245"><a href="#cb53-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-246"><a href="#cb53-246" aria-hidden="true" tabindex="-1"></a><span class="in">1 == 1 &amp; 2 == 2 # TRUEかつTRUEなのでTRUE</span></span>
<span id="cb53-247"><a href="#cb53-247" aria-hidden="true" tabindex="-1"></a><span class="in">1 == 1 &amp; 2 == 3 # TRUEかつFALSEなのでFALSE</span></span>
<span id="cb53-248"><a href="#cb53-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-249"><a href="#cb53-249" aria-hidden="true" tabindex="-1"></a><span class="in">1 == 1 | 2 == 2 # TRUEまたはTRUEなのでTRUE</span></span>
<span id="cb53-250"><a href="#cb53-250" aria-hidden="true" tabindex="-1"></a><span class="in">1 == 1 | 2 == 3 # TRUEまたはFALSEなのでTRUE</span></span>
<span id="cb53-251"><a href="#cb53-251" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-252"><a href="#cb53-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-253"><a href="#cb53-253" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 演算子の優先順位</span></span>
<span id="cb53-254"><a href="#cb53-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-255"><a href="#cb53-255" aria-hidden="true" tabindex="-1"></a>数値の計算で掛け算・割り算を足し算・引き算より前に計算するように、演算子の優先順位、計算する順番は決まっています。概ね通常の計算と同じですが、以下のような順序で演算子は計算されます。</span>
<span id="cb53-256"><a href="#cb53-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-257"><a href="#cb53-257" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>カッコでくくられている計算</span>
<span id="cb53-258"><a href="#cb53-258" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>累乗（<span class="in">`^`</span>）</span>
<span id="cb53-259"><a href="#cb53-259" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>剰余・整数の割り算（<span class="in">`%%`</span>・<span class="in">`%/%`</span>）</span>
<span id="cb53-260"><a href="#cb53-260" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>掛け算・割り算（<span class="in">`*`</span>・<span class="in">`/`</span>）</span>
<span id="cb53-261"><a href="#cb53-261" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>足し算・引き算（<span class="in">`+`</span>・<span class="in">`-`</span>）</span>
<span id="cb53-262"><a href="#cb53-262" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>比較演算子（<span class="in">`==`</span>、<span class="in">`!=`</span>、<span class="in">`&lt;`</span>、<span class="in">`&lt;=`</span>、<span class="in">`&gt;`</span>、<span class="in">`&gt;=`</span>）</span>
<span id="cb53-263"><a href="#cb53-263" aria-hidden="true" tabindex="-1"></a><span class="ss">7.  </span>論理演算子（<span class="in">`&amp;`</span>、<span class="in">`|`</span>）</span>
<span id="cb53-264"><a href="#cb53-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-265"><a href="#cb53-265" aria-hidden="true" tabindex="-1"></a>計算式は長くなることが多く、演算子の計算順を間違う場合も多いため、優先する計算は積極的にカッコで囲むとよいでしょう。</span>
<span id="cb53-266"><a href="#cb53-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-267"><a href="#cb53-267" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="演算子の計算順序"}</span></span>
<span id="cb53-268"><a href="#cb53-268" aria-hidden="true" tabindex="-1"></a><span class="in">(2 + 1) / 3 # カッコ内は最優先</span></span>
<span id="cb53-269"><a href="#cb53-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-270"><a href="#cb53-270" aria-hidden="true" tabindex="-1"></a><span class="in">2 ^ 3 %% 5 # 累乗は剰余より先に計算(8/5の余り)</span></span>
<span id="cb53-271"><a href="#cb53-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-272"><a href="#cb53-272" aria-hidden="true" tabindex="-1"></a><span class="in">3 / 3 %% 2 # 剰余は割り算より先に計算（3/1を計算）</span></span>
<span id="cb53-273"><a href="#cb53-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-274"><a href="#cb53-274" aria-hidden="true" tabindex="-1"></a><span class="in">3 / 3 + 1 # 割り算は足し算より先に計算</span></span>
<span id="cb53-275"><a href="#cb53-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-276"><a href="#cb53-276" aria-hidden="true" tabindex="-1"></a><span class="in">3 + 3 &gt; 5 # 比較演算子は足し算より後に計算</span></span>
<span id="cb53-277"><a href="#cb53-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-278"><a href="#cb53-278" aria-hidden="true" tabindex="-1"></a><span class="in">5 &gt; 1 &amp; 6 &gt; 2 # 論理演算子は最後に計算</span></span>
<span id="cb53-279"><a href="#cb53-279" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-280"><a href="#cb53-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-281"><a href="#cb53-281" aria-hidden="true" tabindex="-1"></a><span class="fu">### その他の型・クラス</span></span>
<span id="cb53-282"><a href="#cb53-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-283"><a href="#cb53-283" aria-hidden="true" tabindex="-1"></a>以上の3つ（文字列、数値、論理型）がRでの基本的な型になります。しかし、Rにはこの3つ以外の型を持つオブジェクトも存在します。</span>
<span id="cb53-284"><a href="#cb53-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-285"><a href="#cb53-285" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 欠損値など</span></span>
<span id="cb53-286"><a href="#cb53-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-287"><a href="#cb53-287" aria-hidden="true" tabindex="-1"></a>データ分析では欠損値や、計算結果が表示できないもの、計算結果が無限大になるものなど、データとしてうまく取り扱えない値が生じることがよくあります。このような場合に対応するため、Rは欠損値、計算できない値、無限大にそれぞれ<span class="in">`NA`</span>、<span class="in">`NaN`</span>、<span class="in">`Inf`</span>という型が設定されています。Rでは中身が何もないオブジェクト、<span class="in">`NULL`</span>というものを作成することもできます。</span>
<span id="cb53-288"><a href="#cb53-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-289"><a href="#cb53-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="欠損値、非数、無限大"}</span></span>
<span id="cb53-290"><a href="#cb53-290" aria-hidden="true" tabindex="-1"></a><span class="in">NA # 欠損値（Not Available）</span></span>
<span id="cb53-291"><a href="#cb53-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-292"><a href="#cb53-292" aria-hidden="true" tabindex="-1"></a><span class="in">0/0 # 非数（NaN、Not a Number）</span></span>
<span id="cb53-293"><a href="#cb53-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-294"><a href="#cb53-294" aria-hidden="true" tabindex="-1"></a><span class="in">1/0 # 無限大（Inf）</span></span>
<span id="cb53-295"><a href="#cb53-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-296"><a href="#cb53-296" aria-hidden="true" tabindex="-1"></a><span class="in">10000^1000000 # 大きすぎて取り扱えない数値もInfになる</span></span>
<span id="cb53-297"><a href="#cb53-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-298"><a href="#cb53-298" aria-hidden="true" tabindex="-1"></a><span class="in">NULL # 中身がないオブジェクト（NULL）</span></span>
<span id="cb53-299"><a href="#cb53-299" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-300"><a href="#cb53-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-301"><a href="#cb53-301" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 複素数（complex）</span></span>
<span id="cb53-302"><a href="#cb53-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-303"><a href="#cb53-303" aria-hidden="true" tabindex="-1"></a>Rでは複素数（整数+虚数）を取り扱うこともできます。複素数を表すときには、数値の後に<span class="in">`i`</span>を入力します。</span>
<span id="cb53-304"><a href="#cb53-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-305"><a href="#cb53-305" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="複素数の作成と演算"}</span></span>
<span id="cb53-306"><a href="#cb53-306" aria-hidden="true" tabindex="-1"></a><span class="in">1 + 1i # 複素数</span></span>
<span id="cb53-307"><a href="#cb53-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-308"><a href="#cb53-308" aria-hidden="true" tabindex="-1"></a><span class="in">mode(1 + 1i) # 複素数の型はcomplex</span></span>
<span id="cb53-309"><a href="#cb53-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-310"><a href="#cb53-310" aria-hidden="true" tabindex="-1"></a><span class="in">(1 + 1i) + (3 + 3i) # 複素数同士の足し算</span></span>
<span id="cb53-311"><a href="#cb53-311" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-312"><a href="#cb53-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-313"><a href="#cb53-313" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 日時のクラス（Date、POSIXct、POSIXlt、difftime）</span></span>
<span id="cb53-314"><a href="#cb53-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-315"><a href="#cb53-315" aria-hidden="true" tabindex="-1"></a>日付は数値や文字列とは異なる性質を持ちます。統計では日付や時間を演算に用いることもあります。Rでは日付はDateというクラスを持ちます。また、日時のデータはPOSIXctやPOSIXltというクラスに属します。</span>
<span id="cb53-316"><a href="#cb53-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-317"><a href="#cb53-317" aria-hidden="true" tabindex="-1"></a>DateやPOSIXct、POSIXltは引き算などの演算に用いることができます。日時の差はdulationsというクラスを持ちます。</span>
<span id="cb53-318"><a href="#cb53-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-319"><a href="#cb53-319" aria-hidden="true" tabindex="-1"></a>Date、POSIXct、POSIXlt、dulationはいずれもクラスで、データの型としてはdouble、つまり数値型のデータとして取り扱われます。</span>
<span id="cb53-320"><a href="#cb53-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-321"><a href="#cb53-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="日時のクラスと型"}</span></span>
<span id="cb53-322"><a href="#cb53-322" aria-hidden="true" tabindex="-1"></a><span class="in">Sys.Date() # 現在の日付を表示する関数</span></span>
<span id="cb53-323"><a href="#cb53-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-324"><a href="#cb53-324" aria-hidden="true" tabindex="-1"></a><span class="in">class(Sys.Date()) # 日付のクラスはDate</span></span>
<span id="cb53-325"><a href="#cb53-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-326"><a href="#cb53-326" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(Sys.Date()) # 日付の型はdouble</span></span>
<span id="cb53-327"><a href="#cb53-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-328"><a href="#cb53-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-329"><a href="#cb53-329" aria-hidden="true" tabindex="-1"></a><span class="in">Sys.time() # 現在の日時を表示する関数</span></span>
<span id="cb53-330"><a href="#cb53-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-331"><a href="#cb53-331" aria-hidden="true" tabindex="-1"></a><span class="in">class(Sys.time()) # 日時のクラスはPOSIXctとPOSIXlt</span></span>
<span id="cb53-332"><a href="#cb53-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-333"><a href="#cb53-333" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(Sys.time()) # 日時の型はdouble</span></span>
<span id="cb53-334"><a href="#cb53-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-335"><a href="#cb53-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-336"><a href="#cb53-336" aria-hidden="true" tabindex="-1"></a><span class="in">Sys.Date() - as.Date("2023-01-01") # 2023/1/1から今日までの日数</span></span>
<span id="cb53-337"><a href="#cb53-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-338"><a href="#cb53-338" aria-hidden="true" tabindex="-1"></a><span class="in">class(Sys.Date() - as.Date("2023-01-01")) # 日時の差のクラスはdifftime</span></span>
<span id="cb53-339"><a href="#cb53-339" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-340"><a href="#cb53-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-341"><a href="#cb53-341" aria-hidden="true" tabindex="-1"></a><span class="fu">## 変数と定数</span></span>
<span id="cb53-342"><a href="#cb53-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-343"><a href="#cb53-343" aria-hidden="true" tabindex="-1"></a><span class="fu">### 変数</span></span>
<span id="cb53-344"><a href="#cb53-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-345"><a href="#cb53-345" aria-hidden="true" tabindex="-1"></a>ココまでは、数値や文字列などの、単純なオブジェクトについて説明してきました。単純なオブジェクトはプログラミングの要素として重要です。しかし、オブジェクトを毎回作成し直すのは面倒です。オブジェクトを作ったら、それを一時的に保管しておいて、後から演算に使える方が便利です。</span>
<span id="cb53-346"><a href="#cb53-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-347"><a href="#cb53-347" aria-hidden="true" tabindex="-1"></a>電卓では、このような「一時的に結果を記録する」方法として、メモリー機能があります。Excelなどでは、計算結果をセルに記録しておくこともあるでしょう。プログラミング言語にも、計算結果を一時的に保管しておくものが準備されています。この「計算結果を一時的に保管しておくもの」のことを、プログラミング言語では**変数**と呼びます。</span>
<span id="cb53-348"><a href="#cb53-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-349"><a href="#cb53-349" aria-hidden="true" tabindex="-1"></a>変数には名前がついています。名前付きの箱の中にオブジェクトを入れているようなものが変数です。下の図では、変数「<span class="in">`dog`</span>」にオブジェクト「<span class="in">`"犬"`</span>」を入れています。「<span class="in">`"犬"`</span>」を取り出して使いたいときには、変数である「<span class="in">`dog`</span>」を持ってくればよい、ということになります。</span>
<span id="cb53-350"><a href="#cb53-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-351"><a href="#cb53-351" aria-hidden="true" tabindex="-1"></a><span class="al">![図2：変数のイメージ](./image/variable_image.png)</span></span>
<span id="cb53-352"><a href="#cb53-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-353"><a href="#cb53-353" aria-hidden="true" tabindex="-1"></a>Rで変数を作成する場合には、変数名に「<span class="in">`&lt;-`</span>」の記号でオブジェクトを**代入**します。</span>
<span id="cb53-354"><a href="#cb53-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-355"><a href="#cb53-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="変数への代入"}</span></span>
<span id="cb53-356"><a href="#cb53-356" aria-hidden="true" tabindex="-1"></a><span class="in">dog &lt;- "inu" # dogという変数に"inu"という文字列を代入する</span></span>
<span id="cb53-357"><a href="#cb53-357" aria-hidden="true" tabindex="-1"></a><span class="in">number &lt;- 1 # numberという変数に、1という数値を代入する</span></span>
<span id="cb53-358"><a href="#cb53-358" aria-hidden="true" tabindex="-1"></a><span class="in">dog # 変数dogには"inu"が入っている</span></span>
<span id="cb53-359"><a href="#cb53-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-360"><a href="#cb53-360" aria-hidden="true" tabindex="-1"></a><span class="in">number # 変数numberには1が入っている</span></span>
<span id="cb53-361"><a href="#cb53-361" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-362"><a href="#cb53-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-363"><a href="#cb53-363" aria-hidden="true" tabindex="-1"></a>変数には型・クラスがあり、代入したオブジェクトと同じ型・クラスを持つことになります。また、変数はそのまま演算に用いることができます。</span>
<span id="cb53-364"><a href="#cb53-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-365"><a href="#cb53-365" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="変数の型", error=TRUE}</span></span>
<span id="cb53-366"><a href="#cb53-366" aria-hidden="true" tabindex="-1"></a><span class="in">mode(dog) # dogの中身は文字列</span></span>
<span id="cb53-367"><a href="#cb53-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-368"><a href="#cb53-368" aria-hidden="true" tabindex="-1"></a><span class="in">mode(number) # numberの中身は数値</span></span>
<span id="cb53-369"><a href="#cb53-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-370"><a href="#cb53-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-371"><a href="#cb53-371" aria-hidden="true" tabindex="-1"></a><span class="in">paste(dog, "walk") # dogの中身と"walk"をつなぐ</span></span>
<span id="cb53-372"><a href="#cb53-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-373"><a href="#cb53-373" aria-hidden="true" tabindex="-1"></a><span class="in">number + 5 # numberの中身に5を足す</span></span>
<span id="cb53-374"><a href="#cb53-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-375"><a href="#cb53-375" aria-hidden="true" tabindex="-1"></a><span class="in">dog + 1 # dogの中身は文字列なので、足し算はできない</span></span>
<span id="cb53-376"><a href="#cb53-376" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-377"><a href="#cb53-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-378"><a href="#cb53-378" aria-hidden="true" tabindex="-1"></a>変数への代入は、「<span class="in">`=`</span>」や「<span class="in">`-&gt;`</span>」の演算子によっても行うことができます。ただし、これらを代入に用いると、プログラムを読み解くのが難しくなるため、Rでは「<span class="in">`&lt;-`</span>」を用いることが推奨されています。</span>
<span id="cb53-379"><a href="#cb53-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-380"><a href="#cb53-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="=や-&gt;による代入"}</span></span>
<span id="cb53-381"><a href="#cb53-381" aria-hidden="true" tabindex="-1"></a><span class="in">dog = "犬" # イコールも代入に使うことができる</span></span>
<span id="cb53-382"><a href="#cb53-382" aria-hidden="true" tabindex="-1"></a><span class="in">2 -&gt; number # -&gt;も代入に使える（方向は&lt;-と逆になる）</span></span>
<span id="cb53-383"><a href="#cb53-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-384"><a href="#cb53-384" aria-hidden="true" tabindex="-1"></a><span class="in">dog</span></span>
<span id="cb53-385"><a href="#cb53-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-386"><a href="#cb53-386" aria-hidden="true" tabindex="-1"></a><span class="in">number</span></span>
<span id="cb53-387"><a href="#cb53-387" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-388"><a href="#cb53-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-389"><a href="#cb53-389" aria-hidden="true" tabindex="-1"></a>定義されている変数の一覧を確認するには、<span class="in">`ls`</span>関数を用います。</span>
<span id="cb53-390"><a href="#cb53-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-391"><a href="#cb53-391" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="変数の確認"}</span></span>
<span id="cb53-392"><a href="#cb53-392" aria-hidden="true" tabindex="-1"></a><span class="in">ls()</span></span>
<span id="cb53-393"><a href="#cb53-393" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-394"><a href="#cb53-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-395"><a href="#cb53-395" aria-hidden="true" tabindex="-1"></a><span class="fu">### 変数と定数</span></span>
<span id="cb53-396"><a href="#cb53-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-397"><a href="#cb53-397" aria-hidden="true" tabindex="-1"></a>変数のうち、一度代入したら中身を変えられないもののことを**定数**と呼びます。他のプログラミング言語では定数を設定できるものが多いのですが、Rには定数を設定する方法はありません。変数の中身はいつでも置き換えできます。変数を置き換えると、置き換えに用いたオブジェクトの型・クラスに従い、変数の型・クラスも置き換わります。</span>
<span id="cb53-398"><a href="#cb53-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-399"><a href="#cb53-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="変数の置き換え"}</span></span>
<span id="cb53-400"><a href="#cb53-400" aria-hidden="true" tabindex="-1"></a><span class="in">dog &lt;- "inu" # 変数に文字列を代入</span></span>
<span id="cb53-401"><a href="#cb53-401" aria-hidden="true" tabindex="-1"></a><span class="in">mode(dog) # 型は文字列になる</span></span>
<span id="cb53-402"><a href="#cb53-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-403"><a href="#cb53-403" aria-hidden="true" tabindex="-1"></a><span class="in">dog &lt;- 1 # 変数に数値を入れ直す</span></span>
<span id="cb53-404"><a href="#cb53-404" aria-hidden="true" tabindex="-1"></a><span class="in">mode(dog) # 変数の型は数値になる</span></span>
<span id="cb53-405"><a href="#cb53-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-406"><a href="#cb53-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-407"><a href="#cb53-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-408"><a href="#cb53-408" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-409"><a href="#cb53-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-410"><a href="#cb53-410" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rにおけるデータ型の変換</span></span>
<span id="cb53-411"><a href="#cb53-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-412"><a href="#cb53-412" aria-hidden="true" tabindex="-1"></a>多くのプログラミング言語では、上記のように変数の型が変化するのを抑える仕組み（型宣言）を持っています。型宣言が必要な言語では、変数は厳密に型のチェックを受けます（静的型付け）。Rにはこのような仕組みがなく、代入されたオブジェクトに従って型が決まり、型チェックされることなくプログラムが実行されます。このような言語のことを動的型付けと呼びます。</span>
<span id="cb53-413"><a href="#cb53-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-414"><a href="#cb53-414" aria-hidden="true" tabindex="-1"></a>プログラム中で変数の型が変わると、バグの原因となります。Rでは、プログラムを書いているうちに変数の型が変化していて、正しい計算結果が得られない、ということがたびたび起きます。変数の型を常に確認しながらプログラミングした方がよいでしょう。</span>
<span id="cb53-415"><a href="#cb53-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-416"><a href="#cb53-416" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-417"><a href="#cb53-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-418"><a href="#cb53-418" aria-hidden="true" tabindex="-1"></a>定数とは少し異なりますが、Rでは代入なしに使える変数もあります。例えば、円周率のπは「<span class="in">`pi`</span>」という変数名で始めから登録されています。このような変数にも別のオブジェクトを代入することはできますが、後々混乱する原因となるため避けたほうがよいでしょう。</span>
<span id="cb53-419"><a href="#cb53-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-420"><a href="#cb53-420" aria-hidden="true" tabindex="-1"></a>また、統計手法を試すためのデータが代入されている変数（データセット）もたくさん設定されています。データセットについては、<span class="co">[</span><span class="ot">14章</span><span class="co">](.chapter14.html)</span>で詳しく説明します。</span>
<span id="cb53-421"><a href="#cb53-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-422"><a href="#cb53-422" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="あらかじめ設定されている変数"}</span></span>
<span id="cb53-423"><a href="#cb53-423" aria-hidden="true" tabindex="-1"></a><span class="in">pi # 円周率</span></span>
<span id="cb53-424"><a href="#cb53-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-425"><a href="#cb53-425" aria-hidden="true" tabindex="-1"></a><span class="in">letters # アルファベット（小文字）</span></span>
<span id="cb53-426"><a href="#cb53-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-427"><a href="#cb53-427" aria-hidden="true" tabindex="-1"></a><span class="in">LETTERS # アルファベット（大文字）</span></span>
<span id="cb53-428"><a href="#cb53-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-429"><a href="#cb53-429" aria-hidden="true" tabindex="-1"></a><span class="in">month.abb # 月（短縮表記）</span></span>
<span id="cb53-430"><a href="#cb53-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-431"><a href="#cb53-431" aria-hidden="true" tabindex="-1"></a><span class="in">month.name # 月</span></span>
<span id="cb53-432"><a href="#cb53-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-433"><a href="#cb53-433" aria-hidden="true" tabindex="-1"></a><span class="in">pi &lt;- 3 # piに3を代入する</span></span>
<span id="cb53-434"><a href="#cb53-434" aria-hidden="true" tabindex="-1"></a><span class="in">pi # piは3になってしまう</span></span>
<span id="cb53-435"><a href="#cb53-435" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-436"><a href="#cb53-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-437"><a href="#cb53-437" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb53-438"><a href="#cb53-438" aria-hidden="true" tabindex="-1"></a><span class="in">pi &lt;- 3.14159265358979 # 紛らわしいので元に戻しておく</span></span>
<span id="cb53-439"><a href="#cb53-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-440"><a href="#cb53-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-441"><a href="#cb53-441" aria-hidden="true" tabindex="-1"></a><span class="fu">### 値渡しと参照渡し</span></span>
<span id="cb53-442"><a href="#cb53-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-443"><a href="#cb53-443" aria-hidden="true" tabindex="-1"></a>Rでは、変数への代入が行われるたびに、その変数に対するメモリのアドレスを新規に作成し直す、という特徴があるため、他の言語で理解が必要となる値渡しと参照渡しの問題がほとんど起きません。</span>
<span id="cb53-444"><a href="#cb53-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-445"><a href="#cb53-445" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="値渡し"}</span></span>
<span id="cb53-446"><a href="#cb53-446" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 1 # xに1を代入</span></span>
<span id="cb53-447"><a href="#cb53-447" aria-hidden="true" tabindex="-1"></a><span class="in">y &lt;- x # yにxを代入（yとxはメモリを共有）</span></span>
<span id="cb53-448"><a href="#cb53-448" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 2 # xに2を代入（xのメモリのアドレスが変わる）</span></span>
<span id="cb53-449"><a href="#cb53-449" aria-hidden="true" tabindex="-1"></a><span class="in">x # xは新しいアドレスを参照（2が返ってくる）</span></span>
<span id="cb53-450"><a href="#cb53-450" aria-hidden="true" tabindex="-1"></a><span class="in">y # yは古いアドレスを参照（1が返ってくる）</span></span>
<span id="cb53-451"><a href="#cb53-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-452"><a href="#cb53-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-453"><a href="#cb53-453" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-454"><a href="#cb53-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-455"><a href="#cb53-455" aria-hidden="true" tabindex="-1"></a><span class="fu">## 参照渡し</span></span>
<span id="cb53-456"><a href="#cb53-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-457"><a href="#cb53-457" aria-hidden="true" tabindex="-1"></a>上のコードでは、参照渡しであれば、xの値が2になった場合、xとメモリを共有しているyも2になります。Rでは、代入時にメモリのアドレスが別に準備されるため（値渡し）、参照渡しが起こることは基本的にありません。この特徴はプログラミング初心者には優しいのですが、変数の変更のたびにメモリ上にオブジェクトを新規作成するため、Rの実行速度が遅い原因になります。</span>
<span id="cb53-458"><a href="#cb53-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-459"><a href="#cb53-459" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-460"><a href="#cb53-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-461"><a href="#cb53-461" aria-hidden="true" tabindex="-1"></a><span class="fu">## 便利なオブジェクト・クラス</span></span>
<span id="cb53-462"><a href="#cb53-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-463"><a href="#cb53-463" aria-hidden="true" tabindex="-1"></a>ここまでは、オブジェクトが一つだけの場合のデータ型や、変数について見てきました。しかし、統計で取り扱うのは、複数の数値や記録です。数値や記録がたくさんある場合には、数値や記録を一つづつ別々に取り扱うのは非効率です。多くのプログラミング言語では、このような複数の数値や記録を取り扱う専用のクラスを備えています。Rでは、複数の記録を取り扱うクラスとして、**ベクター（vector）**、**リスト（list）**、**データフレーム（data.frame）**、**行列（matrix）**の4つが用いられます。以下にこの4つについて簡単に説明します。それぞれのクラスについてはさらに別章で詳しく説明します。</span>
<span id="cb53-464"><a href="#cb53-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-465"><a href="#cb53-465" aria-hidden="true" tabindex="-1"></a><span class="fu">### ベクター（vector）</span></span>
<span id="cb53-466"><a href="#cb53-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-467"><a href="#cb53-467" aria-hidden="true" tabindex="-1"></a>Rで最も基本的なオブジェクトは、**ベクター（vector）**です。ベクターは同じ型を持つオブジェクトの集まりで、1次元の、つまり縦横の構造がないデータとして取り扱われます。ベクターは<span class="in">`c`</span>関数（<span class="in">`c`</span>はcombine、「結合する」の意味）で作成することができます。</span>
<span id="cb53-468"><a href="#cb53-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-469"><a href="#cb53-469" aria-hidden="true" tabindex="-1"></a>ベクターは同じ型を持つデータの集まりです。ですので、ベクターの要素に文字列が交じると、自動的にすべての要素が文字列になる、という特徴があります。</span>
<span id="cb53-470"><a href="#cb53-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-471"><a href="#cb53-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="ベクターの作成"}</span></span>
<span id="cb53-472"><a href="#cb53-472" aria-hidden="true" tabindex="-1"></a><span class="in">vec_n &lt;- c(1, 2, 3, 4) # 数値のベクター</span></span>
<span id="cb53-473"><a href="#cb53-473" aria-hidden="true" tabindex="-1"></a><span class="in">vec_c &lt;- c("dog", "cat", "pig", "horse") # 文字列のベクター</span></span>
<span id="cb53-474"><a href="#cb53-474" aria-hidden="true" tabindex="-1"></a><span class="in">vec_temp &lt;- c(1, 2, 3, "dog") # 文字列が交じると文字列のベクターになる</span></span>
<span id="cb53-475"><a href="#cb53-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-476"><a href="#cb53-476" aria-hidden="true" tabindex="-1"></a><span class="in">vec_n</span></span>
<span id="cb53-477"><a href="#cb53-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-478"><a href="#cb53-478" aria-hidden="true" tabindex="-1"></a><span class="in">vec_c</span></span>
<span id="cb53-479"><a href="#cb53-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-480"><a href="#cb53-480" aria-hidden="true" tabindex="-1"></a><span class="in">vec_temp</span></span>
<span id="cb53-481"><a href="#cb53-481" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-482"><a href="#cb53-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-483"><a href="#cb53-483" aria-hidden="true" tabindex="-1"></a>Rでは数値1つや文字列1つの要素も、ベクターとして取り扱われます。ですので、Rのオブジェクトの最小単位はベクターとなります。要素が1つであれば、<span class="in">`c`</span>関数でつなぎ合わせる必要はありません。</span>
<span id="cb53-484"><a href="#cb53-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-485"><a href="#cb53-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filenames="要素が1つだけのベクター"}</span></span>
<span id="cb53-486"><a href="#cb53-486" aria-hidden="true" tabindex="-1"></a><span class="in">1 # 数字1つでもベクター</span></span>
<span id="cb53-487"><a href="#cb53-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-488"><a href="#cb53-488" aria-hidden="true" tabindex="-1"></a><span class="in">"Hello world" # 文字列1つでもベクター</span></span>
<span id="cb53-489"><a href="#cb53-489" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-490"><a href="#cb53-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-491"><a href="#cb53-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-492"><a href="#cb53-492" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-493"><a href="#cb53-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-494"><a href="#cb53-494" aria-hidden="true" tabindex="-1"></a><span class="fu">## 本文でのvectorの表記について</span></span>
<span id="cb53-495"><a href="#cb53-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-496"><a href="#cb53-496" aria-hidden="true" tabindex="-1"></a>vectorはベクトルと表記されることもあります。この文書では、Rのオブジェクトをベクター、方向と大きさを持つ量のことをベクトルと表記することとします。</span>
<span id="cb53-497"><a href="#cb53-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-498"><a href="#cb53-498" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-499"><a href="#cb53-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-500"><a href="#cb53-500" aria-hidden="true" tabindex="-1"></a><span class="fu">#### ベクターに要素を追加する</span></span>
<span id="cb53-501"><a href="#cb53-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-502"><a href="#cb53-502" aria-hidden="true" tabindex="-1"></a>ベクターに要素を追加するために、<span class="in">`append`</span>関数というものが用意されています。しかし、上記の<span class="in">`c`</span>関数でもベクターに要素を追加することができます。</span>
<span id="cb53-503"><a href="#cb53-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-504"><a href="#cb53-504" aria-hidden="true" tabindex="-1"></a><span class="in">`append`</span>関数では位置を特定して要素を追加することができますが、位置を特定して要素を追加することはまれです。</span>
<span id="cb53-505"><a href="#cb53-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-506"><a href="#cb53-506" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="ベクターに要素を追加する"}</span></span>
<span id="cb53-507"><a href="#cb53-507" aria-hidden="true" tabindex="-1"></a><span class="in">append(vec_n, 5) # 上の数値ベクターに5を追加</span></span>
<span id="cb53-508"><a href="#cb53-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-509"><a href="#cb53-509" aria-hidden="true" tabindex="-1"></a><span class="in">c(vec_n, 5) # 上と同じ</span></span>
<span id="cb53-510"><a href="#cb53-510" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-511"><a href="#cb53-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-512"><a href="#cb53-512" aria-hidden="true" tabindex="-1"></a><span class="fu">#### ベクターの要素を取り出す</span></span>
<span id="cb53-513"><a href="#cb53-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-514"><a href="#cb53-514" aria-hidden="true" tabindex="-1"></a>ベクターの要素を取り出すときには、**インデックス**というものを用います。インデックスとは、ベクターなどの複数の値を取り扱うオブジェクトにおいて、値のある位置を示す数値のことです。インデックスはベクターの変数の後に、四角カッコ（<span class="in">`[ ]`</span>）に数値を入れることで指定することができます。Rではインデックスは1から始まります。</span>
<span id="cb53-515"><a href="#cb53-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-516"><a href="#cb53-516" aria-hidden="true" tabindex="-1"></a><span class="al">![図3：ベクターとインデックス](./image/vector_index.png)</span></span>
<span id="cb53-517"><a href="#cb53-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-518"><a href="#cb53-518" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="ベクターの要素をインデックスで取り出す"}</span></span>
<span id="cb53-519"><a href="#cb53-519" aria-hidden="true" tabindex="-1"></a><span class="in">vec &lt;- c(4, 3, 2, 1) # 数値のベクターを作成する</span></span>
<span id="cb53-520"><a href="#cb53-520" aria-hidden="true" tabindex="-1"></a><span class="in">vec[1] # インデックス1には4が入っている</span></span>
<span id="cb53-521"><a href="#cb53-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-522"><a href="#cb53-522" aria-hidden="true" tabindex="-1"></a><span class="in">vec[3] # インデックス3には2が入っている</span></span>
<span id="cb53-523"><a href="#cb53-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-524"><a href="#cb53-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-525"><a href="#cb53-525" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-526"><a href="#cb53-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-527"><a href="#cb53-527" aria-hidden="true" tabindex="-1"></a><span class="fu">## 他言語でのインデックス</span></span>
<span id="cb53-528"><a href="#cb53-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-529"><a href="#cb53-529" aria-hidden="true" tabindex="-1"></a>多くのプログラミング言語では、インデックスは0から始まります。インデックスが1から始まるプログラミング言語はまれです。</span>
<span id="cb53-530"><a href="#cb53-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-531"><a href="#cb53-531" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-532"><a href="#cb53-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-533"><a href="#cb53-533" aria-hidden="true" tabindex="-1"></a><span class="fu">#### ベクターの要素の置き換え</span></span>
<span id="cb53-534"><a href="#cb53-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-535"><a href="#cb53-535" aria-hidden="true" tabindex="-1"></a>ベクターの要素を置き換えるときには、置き換えたいベクターのインデックスを指定し、数値などを代入します。この時、数値のベクターの要素を文字列に置き換えると、ベクター全体が文字列に置き換わるので注意して下さい。</span>
<span id="cb53-536"><a href="#cb53-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-537"><a href="#cb53-537" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="ベクターの要素を置き換える"}</span></span>
<span id="cb53-538"><a href="#cb53-538" aria-hidden="true" tabindex="-1"></a><span class="in">vec # 数値のベクター</span></span>
<span id="cb53-539"><a href="#cb53-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-540"><a href="#cb53-540" aria-hidden="true" tabindex="-1"></a><span class="in">vec[3] &lt;- 5 # インデックス3の数値を5に置き換える</span></span>
<span id="cb53-541"><a href="#cb53-541" aria-hidden="true" tabindex="-1"></a><span class="in">vec # 3番めが2から5に置き換わる</span></span>
<span id="cb53-542"><a href="#cb53-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-543"><a href="#cb53-543" aria-hidden="true" tabindex="-1"></a><span class="in">vec[4] &lt;- "dog" # インデックス4の数値を"dog"（文字列）に置き換える</span></span>
<span id="cb53-544"><a href="#cb53-544" aria-hidden="true" tabindex="-1"></a><span class="in">vec # ベクターはすべて文字列になる</span></span>
<span id="cb53-545"><a href="#cb53-545" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-546"><a href="#cb53-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-547"><a href="#cb53-547" aria-hidden="true" tabindex="-1"></a><span class="fu">#### ベクターの要素を取り除く</span></span>
<span id="cb53-548"><a href="#cb53-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-549"><a href="#cb53-549" aria-hidden="true" tabindex="-1"></a>ベクターの要素を取り除くときには、**ベクターのインデックスをマイナス**で指定します。マイナスのインデックスで指定した要素は取り除かれ、ベクターの長さが短くなります。</span>
<span id="cb53-550"><a href="#cb53-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-551"><a href="#cb53-551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="ベクターの要素を取り除く"}</span></span>
<span id="cb53-552"><a href="#cb53-552" aria-hidden="true" tabindex="-1"></a><span class="in">vec</span></span>
<span id="cb53-553"><a href="#cb53-553" aria-hidden="true" tabindex="-1"></a><span class="in">vec[-3] # インデックス3の要素（5）を取り除く</span></span>
<span id="cb53-554"><a href="#cb53-554" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-555"><a href="#cb53-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-556"><a href="#cb53-556" aria-hidden="true" tabindex="-1"></a><span class="fu">#### ベクターの演算</span></span>
<span id="cb53-557"><a href="#cb53-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-558"><a href="#cb53-558" aria-hidden="true" tabindex="-1"></a>ベクターは、そのまま演算に用いることができます。数値のベクターに数値を足せば、ベクターのすべての要素に数値が足されます。文字列のベクターに<span class="in">`paste`</span>関数で文字を継ぎ足せば、すべての要素に文字が継ぎ足されます。</span>
<span id="cb53-559"><a href="#cb53-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-560"><a href="#cb53-560" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="ベクターを演算に用いる"}</span></span>
<span id="cb53-561"><a href="#cb53-561" aria-hidden="true" tabindex="-1"></a><span class="in">vec_n # 数値のベクター</span></span>
<span id="cb53-562"><a href="#cb53-562" aria-hidden="true" tabindex="-1"></a><span class="in">vec_n + 5 # 数値のベクターに5を足すと、すべての要素に5が足される</span></span>
<span id="cb53-563"><a href="#cb53-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-564"><a href="#cb53-564" aria-hidden="true" tabindex="-1"></a><span class="in">vec_c # 文字のベクター</span></span>
<span id="cb53-565"><a href="#cb53-565" aria-hidden="true" tabindex="-1"></a><span class="in">paste(vec_c, "is an animal.") # 文字のベクターにpaste関数で文字をつなぎ合わせる</span></span>
<span id="cb53-566"><a href="#cb53-566" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-567"><a href="#cb53-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-568"><a href="#cb53-568" aria-hidden="true" tabindex="-1"></a>ベクターについては<span class="co">[</span><span class="ot">11章</span><span class="co">](.chapter11.html)</span>でさらに詳しく説明します。</span>
<span id="cb53-569"><a href="#cb53-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-570"><a href="#cb53-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-571"><a href="#cb53-571" aria-hidden="true" tabindex="-1"></a><span class="fu">### 因子（factor）</span></span>
<span id="cb53-572"><a href="#cb53-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-573"><a href="#cb53-573" aria-hidden="true" tabindex="-1"></a>**因子（factor）**はR以外のプログラミング言語にはないクラスの一つです。因子とは、**カテゴリ**を表すときに用いるクラスです。カテゴリとは、例えば男性/女性や、成人/未成年、喫煙者/非喫煙者などの、そのデータの性質を表す要素のことを指します。統計では、例えば男性と女性で分けて数値を集計する、といったシチュエーションがたくさんあります。このように、カテゴリごとの集計や統計を行いやすくするために準備されているクラスが因子です。因子は<span class="in">`factor`</span>関数を用いて作成します。</span>
<span id="cb53-574"><a href="#cb53-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-575"><a href="#cb53-575" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="因子型（factor）"}</span></span>
<span id="cb53-576"><a href="#cb53-576" aria-hidden="true" tabindex="-1"></a><span class="in">factor("male") # 男性を示す因子</span></span>
<span id="cb53-577"><a href="#cb53-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-578"><a href="#cb53-578" aria-hidden="true" tabindex="-1"></a><span class="in">class(factor("male")) # 因子のクラスはfactor</span></span>
<span id="cb53-579"><a href="#cb53-579" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-580"><a href="#cb53-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-581"><a href="#cb53-581" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 因子のレベル（levels）</span></span>
<span id="cb53-582"><a href="#cb53-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-583"><a href="#cb53-583" aria-hidden="true" tabindex="-1"></a>因子には、**レベル（levels）**というアトリビュートが付いています。因子はカテゴリを示すものですので、通常1つだけで用いることはありません（カテゴリが1つだけであれば、カテゴリ分けする必要がありません）。つまり、因子は複数の要素を持つベクターとして作成することになります。このときのベクター内の各カテゴリ（男性・女性など）のことをレベルと呼びます。因子については<span class="co">[</span><span class="ot">10章</span><span class="co">](./chapter10.html)</span>で詳しく説明します。</span>
<span id="cb53-584"><a href="#cb53-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-585"><a href="#cb53-585" aria-hidden="true" tabindex="-1"></a><span class="fu">### リスト（list）</span></span>
<span id="cb53-586"><a href="#cb53-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-587"><a href="#cb53-587" aria-hidden="true" tabindex="-1"></a>統計の計算をしていると、複数の計算結果をまとめて取り扱いたい、という場合があります。ベクターは1次元のオブジェクトで、かつすべての要素のデータ型が同じですので、ベクターでは型や長さの違う、様々な結果を一度に取り扱うことはできません。このような、型の違うデータを一度に取り扱うときに用いられるのが、**リスト（list）**と呼ばれるオブジェクトです。リストは、様々なオブジェクトをまとめて一つにしたようなデータ構造を持ちます。リストを作成するときには、<span class="in">`list`</span>関数を用います。</span>
<span id="cb53-588"><a href="#cb53-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-589"><a href="#cb53-589" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="リスト（list）の作成"}</span></span>
<span id="cb53-590"><a href="#cb53-590" aria-hidden="true" tabindex="-1"></a><span class="in">vec1 &lt;- c(1, 2, 3, 4) # 数値のベクター</span></span>
<span id="cb53-591"><a href="#cb53-591" aria-hidden="true" tabindex="-1"></a><span class="in">vec2 &lt;- c("dog", "cat", "pig", "horse") # 文字列のベクター</span></span>
<span id="cb53-592"><a href="#cb53-592" aria-hidden="true" tabindex="-1"></a><span class="in">num &lt;- 10 # 数値</span></span>
<span id="cb53-593"><a href="#cb53-593" aria-hidden="true" tabindex="-1"></a><span class="in">char_temp &lt;- "Hello world" # 文字列</span></span>
<span id="cb53-594"><a href="#cb53-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-595"><a href="#cb53-595" aria-hidden="true" tabindex="-1"></a><span class="in">list_temp &lt;- list(vec1, vec2, num, char_temp) # 色々な要素をリストにまとめる</span></span>
<span id="cb53-596"><a href="#cb53-596" aria-hidden="true" tabindex="-1"></a><span class="in">list_temp # まとめたリストを表示</span></span>
<span id="cb53-597"><a href="#cb53-597" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-598"><a href="#cb53-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-599"><a href="#cb53-599" aria-hidden="true" tabindex="-1"></a><span class="fu">#### リストの要素を取り出す</span></span>
<span id="cb53-600"><a href="#cb53-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-601"><a href="#cb53-601" aria-hidden="true" tabindex="-1"></a>リストの要素を取り出す場合には、ベクターと同様にインデックスを用います。ただし、リストのインデックスは多層化、ネストされているため、呼び出しはやや複雑です。リストの要素を取り出すときには、四角カッコを2重にして用います（<span class="in">`[[ ]]`</span>）。<span class="in">`[[1]]`</span>で呼び出すと、リストの1番目の要素を呼び出すことになります。ベクターと同様に**`[1]`で呼び出すと、リストの1番目の要素を、リストとして呼び出す**ことになり、要素までたどり着けません。</span>
<span id="cb53-602"><a href="#cb53-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-603"><a href="#cb53-603" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="リストの要素を取り出す"}</span></span>
<span id="cb53-604"><a href="#cb53-604" aria-hidden="true" tabindex="-1"></a><span class="in">list_temp[[1]] # リストの1番目の要素を取り出す</span></span>
<span id="cb53-605"><a href="#cb53-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-606"><a href="#cb53-606" aria-hidden="true" tabindex="-1"></a><span class="in">list_temp[[2]] # 2番目の要素を取り出す</span></span>
<span id="cb53-607"><a href="#cb53-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-608"><a href="#cb53-608" aria-hidden="true" tabindex="-1"></a><span class="in">list_temp[1] # リストの1番目の要素を、リストとして取り出す</span></span>
<span id="cb53-609"><a href="#cb53-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-610"><a href="#cb53-610" aria-hidden="true" tabindex="-1"></a><span class="in">list_temp[[1]][1] # リストの1番目の要素（ベクター）の、1番目の要素を取り出す</span></span>
<span id="cb53-611"><a href="#cb53-611" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-612"><a href="#cb53-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-613"><a href="#cb53-613" aria-hidden="true" tabindex="-1"></a>リストについては、<span class="co">[</span><span class="ot">12章</span><span class="co">](./chapter12.html)</span>で詳しく説明します。</span>
<span id="cb53-614"><a href="#cb53-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-615"><a href="#cb53-615" aria-hidden="true" tabindex="-1"></a><span class="fu">### データフレーム（data.frame）</span></span>
<span id="cb53-616"><a href="#cb53-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-617"><a href="#cb53-617" aria-hidden="true" tabindex="-1"></a>**データフレーム（data.frame）**はExcelの表のように、行と列を持ち、長方形の形に整形された表形式のオブジェクトです。データフレームはExcelの表のように取り扱うことができます。</span>
<span id="cb53-618"><a href="#cb53-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-619"><a href="#cb53-619" aria-hidden="true" tabindex="-1"></a>データフレームは**縦方向（列）に同じデータ型**を持つ、ベクターの集合になっています。データフレームは横方向（行）には異なる型を持つことができますが、縦方向（列）は必ず同じ型を持つ必要があります。列はベクターですので、ベクターと同じように**数値の列の1つのデータを文字列に置き換えると、その列のデータが全て文字列に変換される**という特徴があります。</span>
<span id="cb53-620"><a href="#cb53-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-621"><a href="#cb53-621" aria-hidden="true" tabindex="-1"></a>データフレームは<span class="in">`data.frame`</span>関数を用いて作ることができます。データフレームを作成するときには、**「列名」=「列の要素」**という形でカッコの中に入力します。</span>
<span id="cb53-622"><a href="#cb53-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-623"><a href="#cb53-623" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="データフレームの作成"}</span></span>
<span id="cb53-624"><a href="#cb53-624" aria-hidden="true" tabindex="-1"></a><span class="in">d &lt;- data.frame( # データフレームを作成する（各列を同じ長さにする）</span></span>
<span id="cb53-625"><a href="#cb53-625" aria-hidden="true" tabindex="-1"></a><span class="in">  number = c(1, 2, 3, 4), # 1列目は数値</span></span>
<span id="cb53-626"><a href="#cb53-626" aria-hidden="true" tabindex="-1"></a><span class="in">  animal = c("dog", "cat", "pig", "horse"), # 2列目と3列目は動物と果物</span></span>
<span id="cb53-627"><a href="#cb53-627" aria-hidden="true" tabindex="-1"></a><span class="in">  fruits = c("apple", "orange", "banana", "grape")</span></span>
<span id="cb53-628"><a href="#cb53-628" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-629"><a href="#cb53-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-630"><a href="#cb53-630" aria-hidden="true" tabindex="-1"></a><span class="in">d # データフレームの表示</span></span>
<span id="cb53-631"><a href="#cb53-631" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-632"><a href="#cb53-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-633"><a href="#cb53-633" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-634"><a href="#cb53-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-635"><a href="#cb53-635" aria-hidden="true" tabindex="-1"></a><span class="fu">## データフレームとリスト</span></span>
<span id="cb53-636"><a href="#cb53-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-637"><a href="#cb53-637" aria-hidden="true" tabindex="-1"></a>データフレームは同じ長さのベクターをリストにしたものです。ですので、縦（列）はベクターとして同じ型を持ちます。データフレームはリストでもあるので、リストと同じように取り扱うこともできます。</span>
<span id="cb53-638"><a href="#cb53-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-639"><a href="#cb53-639" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-640"><a href="#cb53-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-641"><a href="#cb53-641" aria-hidden="true" tabindex="-1"></a><span class="fu">#### データフレームの次元（dimension）と行数・列数</span></span>
<span id="cb53-642"><a href="#cb53-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-643"><a href="#cb53-643" aria-hidden="true" tabindex="-1"></a>データフレームには、**次元（dimension）**という性質（アトリビュート、attribute）があります。この次元とは、行の数、列の数のことです。次元を取得する時には、<span class="in">`dim`</span>関数を用います。また、行の数、列の数はそれぞれ<span class="in">`nrow`</span>関数、<span class="in">`ncol`</span>関数で取得することができます。</span>
<span id="cb53-644"><a href="#cb53-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-645"><a href="#cb53-645" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="データフレームの次元を取得する"}</span></span>
<span id="cb53-646"><a href="#cb53-646" aria-hidden="true" tabindex="-1"></a><span class="in">dim(d) # 次元の取得（前が行の数、後ろが列の数）</span></span>
<span id="cb53-647"><a href="#cb53-647" aria-hidden="true" tabindex="-1"></a><span class="in">nrow(d) # 行の数</span></span>
<span id="cb53-648"><a href="#cb53-648" aria-hidden="true" tabindex="-1"></a><span class="in">ncol(d) # 列の数</span></span>
<span id="cb53-649"><a href="#cb53-649" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-650"><a href="#cb53-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-651"><a href="#cb53-651" aria-hidden="true" tabindex="-1"></a><span class="fu">#### データフレームのインデックス</span></span>
<span id="cb53-652"><a href="#cb53-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-653"><a href="#cb53-653" aria-hidden="true" tabindex="-1"></a>ベクターやリストと同じく、データフレームでもインデックスで要素を取り出すことができます。データフレームのインデックスは、**`[行, 列]`**という形で指定します。行も列も、1行目・1列目のインデックスが1となります。</span>
<span id="cb53-654"><a href="#cb53-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-655"><a href="#cb53-655" aria-hidden="true" tabindex="-1"></a>データフレームでは、行だけ、列だけをインデックスとして指定することもできます。**行だけをインデックスとして指定した時（`[行, ]`の形で指定）には、その行がデータフレームとして取り出されます**。一方、**列だけを指定した時（`[, 列]`の形で指定）には、その列がベクターとして取り出されます**。データフレームを行と列で取り出した場合には異なるものが取り出されるので、特にデータフレームの行を取り出す際には注意が必要です。</span>
<span id="cb53-656"><a href="#cb53-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-657"><a href="#cb53-657" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="データフレームの要素を取り出す"}</span></span>
<span id="cb53-658"><a href="#cb53-658" aria-hidden="true" tabindex="-1"></a><span class="in">d</span></span>
<span id="cb53-659"><a href="#cb53-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-660"><a href="#cb53-660" aria-hidden="true" tabindex="-1"></a><span class="in">d[2, 3] # 2行3列目のデータを取り出す</span></span>
<span id="cb53-661"><a href="#cb53-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-662"><a href="#cb53-662" aria-hidden="true" tabindex="-1"></a><span class="in">d[2, ] # 2行目を取り出す（データフレーム）</span></span>
<span id="cb53-663"><a href="#cb53-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-664"><a href="#cb53-664" aria-hidden="true" tabindex="-1"></a><span class="in">d[, 3] # 3列目を取り出す（ベクター）</span></span>
<span id="cb53-665"><a href="#cb53-665" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-666"><a href="#cb53-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-667"><a href="#cb53-667" aria-hidden="true" tabindex="-1"></a>データフレームの列は、列の名前を用いても取り出すことができます。列を取り出すときには、**\$（ドルマーク）に列名**を繋げて記述します。</span>
<span id="cb53-668"><a href="#cb53-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-669"><a href="#cb53-669" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="列を列名で呼び出す"}</span></span>
<span id="cb53-670"><a href="#cb53-670" aria-hidden="true" tabindex="-1"></a><span class="in">d$number # 1列目の列名はnumber</span></span>
<span id="cb53-671"><a href="#cb53-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-672"><a href="#cb53-672" aria-hidden="true" tabindex="-1"></a><span class="in">d$animal # 2列目の列名はanimal</span></span>
<span id="cb53-673"><a href="#cb53-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-674"><a href="#cb53-674" aria-hidden="true" tabindex="-1"></a><span class="in">d$fruits # 3列目の列名はfruits</span></span>
<span id="cb53-675"><a href="#cb53-675" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-676"><a href="#cb53-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-677"><a href="#cb53-677" aria-hidden="true" tabindex="-1"></a><span class="fu">#### データフレームの要素の置き換え</span></span>
<span id="cb53-678"><a href="#cb53-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-679"><a href="#cb53-679" aria-hidden="true" tabindex="-1"></a>データフレームの要素の置き換えは、ベクターと同じように、置き換えたい場所のインデックスを指定して、値を代入する形で行います。この時、その置き換える列の型と代入するデータの型が異なると、列の型がすべて置き換わることがあるので注意が必要です。</span>
<span id="cb53-680"><a href="#cb53-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-681"><a href="#cb53-681" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="データフレームの要素を置き換える"}</span></span>
<span id="cb53-682"><a href="#cb53-682" aria-hidden="true" tabindex="-1"></a><span class="in">d[2, 3] &lt;- "peach" # 2行3列目の要素をpeachに置き換える</span></span>
<span id="cb53-683"><a href="#cb53-683" aria-hidden="true" tabindex="-1"></a><span class="in">d # 2行3列目がpeachに置き換わる</span></span>
<span id="cb53-684"><a href="#cb53-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-685"><a href="#cb53-685" aria-hidden="true" tabindex="-1"></a><span class="in">d[2, 1] &lt;- "tomato" # 2行1列目をtomato（文字列）に置き換える</span></span>
<span id="cb53-686"><a href="#cb53-686" aria-hidden="true" tabindex="-1"></a><span class="in">d # 2行1列目がtomatoに置き換わる</span></span>
<span id="cb53-687"><a href="#cb53-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-688"><a href="#cb53-688" aria-hidden="true" tabindex="-1"></a><span class="in">mode(d[, 1]) # 1列目が文字列に置き換わる</span></span>
<span id="cb53-689"><a href="#cb53-689" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-690"><a href="#cb53-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-691"><a href="#cb53-691" aria-hidden="true" tabindex="-1"></a><span class="fu">#### データフレームの行・列の削除</span></span>
<span id="cb53-692"><a href="#cb53-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-693"><a href="#cb53-693" aria-hidden="true" tabindex="-1"></a>データフレームの行や列を削除する場合には、ベクターと同じように、インデックスをマイナスで与えます。インデックスをマイナスで指定することで、そのインデックスの行・列を取り除くことができます。ただし、データフレームの1つの要素だけを削除することはできません（指定した行・列がまるごと削除されます）。1つの要素だけを取り除く場合には、その要素のインデックスに対して<span class="in">`NA`</span>を代入するとよいでしょう。</span>
<span id="cb53-694"><a href="#cb53-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-695"><a href="#cb53-695" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="データフレームの行・列を削除する"}</span></span>
<span id="cb53-696"><a href="#cb53-696" aria-hidden="true" tabindex="-1"></a><span class="in">d # 元々のデータフレームは4行3列</span></span>
<span id="cb53-697"><a href="#cb53-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-698"><a href="#cb53-698" aria-hidden="true" tabindex="-1"></a><span class="in">d[-1, ] # 1行目を削除</span></span>
<span id="cb53-699"><a href="#cb53-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-700"><a href="#cb53-700" aria-hidden="true" tabindex="-1"></a><span class="in">d[, -1] # 1列目を削除</span></span>
<span id="cb53-701"><a href="#cb53-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-702"><a href="#cb53-702" aria-hidden="true" tabindex="-1"></a><span class="in">d[-2, -3] # 2行目と3列目を削除</span></span>
<span id="cb53-703"><a href="#cb53-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-704"><a href="#cb53-704" aria-hidden="true" tabindex="-1"></a><span class="in">d[2, 3] &lt;- NA # 1要素だけを取り除くときは、NAを代入する</span></span>
<span id="cb53-705"><a href="#cb53-705" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-706"><a href="#cb53-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-707"><a href="#cb53-707" aria-hidden="true" tabindex="-1"></a><span class="fu">### 行列（matrix）</span></span>
<span id="cb53-708"><a href="#cb53-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-709"><a href="#cb53-709" aria-hidden="true" tabindex="-1"></a>**行列（matrix）**は、線形代数（高校数学での行列計算）に用いるものです。行列は基本的には一つの型の要素からなる、行と列のあるオブジェクトです。行列はデータフレームとよく似ていますが、データフレームが列方向のベクターのリストであるのに対し、行列は次元（dimension）を持つベクターに近いものとなります。</span>
<span id="cb53-710"><a href="#cb53-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-711"><a href="#cb53-711" aria-hidden="true" tabindex="-1"></a>Rで行列を作成するときには、<span class="in">`matrix`</span>関数を用います。<span class="in">`matrix`</span>関数では、カッコの中に、ベクター、行数、列数を指定する数値を与えます。</span>
<span id="cb53-712"><a href="#cb53-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-713"><a href="#cb53-713" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="行列を作成する"}</span></span>
<span id="cb53-714"><a href="#cb53-714" aria-hidden="true" tabindex="-1"></a><span class="in"># 2行3列の行列</span></span>
<span id="cb53-715"><a href="#cb53-715" aria-hidden="true" tabindex="-1"></a><span class="in">mat &lt;- matrix(c(1,2,3,4,5,6), nrow=2, ncol=3) # nrowは行数、ncolは列数</span></span>
<span id="cb53-716"><a href="#cb53-716" aria-hidden="true" tabindex="-1"></a><span class="in">mat</span></span>
<span id="cb53-717"><a href="#cb53-717" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-718"><a href="#cb53-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-719"><a href="#cb53-719" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 行列の次元とインデックス</span></span>
<span id="cb53-720"><a href="#cb53-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-721"><a href="#cb53-721" aria-hidden="true" tabindex="-1"></a>行列の次元とインデックスは、データフレームとほぼ同じように取り扱うことができます。行列の行・列に名前をつけることもできます。従って、列を取り出すときに列名を利用することもできます。取り出したものはいずれもベクターになります。要素・行・列の削除もデータフレームと同じ方法で行います。</span>
<span id="cb53-722"><a href="#cb53-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-723"><a href="#cb53-723" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="行列の要素の取り出し"}</span></span>
<span id="cb53-724"><a href="#cb53-724" aria-hidden="true" tabindex="-1"></a><span class="in">mat[1, 1] # 1行1列目の要素</span></span>
<span id="cb53-725"><a href="#cb53-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-726"><a href="#cb53-726" aria-hidden="true" tabindex="-1"></a><span class="in">mat[1, ] # 1行目の要素（ベクター）</span></span>
<span id="cb53-727"><a href="#cb53-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-728"><a href="#cb53-728" aria-hidden="true" tabindex="-1"></a><span class="in">mat[, 1] # 1列目の要素（ベクター）</span></span>
<span id="cb53-729"><a href="#cb53-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-730"><a href="#cb53-730" aria-hidden="true" tabindex="-1"></a><span class="in">dim(mat) # matのdimensionを表示</span></span>
<span id="cb53-731"><a href="#cb53-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-732"><a href="#cb53-732" aria-hidden="true" tabindex="-1"></a><span class="in">nrow(mat) # matの行数を表示</span></span>
<span id="cb53-733"><a href="#cb53-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-734"><a href="#cb53-734" aria-hidden="true" tabindex="-1"></a><span class="in">ncol(mat) # matの列数を表示</span></span>
<span id="cb53-735"><a href="#cb53-735" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-736"><a href="#cb53-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-737"><a href="#cb53-737" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 行列の演算</span></span>
<span id="cb53-738"><a href="#cb53-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-739"><a href="#cb53-739" aria-hidden="true" tabindex="-1"></a>データフレームとは異なり、数値の行列は演算に用いることができます。行列（線形代数）の計算のために、Rには行列積、外積、クロネッカー積に対応する演算子が準備されています。</span>
<span id="cb53-740"><a href="#cb53-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-741"><a href="#cb53-741" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb53-742"><a href="#cb53-742" aria-hidden="true" tabindex="-1"></a><span class="in">d &lt;- data.frame(</span></span>
<span id="cb53-743"><a href="#cb53-743" aria-hidden="true" tabindex="-1"></a><span class="in">  operator = c("%*%", "%o%", "%x%"),</span></span>
<span id="cb53-744"><a href="#cb53-744" aria-hidden="true" tabindex="-1"></a><span class="in">  meaning = c("行列の積", "外積", "クロネッカー積")</span></span>
<span id="cb53-745"><a href="#cb53-745" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-746"><a href="#cb53-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-747"><a href="#cb53-747" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(d) &lt;- c("行列の演算子", "演算子の意味")</span></span>
<span id="cb53-748"><a href="#cb53-748" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(d, caption="表4：Rで使える行列の演算子")</span></span>
<span id="cb53-749"><a href="#cb53-749" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-750"><a href="#cb53-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-751"><a href="#cb53-751" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="行列の演算"}</span></span>
<span id="cb53-752"><a href="#cb53-752" aria-hidden="true" tabindex="-1"></a><span class="in">mat2 &lt;- matrix(c(1, 2, 3, 4, 5, 6), nrow=3, ncol=2)</span></span>
<span id="cb53-753"><a href="#cb53-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-754"><a href="#cb53-754" aria-hidden="true" tabindex="-1"></a><span class="in">mat %*% mat2 # 行列の積</span></span>
<span id="cb53-755"><a href="#cb53-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-756"><a href="#cb53-756" aria-hidden="true" tabindex="-1"></a><span class="in">mat %o% mat2 # 外積</span></span>
<span id="cb53-757"><a href="#cb53-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-758"><a href="#cb53-758" aria-hidden="true" tabindex="-1"></a><span class="in">mat %x% mat2 # クロネッカー積</span></span>
<span id="cb53-759"><a href="#cb53-759" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-760"><a href="#cb53-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-761"><a href="#cb53-761" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3次元以上のオブジェクト：array</span></span>
<span id="cb53-762"><a href="#cb53-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-763"><a href="#cb53-763" aria-hidden="true" tabindex="-1"></a>行列はベクターに次元を2つ（行と列）与えたものですが、3次元以上の次元を与えることもできます。このような3次元以上のデータを取り扱う場合には、arrayというオブジェクトを使用します。arrayは<span class="in">`array`</span>関数で作成することができ、各次元の数（行数、列数に当たるもの）をベクターで与えます。統計やデータ解析で3次元以上のデータを取り扱うことは比較的まれです。</span>
<span id="cb53-764"><a href="#cb53-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-765"><a href="#cb53-765" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="arrayを作成する"}</span></span>
<span id="cb53-766"><a href="#cb53-766" aria-hidden="true" tabindex="-1"></a><span class="in">array(c(1, 2, 3, 4, 5, 6, 7, 8), dim = c(2, 2, 2)) # 2行2列2シートの行列</span></span>
<span id="cb53-767"><a href="#cb53-767" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-768"><a href="#cb53-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-769"><a href="#cb53-769" aria-hidden="true" tabindex="-1"></a><span class="fu">### その他のオブジェクト</span></span>
<span id="cb53-770"><a href="#cb53-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-771"><a href="#cb53-771" aria-hidden="true" tabindex="-1"></a>Rに基本的に備わっているオブジェクトとして、ベクター、リスト、データフレーム、行列の他に、**時系列（time series、ts）**というオブジェクトがあります。時系列とは、例えば株価や為替相場の時間変化のような、時間とともに定期的に記録されたデータのことを指します。時系列はクラスとして設定されており、中身はベクターです。</span>
<span id="cb53-772"><a href="#cb53-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-773"><a href="#cb53-773" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="時系列データ（ts）"}</span></span>
<span id="cb53-774"><a href="#cb53-774" aria-hidden="true" tabindex="-1"></a><span class="in">co2[1:10] # 1959年からのCO2濃度の推移</span></span>
<span id="cb53-775"><a href="#cb53-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-776"><a href="#cb53-776" aria-hidden="true" tabindex="-1"></a><span class="in">class(co2) # クラスはts</span></span>
<span id="cb53-777"><a href="#cb53-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-778"><a href="#cb53-778" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(co2) # 型はdouble</span></span>
<span id="cb53-779"><a href="#cb53-779" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-780"><a href="#cb53-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-781"><a href="#cb53-781" aria-hidden="true" tabindex="-1"></a><span class="fu">## 関数</span></span>
<span id="cb53-782"><a href="#cb53-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-783"><a href="#cb53-783" aria-hidden="true" tabindex="-1"></a>ここまでに、<span class="in">`mode`</span>関数、<span class="in">`typeof`</span>関数、<span class="in">`class`</span>関数、<span class="in">`c`</span>関数、<span class="in">`list`</span>関数、<span class="in">`data.frame`</span>関数、<span class="in">`matrix`</span>関数など、様々な関数を用いて、オブジェクトの型やクラスを調べたり、ベクターやリストなどを作成してきました。R言語の**関数**とは、**オブジェクトに一定の演算を加えて、結果を表示するオブジェクト**のことを指します。関数のクラスは**function**（関数）、型も**function**です。</span>
<span id="cb53-784"><a href="#cb53-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-785"><a href="#cb53-785" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="オブジェクトとしての関数"}</span></span>
<span id="cb53-786"><a href="#cb53-786" aria-hidden="true" tabindex="-1"></a><span class="in">class(typeof) # 関数のクラスはfunction</span></span>
<span id="cb53-787"><a href="#cb53-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-788"><a href="#cb53-788" aria-hidden="true" tabindex="-1"></a><span class="in">mode(typeof) # 関数の型もfunction</span></span>
<span id="cb53-789"><a href="#cb53-789" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-790"><a href="#cb53-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-791"><a href="#cb53-791" aria-hidden="true" tabindex="-1"></a>Rでの関数は、**引数**と呼ばれる、カッコの中に記載されたオブジェクトに対して、一定の演算を加えるものです。Excelの関数をイメージしていただければ理解しやすいと思います。関数のイメージを図にすると、以下のようになります。</span>
<span id="cb53-792"><a href="#cb53-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-793"><a href="#cb53-793" aria-hidden="true" tabindex="-1"></a><span class="al">![図4：関数のイメージ図](./image/function_image.png)</span></span>
<span id="cb53-794"><a href="#cb53-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-795"><a href="#cb53-795" aria-hidden="true" tabindex="-1"></a>Rには<span class="in">`mean`</span>関数という、数値の平均値を表示してくれる関数があります。上の図では、ベクターである、<span class="in">`c(5, 10, 15)`</span>を引数として与えると、<span class="in">`mean`</span>関数は引数を読み取って平均値を計算し、平均値である10を表示してくれます。この、表示される関数の計算結果のことを、**返り値**と呼びます。</span>
<span id="cb53-796"><a href="#cb53-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-797"><a href="#cb53-797" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="関数、引数と返り値"}</span></span>
<span id="cb53-798"><a href="#cb53-798" aria-hidden="true" tabindex="-1"></a><span class="in">vec &lt;- c(5, 10, 15) # 引数とするベクター</span></span>
<span id="cb53-799"><a href="#cb53-799" aria-hidden="true" tabindex="-1"></a><span class="in">mean(vec) # mean関数に引数vecを与えると、10が返り値として返ってくる</span></span>
<span id="cb53-800"><a href="#cb53-800" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-801"><a href="#cb53-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-802"><a href="#cb53-802" aria-hidden="true" tabindex="-1"></a>Rには、上記の関数以外にも、数値や文字列、データフレームを演算するための関数を数多く備えています。</span>
<span id="cb53-803"><a href="#cb53-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-804"><a href="#cb53-804" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="代表的な関数と、関数としての演算子"}</span></span>
<span id="cb53-805"><a href="#cb53-805" aria-hidden="true" tabindex="-1"></a><span class="in">sd(vec) # 標準偏差を計算する関数</span></span>
<span id="cb53-806"><a href="#cb53-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-807"><a href="#cb53-807" aria-hidden="true" tabindex="-1"></a><span class="in">median(vec) # 中央値を計算する関数</span></span>
<span id="cb53-808"><a href="#cb53-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-809"><a href="#cb53-809" aria-hidden="true" tabindex="-1"></a><span class="in">log10(vec) # 常用対数を計算する関数</span></span>
<span id="cb53-810"><a href="#cb53-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-811"><a href="#cb53-811" aria-hidden="true" tabindex="-1"></a><span class="in">exp(vec) # ネイピア数の指数を計算する関数</span></span>
<span id="cb53-812"><a href="#cb53-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-813"><a href="#cb53-813" aria-hidden="true" tabindex="-1"></a><span class="in">mode(`+`) # 演算子の+の型はfunction（関数）</span></span>
<span id="cb53-814"><a href="#cb53-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-815"><a href="#cb53-815" aria-hidden="true" tabindex="-1"></a><span class="in">`+`(2, 3) # 関数なので、引数を2つ取ると足し算になる</span></span>
<span id="cb53-816"><a href="#cb53-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-817"><a href="#cb53-817" aria-hidden="true" tabindex="-1"></a><span class="in">mode(`[`) # インデックスも関数</span></span>
<span id="cb53-818"><a href="#cb53-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-819"><a href="#cb53-819" aria-hidden="true" tabindex="-1"></a><span class="in">mode(`if`) # if（条件分岐）も関数</span></span>
<span id="cb53-820"><a href="#cb53-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-821"><a href="#cb53-821" aria-hidden="true" tabindex="-1"></a><span class="in">mode(`for`) # for（繰り返し文）も関数</span></span>
<span id="cb53-822"><a href="#cb53-822" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-823"><a href="#cb53-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-824"><a href="#cb53-824" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip  collapse="true"}</span>
<span id="cb53-825"><a href="#cb53-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-826"><a href="#cb53-826" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rでの関数</span></span>
<span id="cb53-827"><a href="#cb53-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-828"><a href="#cb53-828" aria-hidden="true" tabindex="-1"></a>Rでは、演算子やインデックス指定、条件分岐、繰り返し文も関数です。</span>
<span id="cb53-829"><a href="#cb53-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-830"><a href="#cb53-830" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-831"><a href="#cb53-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-832"><a href="#cb53-832" aria-hidden="true" tabindex="-1"></a>このように、Rでは多くの演算を関数によって処理しています。この性質から、Rは**関数型言語**であるとされています。</span>
<span id="cb53-833"><a href="#cb53-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-834"><a href="#cb53-834" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-835"><a href="#cb53-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-836"><a href="#cb53-836" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rと関数型言語</span></span>
<span id="cb53-837"><a href="#cb53-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-838"><a href="#cb53-838" aria-hidden="true" tabindex="-1"></a>正確には、Rは厳密な意味では関数型言語ではないように思います。関数型言語には<span class="co">[</span><span class="ot">Haskell</span><span class="co">](https://www.haskell.org/)</span>などがありますが、関数型言語では再帰的関数（関数内で関数を呼び出す）ような処理を用いて繰り返し計算を避ける場合が多く、Rのような逐次型処理に慣れていると読みにくいコードをよく書くイメージがあります。Rでも再帰的関数を用いることはできますが、頻繁には使用されません。</span>
<span id="cb53-839"><a href="#cb53-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-840"><a href="#cb53-840" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-841"><a href="#cb53-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-842"><a href="#cb53-842" aria-hidden="true" tabindex="-1"></a><span class="fu">### 関数を自作する</span></span>
<span id="cb53-843"><a href="#cb53-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-844"><a href="#cb53-844" aria-hidden="true" tabindex="-1"></a>どのようなプログラミング言語にも、関数を自作する方法が備わっています。Rでは、<span class="in">`function`</span>文を用いて関数を自作することができます。関数を変数に代入して用いるのが一般的な関数の作成方法です。<span class="in">`function`</span>文の書き方は以下の通りです。</span>
<span id="cb53-845"><a href="#cb53-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-846"><a href="#cb53-846" aria-hidden="true" tabindex="-1"></a>**関数名 \&lt;- function(引数群){引数を使った処理}**</span>
<span id="cb53-847"><a href="#cb53-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-848"><a href="#cb53-848" aria-hidden="true" tabindex="-1"></a>関数の返り値は、<span class="in">`return`</span>関数を使って明示することもできますが、単に最後に記載したオブジェクトを返り値とすることもできます。</span>
<span id="cb53-849"><a href="#cb53-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-850"><a href="#cb53-850" aria-hidden="true" tabindex="-1"></a>また、Rでは<span class="in">`function`</span>と書く代わりに、<span class="in">`\`</span>（バックスラッシュ）を<span class="in">`function`</span>の代わりに用いることもできます。</span>
<span id="cb53-851"><a href="#cb53-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-852"><a href="#cb53-852" aria-hidden="true" tabindex="-1"></a>作成した関数を用いて演算するときには、「関数名(引数)」という形で表記します。これは<span class="in">`mode`</span>関数や<span class="in">`class`</span>関数の使い方と同じです。</span>
<span id="cb53-853"><a href="#cb53-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-854"><a href="#cb53-854" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="関数を自作する"}</span></span>
<span id="cb53-855"><a href="#cb53-855" aria-hidden="true" tabindex="-1"></a><span class="in"># 引数をそのまま帰す関数</span></span>
<span id="cb53-856"><a href="#cb53-856" aria-hidden="true" tabindex="-1"></a><span class="in">return_selfx &lt;- function(x){return(x)} # 返り値をreturn関数で表示</span></span>
<span id="cb53-857"><a href="#cb53-857" aria-hidden="true" tabindex="-1"></a><span class="in">return_selfy &lt;- function(y){y} # 最後に返り値を書く</span></span>
<span id="cb53-858"><a href="#cb53-858" aria-hidden="true" tabindex="-1"></a><span class="in">return_selfz &lt;- \(z){z} # functionの代わりにバックスラッシュを用いる</span></span>
<span id="cb53-859"><a href="#cb53-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-860"><a href="#cb53-860" aria-hidden="true" tabindex="-1"></a><span class="in"># どれも同じ演算をする関数になる</span></span>
<span id="cb53-861"><a href="#cb53-861" aria-hidden="true" tabindex="-1"></a><span class="in">return_selfx(1)</span></span>
<span id="cb53-862"><a href="#cb53-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-863"><a href="#cb53-863" aria-hidden="true" tabindex="-1"></a><span class="in">return_selfy(1)</span></span>
<span id="cb53-864"><a href="#cb53-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-865"><a href="#cb53-865" aria-hidden="true" tabindex="-1"></a><span class="in">return_selfz(1)</span></span>
<span id="cb53-866"><a href="#cb53-866" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-867"><a href="#cb53-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-868"><a href="#cb53-868" aria-hidden="true" tabindex="-1"></a>実際に関数を作るときには、もう少し複雑な処理を<span class="in">`{ }`</span>（中かっこ）の中に書きます。処理は一つ一つ改行しながら書き、最後に返り値を書きます。中かっこの中で改行を行っても問題ありませんが、引数のかっこ（「<span class="in">`)`</span>」）の後にかっこの前側（「<span class="in">`{`</span>」）が記載されている必要があります。</span>
<span id="cb53-869"><a href="#cb53-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-870"><a href="#cb53-870" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="関数内の処理の書き方"}</span></span>
<span id="cb53-871"><a href="#cb53-871" aria-hidden="true" tabindex="-1"></a><span class="in"># sum2関数を作成する</span></span>
<span id="cb53-872"><a href="#cb53-872" aria-hidden="true" tabindex="-1"></a><span class="in">sum2 &lt;- function(x, y, z){ # 引数はx、y、zの3つ</span></span>
<span id="cb53-873"><a href="#cb53-873" aria-hidden="true" tabindex="-1"></a><span class="in">  sum_of_xyz &lt;- x + y + z # 引数を足し算する</span></span>
<span id="cb53-874"><a href="#cb53-874" aria-hidden="true" tabindex="-1"></a><span class="in">  sum_of_xyz # 足し算したものを返り値にする</span></span>
<span id="cb53-875"><a href="#cb53-875" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb53-876"><a href="#cb53-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-877"><a href="#cb53-877" aria-hidden="true" tabindex="-1"></a><span class="in">sum2(x = 1, y = 2, z = 3)</span></span>
<span id="cb53-878"><a href="#cb53-878" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-879"><a href="#cb53-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-880"><a href="#cb53-880" aria-hidden="true" tabindex="-1"></a>上の例のように、引数を指定するときには、引数の種類を明示的に記載することもできます。明示的に記載する場合には、**「引数名=値」**という形で書きます。引数名を省略した場合には、記載した引数の順番に従って、引数が用いられます。</span>
<span id="cb53-881"><a href="#cb53-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-882"><a href="#cb53-882" aria-hidden="true" tabindex="-1"></a>関数を作成するときには、**引数のデフォルト値**を設定しておくこともできます。デフォルト値が設定されている関数では、その引数を入力しなかったときには、自動的に引数にデフォルト値が入ります。</span>
<span id="cb53-883"><a href="#cb53-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-884"><a href="#cb53-884" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="引数のデフォルト値と省略", error=TRUE}</span></span>
<span id="cb53-885"><a href="#cb53-885" aria-hidden="true" tabindex="-1"></a><span class="in">sum3 &lt;- function(x, y = 1){ # yのデフォルト値を1とする</span></span>
<span id="cb53-886"><a href="#cb53-886" aria-hidden="true" tabindex="-1"></a><span class="in">  return(x + y)</span></span>
<span id="cb53-887"><a href="#cb53-887" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb53-888"><a href="#cb53-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-889"><a href="#cb53-889" aria-hidden="true" tabindex="-1"></a><span class="in">sum3(x = 1, y = 2) # 引数を明示的に記載</span></span>
<span id="cb53-890"><a href="#cb53-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-891"><a href="#cb53-891" aria-hidden="true" tabindex="-1"></a><span class="in">sum3(1, 2) # xに1、yに2が入る</span></span>
<span id="cb53-892"><a href="#cb53-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-893"><a href="#cb53-893" aria-hidden="true" tabindex="-1"></a><span class="in">sum3(1) # 引数yが省略されているので、デフォルト値（1）が用いられる</span></span>
<span id="cb53-894"><a href="#cb53-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-895"><a href="#cb53-895" aria-hidden="true" tabindex="-1"></a><span class="in">sum3(y = 1) # xにはデフォルトが設定されていないので、省略できない</span></span>
<span id="cb53-896"><a href="#cb53-896" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-897"><a href="#cb53-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-898"><a href="#cb53-898" aria-hidden="true" tabindex="-1"></a><span class="fu">## 型・クラスの確認と変換</span></span>
<span id="cb53-899"><a href="#cb53-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-900"><a href="#cb53-900" aria-hidden="true" tabindex="-1"></a><span class="fu">### 型・クラスの確認：is.関数群</span></span>
<span id="cb53-901"><a href="#cb53-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-902"><a href="#cb53-902" aria-hidden="true" tabindex="-1"></a>Rでは、型やクラスを確認するための関数として、<span class="in">`typeof`</span>関数・<span class="in">`mode`</span>関数・<span class="in">`class`</span>関数以外に、<span class="in">`is.`</span>関数というものを備えています。<span class="in">`is.`</span>関数を用いると、オブジェクトの型が、ある型と一致しているかどうかを確認することができます。引数が数値であるかどうかは、<span class="in">`is.numeric`</span>関数、<span class="in">`is.integer`</span>関数、<span class="in">`is.double`</span>関数を用いて確認することができます。例えば**`is.numeric(1)`は`TRUE`**を返し、**`is.numeric("dog")`は`FALSE`**を返します。この<span class="in">`is.`</span>関数には、文字列や<span class="in">`NA`</span>、<span class="in">`NaN`</span>等を確認する関数もあります。<span class="in">`is.`</span>関数を以下の表2に示します。</span>
<span id="cb53-903"><a href="#cb53-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-904"><a href="#cb53-904" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb53-905"><a href="#cb53-905" aria-hidden="true" tabindex="-1"></a><span class="in">d &lt;- data.frame(</span></span>
<span id="cb53-906"><a href="#cb53-906" aria-hidden="true" tabindex="-1"></a><span class="in">  isfunc = c("is.numeric(x)", "is.integer(x)", "is.double(x)", "is.complex", "is.character(x)", "is.logical(x)", "is.factor(x)", "is.atomic(x)", "is.list(x)", "is.matrix(x)", "is.data.frame(x)", "is.na(x)", "is.nan(x)", "is.null(x)", "is.infinite(x)"),</span></span>
<span id="cb53-907"><a href="#cb53-907" aria-hidden="true" tabindex="-1"></a><span class="in">  meaning = c("数値型", "整数型", "double型", "複素数型", "文字列型", "真偽型", "因子型", "ベクター", "リスト", "マトリックス", "データフレーム", "NA", "NaN", "NULL", "無限大")</span></span>
<span id="cb53-908"><a href="#cb53-908" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-909"><a href="#cb53-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-910"><a href="#cb53-910" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(d) &lt;- c("is.関数名", "チェックする型")</span></span>
<span id="cb53-911"><a href="#cb53-911" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(d, caption="表2：xの型の確認に用いる関数")</span></span>
<span id="cb53-912"><a href="#cb53-912" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-913"><a href="#cb53-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-914"><a href="#cb53-914" aria-hidden="true" tabindex="-1"></a><span class="in">`is.`</span>関数の中では、<span class="in">`is.na`</span>関数の使用頻度が高いです。<span class="in">`is.na`</span>関数を用いると、ベクターやデータフレームからNAを含む要素をうまく取り除くことができます。</span>
<span id="cb53-915"><a href="#cb53-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-916"><a href="#cb53-916" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="is.関数群"}</span></span>
<span id="cb53-917"><a href="#cb53-917" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.numeric(1), is.numeric("1")) # 文字列（"1"）は数値ではない</span></span>
<span id="cb53-918"><a href="#cb53-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-919"><a href="#cb53-919" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.integer(1L), is.integer(1)) # Lが付いていないとdoubleになる</span></span>
<span id="cb53-920"><a href="#cb53-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-921"><a href="#cb53-921" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.double(1), is.double(1L)) # Lが付いているとintegerになる</span></span>
<span id="cb53-922"><a href="#cb53-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-923"><a href="#cb53-923" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.complex(1+1i), is.complex(1+1)) # iがあると複素数になる</span></span>
<span id="cb53-924"><a href="#cb53-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-925"><a href="#cb53-925" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.character("dog"), is.character(1)) # 数値は文字列ではない</span></span>
<span id="cb53-926"><a href="#cb53-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-927"><a href="#cb53-927" aria-hidden="true" tabindex="-1"></a><span class="in"># 0はFALSE扱いされるが、logicalではない</span></span>
<span id="cb53-928"><a href="#cb53-928" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.logical(T), is.logical(0), is.logical("dog")) </span></span>
<span id="cb53-929"><a href="#cb53-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-930"><a href="#cb53-930" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.factor(factor(1)), is.factor(1))</span></span>
<span id="cb53-931"><a href="#cb53-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-932"><a href="#cb53-932" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.atomic(1), is.atomic(list(1))) # ベクターはTRUE、リストはFALSE</span></span>
<span id="cb53-933"><a href="#cb53-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-934"><a href="#cb53-934" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.vector(1), is.vector(list(1))) # is.vectorもあるが、リストもTRUEになる</span></span>
<span id="cb53-935"><a href="#cb53-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-936"><a href="#cb53-936" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.list(list(1)), is.list(1))# ベクターはFALSE、リストはTRUE</span></span>
<span id="cb53-937"><a href="#cb53-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-938"><a href="#cb53-938" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.matrix(matrix(1, ncol=1)), is.matrix(1))</span></span>
<span id="cb53-939"><a href="#cb53-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-940"><a href="#cb53-940" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.data.frame(data.frame(1)), is.data.frame(list(1))) # リストはFALSE</span></span>
<span id="cb53-941"><a href="#cb53-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-942"><a href="#cb53-942" aria-hidden="true" tabindex="-1"></a><span class="in"># NAとNaNはNA扱い、NULLは無いもの扱い</span></span>
<span id="cb53-943"><a href="#cb53-943" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.na(NA), is.na(1), is.na(NaN), is.na(Inf), is.na(NULL)) </span></span>
<span id="cb53-944"><a href="#cb53-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-945"><a href="#cb53-945" aria-hidden="true" tabindex="-1"></a><span class="in"># NULLは無いもの扱い</span></span>
<span id="cb53-946"><a href="#cb53-946" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.nan(NA), is.nan(1), is.nan(NaN), is.nan(Inf), is.nan(NULL))</span></span>
<span id="cb53-947"><a href="#cb53-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-948"><a href="#cb53-948" aria-hidden="true" tabindex="-1"></a><span class="in"># NULLを評価する</span></span>
<span id="cb53-949"><a href="#cb53-949" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.null(NA), is.null(1), is.null(NaN), is.null(Inf), is.null(NULL)) </span></span>
<span id="cb53-950"><a href="#cb53-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-951"><a href="#cb53-951" aria-hidden="true" tabindex="-1"></a><span class="in"># NULLは無いもの扱い</span></span>
<span id="cb53-952"><a href="#cb53-952" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.infinite(NA), is.infinite(1), is.infinite(NaN), is.infinite(Inf), is.infinite(NULL)) </span></span>
<span id="cb53-953"><a href="#cb53-953" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-954"><a href="#cb53-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-955"><a href="#cb53-955" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-956"><a href="#cb53-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-957"><a href="#cb53-957" aria-hidden="true" tabindex="-1"></a><span class="fu">## atomicなベクター</span></span>
<span id="cb53-958"><a href="#cb53-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-959"><a href="#cb53-959" aria-hidden="true" tabindex="-1"></a>ベクターは<span class="in">`is.atomic`</span>関数で評価します。これは、ベクターのことをatomic vectorと呼ぶためです。atomic vectorはvectorと同じ意味を持ちます。エラーやメッセージには時々このatomic vectorという表記が出てきますが、これは通常のベクターのことを述べているだけで、atomic vectorという特別なものがあるわけではありません。</span>
<span id="cb53-960"><a href="#cb53-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-961"><a href="#cb53-961" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-962"><a href="#cb53-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-963"><a href="#cb53-963" aria-hidden="true" tabindex="-1"></a><span class="fu">### 型・クラスの変換：as.関数群</span></span>
<span id="cb53-964"><a href="#cb53-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-965"><a href="#cb53-965" aria-hidden="true" tabindex="-1"></a><span class="in">`is.`</span>関数はデータのクラスや型をチェックし、論理型を返す関数です。Rには、関数名がよく似た<span class="in">`as.`</span>関数があります。<span class="in">`as.`</span>関数は、引数の型を指定した型に変換する関数です。例えば、<span class="in">`as.numeric`</span>関数は引数をnumericに変換する関数です。<span class="in">`as.`</span>関数の一覧を以下の表3に示します。</span>
<span id="cb53-966"><a href="#cb53-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-967"><a href="#cb53-967" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb53-968"><a href="#cb53-968" aria-hidden="true" tabindex="-1"></a><span class="in">d &lt;- data.frame(</span></span>
<span id="cb53-969"><a href="#cb53-969" aria-hidden="true" tabindex="-1"></a><span class="in">  asfunc = c("as.numeric(x)", "as.integer(x)", "as.double(x)", "as.complex", "as.character(x)", "as.logical(x)", "as.factor(x)", "as.Date", "as.POSIXct", "as.POSIXlt", "as.list(x)", "as.matrix(x)", "as.data.frame(x)", "as.null(x)"),</span></span>
<span id="cb53-970"><a href="#cb53-970" aria-hidden="true" tabindex="-1"></a><span class="in">  meaning = c("数値型に変換", "整数型に変換", "double型に変換", "複素数型に変換", "文字列型に変換", "真偽型に変換", "因子型に変換", "日時型に変換", "POSIXct型に変換", "POSIXlt型に変換", "リストに変換", "マトリックスに変換", "データフレームに変換", "NULLに変換")</span></span>
<span id="cb53-971"><a href="#cb53-971" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb53-972"><a href="#cb53-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-973"><a href="#cb53-973" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(d) &lt;- c("as.関数名", "変換する型")</span></span>
<span id="cb53-974"><a href="#cb53-974" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(d, caption="表3：xの型の変換に用いる関数")</span></span>
<span id="cb53-975"><a href="#cb53-975" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-976"><a href="#cb53-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-977"><a href="#cb53-977" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="as.関数群"}</span></span>
<span id="cb53-978"><a href="#cb53-978" aria-hidden="true" tabindex="-1"></a><span class="in">as.numeric(TRUE)</span></span>
<span id="cb53-979"><a href="#cb53-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-980"><a href="#cb53-980" aria-hidden="true" tabindex="-1"></a><span class="in">as.integer(1.1)</span></span>
<span id="cb53-981"><a href="#cb53-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-982"><a href="#cb53-982" aria-hidden="true" tabindex="-1"></a><span class="in">as.double(1L)</span></span>
<span id="cb53-983"><a href="#cb53-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-984"><a href="#cb53-984" aria-hidden="true" tabindex="-1"></a><span class="in">as.complex(1)</span></span>
<span id="cb53-985"><a href="#cb53-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-986"><a href="#cb53-986" aria-hidden="true" tabindex="-1"></a><span class="in">as.character(1)</span></span>
<span id="cb53-987"><a href="#cb53-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-988"><a href="#cb53-988" aria-hidden="true" tabindex="-1"></a><span class="in">c(as.logical(1), as.logical(0))</span></span>
<span id="cb53-989"><a href="#cb53-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-990"><a href="#cb53-990" aria-hidden="true" tabindex="-1"></a><span class="in">as.factor(c("dog", "cat"))</span></span>
<span id="cb53-991"><a href="#cb53-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-992"><a href="#cb53-992" aria-hidden="true" tabindex="-1"></a><span class="in">as.Date("2022-02-22") # わかりにくいが、日付型になっている</span></span>
<span id="cb53-993"><a href="#cb53-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-994"><a href="#cb53-994" aria-hidden="true" tabindex="-1"></a><span class="in"># わかりにくいが、日時型になっている</span></span>
<span id="cb53-995"><a href="#cb53-995" aria-hidden="true" tabindex="-1"></a><span class="in">as.POSIXct("2022-02-22 15:00:00")</span></span>
<span id="cb53-996"><a href="#cb53-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-997"><a href="#cb53-997" aria-hidden="true" tabindex="-1"></a><span class="in">as.POSIXlt("2022-02-22 15:00:00")</span></span>
<span id="cb53-998"><a href="#cb53-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-999"><a href="#cb53-999" aria-hidden="true" tabindex="-1"></a><span class="in">as.list(1)</span></span>
<span id="cb53-1000"><a href="#cb53-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1001"><a href="#cb53-1001" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(list(1, 1))</span></span>
<span id="cb53-1002"><a href="#cb53-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1003"><a href="#cb53-1003" aria-hidden="true" tabindex="-1"></a><span class="in">as.matrix(data.frame(x=1, y=1))</span></span>
<span id="cb53-1004"><a href="#cb53-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1005"><a href="#cb53-1005" aria-hidden="true" tabindex="-1"></a><span class="in">as.null(1)</span></span>
<span id="cb53-1006"><a href="#cb53-1006" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-1007"><a href="#cb53-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1008"><a href="#cb53-1008" aria-hidden="true" tabindex="-1"></a><span class="fu">## NAの取り扱い</span></span>
<span id="cb53-1009"><a href="#cb53-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1010"><a href="#cb53-1010" aria-hidden="true" tabindex="-1"></a>Rでは、データに欠測値（<span class="in">`NA`</span>）、計算できない値（<span class="in">`NaN`</span>）、空の値（<span class="in">`NULL`</span>）、無限大（<span class="in">`Inf`</span>）が含まれることがあります。これらのうち、<span class="in">`NA`</span>と<span class="in">`NaN`</span>を取り除く関数が<span class="in">`na.omit`</span>関数です。<span class="in">`na.omit`</span>関数はベクターやデータフレームを引数に取り、<span class="in">`NA`</span>と<span class="in">`NaN`</span>を取り除いてくれる関数です。<span class="in">`NA`</span>と異なり、<span class="in">`Inf`</span>は取り除かれません。</span>
<span id="cb53-1011"><a href="#cb53-1011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1012"><a href="#cb53-1012" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="na.omit関数"}</span></span>
<span id="cb53-1013"><a href="#cb53-1013" aria-hidden="true" tabindex="-1"></a><span class="in">vec &lt;- c(1, NA, NaN, NULL, Inf) # NULLは要素として含められない</span></span>
<span id="cb53-1014"><a href="#cb53-1014" aria-hidden="true" tabindex="-1"></a><span class="in">vec</span></span>
<span id="cb53-1015"><a href="#cb53-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1016"><a href="#cb53-1016" aria-hidden="true" tabindex="-1"></a><span class="in">na.omit(vec)</span></span>
<span id="cb53-1017"><a href="#cb53-1017" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-1018"><a href="#cb53-1018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1019"><a href="#cb53-1019" aria-hidden="true" tabindex="-1"></a><span class="fu">## 予約語</span></span>
<span id="cb53-1020"><a href="#cb53-1020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1021"><a href="#cb53-1021" aria-hidden="true" tabindex="-1"></a>上の例では関数や変数に名前をつけていますが、関数名や変数名の付け方にはルールがあります。</span>
<span id="cb53-1022"><a href="#cb53-1022" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1023"><a href="#cb53-1023" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>名前の始めに数値（1、2など）をつけることはできない</span>
<span id="cb53-1024"><a href="#cb53-1024" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>名前の始めにアンダーバー（<span class="sc">\_</span>）を用いることはできない</span>
<span id="cb53-1025"><a href="#cb53-1025" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>大文字と小文字は区別される（SUMとsumは別扱い）</span>
<span id="cb53-1026"><a href="#cb53-1026" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>演算子や記号（<span class="in">`!`</span>や<span class="in">`?`</span>、<span class="in">`+`</span>、<span class="in">`-`</span>、<span class="in">`#`</span> など）は使えない</span>
<span id="cb53-1027"><a href="#cb53-1027" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**予約語**を用いることはできない</span>
<span id="cb53-1028"><a href="#cb53-1028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1029"><a href="#cb53-1029" aria-hidden="true" tabindex="-1"></a>**予約語（reserved word）**とは、R言語がすでに役割を与えているために、関数名や変数名には使用できない文字列です。Rで設定されている予約語は以下の通りです。</span>
<span id="cb53-1030"><a href="#cb53-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1031"><a href="#cb53-1031" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>if</span>
<span id="cb53-1032"><a href="#cb53-1032" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>else</span>
<span id="cb53-1033"><a href="#cb53-1033" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>repeat</span>
<span id="cb53-1034"><a href="#cb53-1034" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>while</span>
<span id="cb53-1035"><a href="#cb53-1035" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>function\</span>
<span id="cb53-1036"><a href="#cb53-1036" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>for</span>
<span id="cb53-1037"><a href="#cb53-1037" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>in</span>
<span id="cb53-1038"><a href="#cb53-1038" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>next</span>
<span id="cb53-1039"><a href="#cb53-1039" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>break</span>
<span id="cb53-1040"><a href="#cb53-1040" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>TRUE</span>
<span id="cb53-1041"><a href="#cb53-1041" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>FALSE</span>
<span id="cb53-1042"><a href="#cb53-1042" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>NULL</span>
<span id="cb53-1043"><a href="#cb53-1043" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Inf</span>
<span id="cb53-1044"><a href="#cb53-1044" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>NaN</span>
<span id="cb53-1045"><a href="#cb53-1045" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>NA</span>
<span id="cb53-1046"><a href="#cb53-1046" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>NA_integer<span class="sc">\_</span></span>
<span id="cb53-1047"><a href="#cb53-1047" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>NA_real<span class="sc">\_</span></span>
<span id="cb53-1048"><a href="#cb53-1048" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>NA_complex<span class="sc">\_</span></span>
<span id="cb53-1049"><a href="#cb53-1049" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>NA_character<span class="sc">\_</span></span>
<span id="cb53-1050"><a href="#cb53-1050" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>...</span>
<span id="cb53-1051"><a href="#cb53-1051" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>..1</span>
<span id="cb53-1052"><a href="#cb53-1052" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>..2</span>
<span id="cb53-1053"><a href="#cb53-1053" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1054"><a href="#cb53-1054" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip collapse="true"}</span>
<span id="cb53-1055"><a href="#cb53-1055" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1056"><a href="#cb53-1056" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rでのピリオドの取り扱い</span></span>
<span id="cb53-1057"><a href="#cb53-1057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1058"><a href="#cb53-1058" aria-hidden="true" tabindex="-1"></a>Rでは、ピリオド（.）が予約語に含まれていないため、変数名にピリオドを利用することができます。ただし、他の言語ではこのピリオドをメソッド（method）という、関数の仲間のようなものに用いることが多く、勘違いを起こしやすい表記になります。Rでも変数名にピリオドを用いないほうがよいとされています。</span>
<span id="cb53-1059"><a href="#cb53-1059" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1060"><a href="#cb53-1060" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb53-1061"><a href="#cb53-1061" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1062"><a href="#cb53-1062" aria-hidden="true" tabindex="-1"></a><span class="fu">## ヘルプ</span></span>
<span id="cb53-1063"><a href="#cb53-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1064"><a href="#cb53-1064" aria-hidden="true" tabindex="-1"></a>ヘルプを呼び出すことでRの関数の使い方を確認することができます。ヘルプは関数名の前に<span class="in">`?`</span>を付けて実行することで呼び出すことができます。RStudioでは、右下のパネルにヘルプの内容が表示されます。</span>
<span id="cb53-1065"><a href="#cb53-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-1066"><a href="#cb53-1066" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, filename="ヘルプの呼び出し", eval=FALSE}</span></span>
<span id="cb53-1067"><a href="#cb53-1067" aria-hidden="true" tabindex="-1"></a><span class="in">?mean # mean関数のヘルプを呼び出す</span></span>
<span id="cb53-1068"><a href="#cb53-1068" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><a href="https://quarto.org/">Quarto</a>を用いてこの本を作成しました</p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"openEffect":"zoom","selector":".lightbox","descPosition":"bottom","loop":false,"closeEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>